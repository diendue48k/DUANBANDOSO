(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();function Ec(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ec={exports:{}},Fs={},tc={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function Bm(){if(wf)return Be;wf=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),P=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=P&&D[P]||D["@@iterator"],typeof D=="function"?D:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,B={};function O(D,W,_e){this.props=D,this.context=W,this.refs=B,this.updater=_e||A}O.prototype.isReactComponent={},O.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},O.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Q(){}Q.prototype=O.prototype;function te(D,W,_e){this.props=D,this.context=W,this.refs=B,this.updater=_e||A}var Y=te.prototype=new Q;Y.constructor=te,b(Y,O.prototype),Y.isPureReactComponent=!0;var se=Array.isArray,he=Object.prototype.hasOwnProperty,me={current:null},pe={key:!0,ref:!0,__self:!0,__source:!0};function Te(D,W,_e){var we,oe={},re=null,Le=null;if(W!=null)for(we in W.ref!==void 0&&(Le=W.ref),W.key!==void 0&&(re=""+W.key),W)he.call(W,we)&&!pe.hasOwnProperty(we)&&(oe[we]=W[we]);var Fe=arguments.length-2;if(Fe===1)oe.children=_e;else if(1<Fe){for(var We=Array(Fe),_t=0;_t<Fe;_t++)We[_t]=arguments[_t+2];oe.children=We}if(D&&D.defaultProps)for(we in Fe=D.defaultProps,Fe)oe[we]===void 0&&(oe[we]=Fe[we]);return{$$typeof:t,type:D,key:re,ref:Le,props:oe,_owner:me.current}}function le(D,W){return{$$typeof:t,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function Ie(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Se(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(_e){return W[_e]})}var X=/\/+/g;function ce(D,W){return typeof D=="object"&&D!==null&&D.key!=null?Se(""+D.key):W.toString(36)}function Ue(D,W,_e,we,oe){var re=typeof D;(re==="undefined"||re==="boolean")&&(D=null);var Le=!1;if(D===null)Le=!0;else switch(re){case"string":case"number":Le=!0;break;case"object":switch(D.$$typeof){case t:case e:Le=!0}}if(Le)return Le=D,oe=oe(Le),D=we===""?"."+ce(Le,0):we,se(oe)?(_e="",D!=null&&(_e=D.replace(X,"$&/")+"/"),Ue(oe,W,_e,"",function(_t){return _t})):oe!=null&&(Ie(oe)&&(oe=le(oe,_e+(!oe.key||Le&&Le.key===oe.key?"":(""+oe.key).replace(X,"$&/")+"/")+D)),W.push(oe)),1;if(Le=0,we=we===""?".":we+":",se(D))for(var Fe=0;Fe<D.length;Fe++){re=D[Fe];var We=we+ce(re,Fe);Le+=Ue(re,W,_e,We,oe)}else if(We=E(D),typeof We=="function")for(D=We.call(D),Fe=0;!(re=D.next()).done;)re=re.value,We=we+ce(re,Fe++),Le+=Ue(re,W,_e,We,oe);else if(re==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Le}function je(D,W,_e){if(D==null)return D;var we=[],oe=0;return Ue(D,we,"","",function(re){return W.call(_e,re,oe++)}),we}function Ae(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(_e){(D._status===0||D._status===-1)&&(D._status=1,D._result=_e)},function(_e){(D._status===0||D._status===-1)&&(D._status=2,D._result=_e)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var ze={current:null},J={transition:null},K={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:J,ReactCurrentOwner:me};function H(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:je,forEach:function(D,W,_e){je(D,function(){W.apply(this,arguments)},_e)},count:function(D){var W=0;return je(D,function(){W++}),W},toArray:function(D){return je(D,function(W){return W})||[]},only:function(D){if(!Ie(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Be.Component=O,Be.Fragment=o,Be.Profiler=u,Be.PureComponent=te,Be.StrictMode=s,Be.Suspense=y,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Be.act=H,Be.cloneElement=function(D,W,_e){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var we=b({},D.props),oe=D.key,re=D.ref,Le=D._owner;if(W!=null){if(W.ref!==void 0&&(re=W.ref,Le=me.current),W.key!==void 0&&(oe=""+W.key),D.type&&D.type.defaultProps)var Fe=D.type.defaultProps;for(We in W)he.call(W,We)&&!pe.hasOwnProperty(We)&&(we[We]=W[We]===void 0&&Fe!==void 0?Fe[We]:W[We])}var We=arguments.length-2;if(We===1)we.children=_e;else if(1<We){Fe=Array(We);for(var _t=0;_t<We;_t++)Fe[_t]=arguments[_t+2];we.children=Fe}return{$$typeof:t,type:D.type,key:oe,ref:re,props:we,_owner:Le}},Be.createContext=function(D){return D={$$typeof:m,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:h,_context:D},D.Consumer=D},Be.createElement=Te,Be.createFactory=function(D){var W=Te.bind(null,D);return W.type=D,W},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:g,render:D}},Be.isValidElement=Ie,Be.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:Ae}},Be.memo=function(D,W){return{$$typeof:w,type:D,compare:W===void 0?null:W}},Be.startTransition=function(D){var W=J.transition;J.transition={};try{D()}finally{J.transition=W}},Be.unstable_act=H,Be.useCallback=function(D,W){return ze.current.useCallback(D,W)},Be.useContext=function(D){return ze.current.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D){return ze.current.useDeferredValue(D)},Be.useEffect=function(D,W){return ze.current.useEffect(D,W)},Be.useId=function(){return ze.current.useId()},Be.useImperativeHandle=function(D,W,_e){return ze.current.useImperativeHandle(D,W,_e)},Be.useInsertionEffect=function(D,W){return ze.current.useInsertionEffect(D,W)},Be.useLayoutEffect=function(D,W){return ze.current.useLayoutEffect(D,W)},Be.useMemo=function(D,W){return ze.current.useMemo(D,W)},Be.useReducer=function(D,W,_e){return ze.current.useReducer(D,W,_e)},Be.useRef=function(D){return ze.current.useRef(D)},Be.useState=function(D){return ze.current.useState(D)},Be.useSyncExternalStore=function(D,W,_e){return ze.current.useSyncExternalStore(D,W,_e)},Be.useTransition=function(){return ze.current.useTransition()},Be.version="18.3.1",Be}var xf;function Pc(){return xf||(xf=1,tc.exports=Bm()),tc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function Vm(){if(Tf)return Fs;Tf=1;var t=Pc(),e=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function m(g,y,w){var T,P={},E=null,A=null;w!==void 0&&(E=""+w),y.key!==void 0&&(E=""+y.key),y.ref!==void 0&&(A=y.ref);for(T in y)s.call(y,T)&&!h.hasOwnProperty(T)&&(P[T]=y[T]);if(g&&g.defaultProps)for(T in y=g.defaultProps,y)P[T]===void 0&&(P[T]=y[T]);return{$$typeof:e,type:g,key:E,ref:A,props:P,_owner:u.current}}return Fs.Fragment=o,Fs.jsx=m,Fs.jsxs=m,Fs}var Cf;function bm(){return Cf||(Cf=1,ec.exports=Vm()),ec.exports}var S=bm(),Z=Pc();const bs=Ec(Z);var fa={},nc={exports:{}},Gt={},ic={exports:{}},oc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sf;function Hm(){return Sf||(Sf=1,(function(t){function e(J,K){var H=J.length;J.push(K);e:for(;0<H;){var D=H-1>>>1,W=J[D];if(0<u(W,K))J[D]=K,J[H]=W,H=D;else break e}}function o(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var K=J[0],H=J.pop();if(H!==K){J[0]=H;e:for(var D=0,W=J.length,_e=W>>>1;D<_e;){var we=2*(D+1)-1,oe=J[we],re=we+1,Le=J[re];if(0>u(oe,H))re<W&&0>u(Le,oe)?(J[D]=Le,J[re]=H,D=re):(J[D]=oe,J[we]=H,D=we);else if(re<W&&0>u(Le,H))J[D]=Le,J[re]=H,D=re;else break e}}return K}function u(J,K){var H=J.sortIndex-K.sortIndex;return H!==0?H:J.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;t.unstable_now=function(){return h.now()}}else{var m=Date,g=m.now();t.unstable_now=function(){return m.now()-g}}var y=[],w=[],T=1,P=null,E=3,A=!1,b=!1,B=!1,O=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(J){for(var K=o(w);K!==null;){if(K.callback===null)s(w);else if(K.startTime<=J)s(w),K.sortIndex=K.expirationTime,e(y,K);else break;K=o(w)}}function se(J){if(B=!1,Y(J),!b)if(o(y)!==null)b=!0,Ae(he);else{var K=o(w);K!==null&&ze(se,K.startTime-J)}}function he(J,K){b=!1,B&&(B=!1,Q(Te),Te=-1),A=!0;var H=E;try{for(Y(K),P=o(y);P!==null&&(!(P.expirationTime>K)||J&&!Se());){var D=P.callback;if(typeof D=="function"){P.callback=null,E=P.priorityLevel;var W=D(P.expirationTime<=K);K=t.unstable_now(),typeof W=="function"?P.callback=W:P===o(y)&&s(y),Y(K)}else s(y);P=o(y)}if(P!==null)var _e=!0;else{var we=o(w);we!==null&&ze(se,we.startTime-K),_e=!1}return _e}finally{P=null,E=H,A=!1}}var me=!1,pe=null,Te=-1,le=5,Ie=-1;function Se(){return!(t.unstable_now()-Ie<le)}function X(){if(pe!==null){var J=t.unstable_now();Ie=J;var K=!0;try{K=pe(!0,J)}finally{K?ce():(me=!1,pe=null)}}else me=!1}var ce;if(typeof te=="function")ce=function(){te(X)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,je=Ue.port2;Ue.port1.onmessage=X,ce=function(){je.postMessage(null)}}else ce=function(){O(X,0)};function Ae(J){pe=J,me||(me=!0,ce())}function ze(J,K){Te=O(function(){J(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){b||A||(b=!0,Ae(he))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return o(y)},t.unstable_next=function(J){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var H=E;E=K;try{return J()}finally{E=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,K){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var H=E;E=J;try{return K()}finally{E=H}},t.unstable_scheduleCallback=function(J,K,H){var D=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?D+H:D):H=D,J){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=H+W,J={id:T++,callback:K,priorityLevel:J,startTime:H,expirationTime:W,sortIndex:-1},H>D?(J.sortIndex=H,e(w,J),o(y)===null&&J===o(w)&&(B?(Q(Te),Te=-1):B=!0,ze(se,H-D))):(J.sortIndex=W,e(y,J),b||A||(b=!0,Ae(he))),J},t.unstable_shouldYield=Se,t.unstable_wrapCallback=function(J){var K=E;return function(){var H=E;E=K;try{return J.apply(this,arguments)}finally{E=H}}}})(oc)),oc}var Ef;function Gm(){return Ef||(Ef=1,ic.exports=Hm()),ic.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function qm(){if(Pf)return Gt;Pf=1;var t=Pc(),e=Gm();function o(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,u={};function h(n,r){m(n,r),m(n+"Capture",r)}function m(n,r){for(u[n]=r,n=0;n<r.length;n++)s.add(r[n])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},P={};function E(n){return y.call(P,n)?!0:y.call(T,n)?!1:w.test(n)?P[n]=!0:(T[n]=!0,!1)}function A(n,r,a,p){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,r,a,p){if(r===null||typeof r>"u"||A(n,r,a,p))return!0;if(p)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function B(n,r,a,p,v,x,I){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=x,this.removeEmptyString=I}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];O[r]=new B(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(Q,te);O[r]=new B(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(Q,te);O[r]=new B(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(Q,te);O[r]=new B(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,r,a,p){var v=O.hasOwnProperty(r)?O[r]:null;(v!==null?v.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(b(r,a,v,p)&&(a=null),p||v===null?E(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):v.mustUseProperty?n[v.propertyName]=a===null?v.type===3?!1:"":a:(r=v.attributeName,p=v.attributeNamespace,a===null?n.removeAttribute(r):(v=v.type,a=v===3||v===4&&a===!0?"":""+a,p?n.setAttributeNS(p,r,a):n.setAttribute(r,a))))}var se=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),me=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),Ie=Symbol.for("react.provider"),Se=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),J=Symbol.iterator;function K(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var H=Object.assign,D;function W(n){if(D===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+n}var _e=!1;function we(n,r){if(!n||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var p=q}Reflect.construct(n,[],r)}else{try{r.call()}catch(q){p=q}n.call(r.prototype)}else{try{throw Error()}catch(q){p=q}n()}}catch(q){if(q&&p&&typeof q.stack=="string"){for(var v=q.stack.split(`
`),x=p.stack.split(`
`),I=v.length-1,k=x.length-1;1<=I&&0<=k&&v[I]!==x[k];)k--;for(;1<=I&&0<=k;I--,k--)if(v[I]!==x[k]){if(I!==1||k!==1)do if(I--,k--,0>k||v[I]!==x[k]){var R=`
`+v[I].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=I&&0<=k);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function oe(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pe:return"Fragment";case me:return"Portal";case le:return"Profiler";case Te:return"StrictMode";case ce:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Se:return(n.displayName||"Context")+".Consumer";case Ie:return(n._context.displayName||"Context")+".Provider";case X:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case je:return r=n.displayName||null,r!==null?r:re(n.type)||"Memo";case Ae:r=n._payload,n=n._init;try{return re(n(r))}catch{}}return null}function Le(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(r);case 8:return r===Te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _t(n){var r=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),p=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var v=a.get,x=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return v.call(this)},set:function(I){p=""+I,x.call(this,I)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function mi(n){n._valueTracker||(n._valueTracker=_t(n))}function gi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),p="";return n&&(p=We(n)?n.checked?"true":"false":n.value),n=p,n!==a?(r.setValue(n),!0):!1}function _i(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Fr(n,r){var a=r.checked;return H({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ur(n,r){var a=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;a=Fe(r.value!=null?r.value:a),n._wrapperState={initialChecked:p,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function zr(n,r){r=r.checked,r!=null&&Y(n,"checked",r,!1)}function to(n,r){zr(n,r);var a=Fe(r.value),p=r.type;if(a!=null)p==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Br(n,r.type,a):r.hasOwnProperty("defaultValue")&&Br(n,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function no(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Br(n,r,a){(r!=="number"||_i(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var vi=Array.isArray;function kn(n,r,a,p){if(n=n.options,r){r={};for(var v=0;v<a.length;v++)r["$"+a[v]]=!0;for(a=0;a<n.length;a++)v=r.hasOwnProperty("$"+n[a].value),n[a].selected!==v&&(n[a].selected=v),v&&p&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),r=null,v=0;v<n.length;v++){if(n[v].value===a){n[v].selected=!0,p&&(n[v].defaultSelected=!0);return}r!==null||n[v].disabled||(r=n[v])}r!==null&&(r.selected=!0)}}function Fo(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return H({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vr(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(o(92));if(vi(a)){if(1<a.length)throw Error(o(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Fe(a)}}function Os(n,r){var a=Fe(r.value),p=Fe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),p!=null&&(n.defaultValue=""+p)}function Ws(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Uo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zo(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Uo(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var io,Zs=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,p,v){MSApp.execUnsafeLocalFunction(function(){return n(r,a,p,v)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=io.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function yi(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Aa=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(n){Aa.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),wi[r]=wi[n]})});function br(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||wi.hasOwnProperty(n)&&wi[n]?(""+r).trim():r+"px"}function Bo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var p=a.indexOf("--")===0,v=br(a,r[a],p);a==="float"&&(a="cssFloat"),p?n.setProperty(a,v):n[a]=v}}var Js=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hr(n,r){if(r){if(Js[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function qn(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function qr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vo=null,On=null,Wn=null;function Ks(n){if(n=ii(n)){if(typeof Vo!="function")throw Error(o(280));var r=n.stateNode;r&&(r=fr(r),Vo(n.stateNode,n.type,r))}}function $s(n){On?Wn?Wn.push(n):Wn=[n]:On=n}function Ys(){if(On){var n=On,r=Wn;if(Wn=On=null,Ks(n),r)for(n=0;n<r.length;n++)Ks(r[n])}}function Qs(n,r){return n(r)}function Xs(){}var Or=!1;function bo(n,r,a){if(Or)return n(r,a);Or=!0;try{return Qs(n,r,a)}finally{Or=!1,(On!==null||Wn!==null)&&(Xs(),Ys())}}function oo(n,r){var a=n.stateNode;if(a===null)return null;var p=fr(a);if(p===null)return null;a=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var Wr=!1;if(g)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{Wr=!1}function Ma(n,r,a,p,v,x,I,k,R){var q=Array.prototype.slice.call(arguments,3);try{r.apply(a,q)}catch(ee){this.onError(ee)}}var wt=!1,ye=null,so=!1,Ho=null,js={onError:function(n){wt=!0,ye=n}};function el(n,r,a,p,v,x,I,k,R){wt=!1,ye=null,Ma.apply(js,arguments)}function Zr(n,r,a,p,v,x,I,k,R){if(el.apply(this,arguments),wt){if(wt){var q=ye;wt=!1,ye=null}else throw Error(o(198));so||(so=!0,Ho=q)}}function An(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Zn(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Jr(n){if(An(n)!==n)throw Error(o(188))}function Ra(n){var r=n.alternate;if(!r){if(r=An(n),r===null)throw Error(o(188));return r!==n?null:n}for(var a=n,p=r;;){var v=a.return;if(v===null)break;var x=v.alternate;if(x===null){if(p=v.return,p!==null){a=p;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===a)return Jr(v),n;if(x===p)return Jr(v),r;x=x.sibling}throw Error(o(188))}if(a.return!==p.return)a=v,p=x;else{for(var I=!1,k=v.child;k;){if(k===a){I=!0,a=v,p=x;break}if(k===p){I=!0,p=v,a=x;break}k=k.sibling}if(!I){for(k=x.child;k;){if(k===a){I=!0,a=x,p=v;break}if(k===p){I=!0,p=x,a=v;break}k=k.sibling}if(!I)throw Error(o(189))}}if(a.alternate!==p)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:r}function tl(n){return n=Ra(n),n!==null?nl(n):null}function nl(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=nl(n);if(r!==null)return r;n=n.sibling}return null}var il=e.unstable_scheduleCallback,Kr=e.unstable_cancelCallback,La=e.unstable_shouldYield,Go=e.unstable_requestPaint,tt=e.unstable_now,Da=e.unstable_getCurrentPriorityLevel,$r=e.unstable_ImmediatePriority,ol=e.unstable_UserBlockingPriority,qo=e.unstable_NormalPriority,Yr=e.unstable_LowPriority,xi=e.unstable_IdlePriority,lo=null,Ot=null;function ao(n){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(lo,n,void 0,(n.current.flags&128)===128)}catch{}}var Re=Math.clz32?Math.clz32:Ti,Ye=Math.log,Oo=Math.LN2;function Ti(n){return n>>>=0,n===0?32:31-(Ye(n)/Oo|0)|0}var gn=64,Ci=4194304;function Me(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ke(n,r){var a=n.pendingLanes;if(a===0)return 0;var p=0,v=n.suspendedLanes,x=n.pingedLanes,I=a&268435455;if(I!==0){var k=I&~v;k!==0?p=Me(k):(x&=I,x!==0&&(p=Me(x)))}else I=a&~v,I!==0?p=Me(I):x!==0&&(p=Me(x));if(p===0)return 0;if(r!==0&&r!==p&&(r&v)===0&&(v=p&-p,x=r&-r,v>=x||v===16&&(x&4194240)!==0))return r;if((p&4)!==0&&(p|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=p;0<r;)a=31-Re(r),v=1<<a,p|=n[a],r&=~v;return p}function Qr(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wo(n,r){for(var a=n.suspendedLanes,p=n.pingedLanes,v=n.expirationTimes,x=n.pendingLanes;0<x;){var I=31-Re(x),k=1<<I,R=v[I];R===-1?((k&a)===0||(k&p)!==0)&&(v[I]=Qr(k,r)):R<=r&&(n.expiredLanes|=k),x&=~k}}function xt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rl(){var n=gn;return gn<<=1,(gn&4194240)===0&&(gn=64),n}function Si(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Wt(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Re(r),n[r]=a}function rt(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<a;){var v=31-Re(a),x=1<<v;r[v]=0,p[v]=-1,n[v]=-1,a&=~x}}function _n(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var p=31-Re(a),v=1<<p;v&r|n[p]&r&&(n[p]|=r),a&=~v}}var be=0;function Ei(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Zo,Jn,Jo,Ko,uo,co=!1,Pi=[],Zt=null,vn=null,nn=null,fo=new Map,Ne=new Map,ct=[],Ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xr(n,r){switch(n){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":fo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(r.pointerId)}}function Kn(n,r,a,p,v,x){return n===null||n.nativeEvent!==x?(n={blockedOn:r,domEventName:a,eventSystemFlags:p,nativeEvent:x,targetContainers:[v]},r!==null&&(r=ii(r),r!==null&&Jn(r)),n):(n.eventSystemFlags|=p,r=n.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),n)}function jr(n,r,a,p,v){switch(r){case"focusin":return Zt=Kn(Zt,n,r,a,p,v),!0;case"dragenter":return vn=Kn(vn,n,r,a,p,v),!0;case"mouseover":return nn=Kn(nn,n,r,a,p,v),!0;case"pointerover":var x=v.pointerId;return fo.set(x,Kn(fo.get(x)||null,n,r,a,p,v)),!0;case"gotpointercapture":return x=v.pointerId,Ne.set(x,Kn(Ne.get(x)||null,n,r,a,p,v)),!0}return!1}function $o(n){var r=ni(n.target);if(r!==null){var a=An(r);if(a!==null){if(r=a.tag,r===13){if(r=Zn(a),r!==null){n.blockedOn=r,uo(n.priority,function(){Jo(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function on(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Xo(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var p=new a.constructor(a.type,a);Gr=p,a.target.dispatchEvent(p),Gr=null}else return r=ii(a),r!==null&&Jn(r),n.blockedOn=a,!1;r.shift()}return!0}function Yo(n,r,a){on(n)&&a.delete(r)}function ho(){co=!1,Zt!==null&&on(Zt)&&(Zt=null),vn!==null&&on(vn)&&(vn=null),nn!==null&&on(nn)&&(nn=null),fo.forEach(Yo),Ne.forEach(Yo)}function nt(n,r){n.blockedOn===r&&(n.blockedOn=null,co||(co=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ho)))}function Jt(n){function r(v){return nt(v,n)}if(0<Pi.length){nt(Pi[0],n);for(var a=1;a<Pi.length;a++){var p=Pi[a];p.blockedOn===n&&(p.blockedOn=null)}}for(Zt!==null&&nt(Zt,n),vn!==null&&nt(vn,n),nn!==null&&nt(nn,n),fo.forEach(r),Ne.forEach(r),a=0;a<ct.length;a++)p=ct[a],p.blockedOn===n&&(p.blockedOn=null);for(;0<ct.length&&(a=ct[0],a.blockedOn===null);)$o(a),a.blockedOn===null&&ct.shift()}var $n=se.ReactCurrentBatchConfig,po=!0;function Fa(n,r,a,p){var v=be,x=$n.transition;$n.transition=null;try{be=1,mo(n,r,a,p)}finally{be=v,$n.transition=x}}function sl(n,r,a,p){var v=be,x=$n.transition;$n.transition=null;try{be=4,mo(n,r,a,p)}finally{be=v,$n.transition=x}}function mo(n,r,a,p){if(po){var v=Xo(n,r,a,p);if(v===null)i(n,r,p,Qo,a),Xr(n,p);else if(jr(v,n,r,a,p))p.stopPropagation();else if(Xr(n,p),r&4&&-1<Ze.indexOf(n)){for(;v!==null;){var x=ii(v);if(x!==null&&Zo(x),x=Xo(n,r,a,p),x===null&&i(n,r,p,Qo,a),x===v)break;v=x}v!==null&&p.stopPropagation()}else i(n,r,p,null,a)}}var Qo=null;function Xo(n,r,a,p){if(Qo=null,n=qr(p),n=ni(n),n!==null)if(r=An(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Zn(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Qo=n,null}function Ve(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Da()){case $r:return 1;case ol:return 4;case qo:case Yr:return 16;case xi:return 536870912;default:return 16}default:return 16}}var Mn=null,kt=null,Rn=null;function es(){if(Rn)return Rn;var n,r=kt,a=r.length,p,v="value"in Mn?Mn.value:Mn.textContent,x=v.length;for(n=0;n<a&&r[n]===v[n];n++);var I=a-n;for(p=1;p<=I&&r[a-p]===v[x-p];p++);return Rn=v.slice(n,1<p?1-p:void 0)}function jo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ii(){return!0}function ll(){return!1}function Tt(n){function r(a,p,v,x,I){this._reactName=a,this._targetInst=v,this.type=p,this.nativeEvent=x,this.target=I,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(x):x[k]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ii:ll,this.isPropagationStopped=ll,this}return H(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),r}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=Tt(Ni),Yn=H({},Ni,{view:0,detail:0}),Ua=Tt(Yn),Ft,ns,ki,Kt=H({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ki&&(ki&&n.type==="mousemove"?(Ft=n.screenX-ki.screenX,ns=n.screenY-ki.screenY):ns=Ft=0,ki=n),Ft)},movementY:function(n){return"movementY"in n?n.movementY:ns}}),is=Tt(Kt),al=H({},Kt,{dataTransfer:0}),os=Tt(al),za=H({},Yn,{relatedTarget:0}),er=Tt(za),ul=H({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Tt(ul),Va=H({},Ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rs=Tt(Va),ba=H({},Ni,{data:0}),ss=Tt(ba),cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ha(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Qn[n])?!!r[n]:!1}function Xn(){return Ha}var Ut=H({},Yn,{key:function(n){if(n.key){var r=cl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=jo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tr[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xn,charCode:function(n){return n.type==="keypress"?jo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?jo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dl=Tt(Ut),fl=H({},Kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Tt(fl),ls=H({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xn}),as=Tt(ls),Ga=H({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),qa=Tt(Ga),pl=H({},Kt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oa=Tt(pl),$t=[9,13,27,32],Ln=g&&"CompositionEvent"in window,go=null;g&&"documentMode"in document&&(go=document.documentMode);var yn=g&&"TextEvent"in window&&!go,ml=g&&(!Ln||go&&8<go&&11>=go),jn=" ",gl=!1;function Ai(n,r){switch(n){case"keyup":return $t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function us(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wn=!1;function Wa(n,r){switch(n){case"compositionend":return us(r);case"keypress":return r.which!==32?null:(gl=!0,jn);case"textInput":return n=r.data,n===jn&&gl?null:n;default:return null}}function Dn(n,r){if(wn)return n==="compositionend"||!Ln&&Ai(n,r)?(n=es(),Rn=kt=Mn=null,wn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ml&&r.locale!=="ko"?null:r.data;default:return null}}var nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _l(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!nr[n.type]:r==="textarea"}function ir(n,r,a,p){$s(p),r=f(r,"onChange"),0<r.length&&(a=new ts("onChange","change",null,a,p),n.push({event:a,listeners:r}))}var _o=null,At=null;function Za(n){vs(n,0)}function xn(n){var r=oi(n);if(gi(r))return n}function Ja(n,r){if(n==="change")return r}var rn=!1;if(g){var Mi;if(g){var or="oninput"in document;if(!or){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),or=typeof rr.oninput=="function"}Mi=or}else Mi=!1;rn=Mi&&(!document.documentMode||9<document.documentMode)}function vo(){_o&&(_o.detachEvent("onpropertychange",sr),At=_o=null)}function sr(n){if(n.propertyName==="value"&&xn(At)){var r=[];ir(r,At,n,qr(n)),bo(Za,r)}}function lr(n,r,a){n==="focusin"?(vo(),_o=r,At=a,_o.attachEvent("onpropertychange",sr)):n==="focusout"&&vo()}function Ri(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xn(At)}function ar(n,r){if(n==="click")return xn(r)}function cs(n,r){if(n==="input"||n==="change")return xn(r)}function vl(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Yt=typeof Object.is=="function"?Object.is:vl;function Fn(n,r){if(Yt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),p=Object.keys(r);if(a.length!==p.length)return!1;for(p=0;p<a.length;p++){var v=a[p];if(!y.call(r,v)||!Yt(n[v],r[v]))return!1}return!0}function yl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ds(n,r){var a=yl(n);n=0;for(var p;a;){if(a.nodeType===3){if(p=n+a.textContent.length,n<=r&&p>=r)return{node:a,offset:r-n};n=p}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yl(a)}}function wl(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?wl(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function fs(){for(var n=window,r=_i();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=_i(n.document)}return r}function hs(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function sn(n){var r=fs(),a=n.focusedElem,p=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&wl(a.ownerDocument.documentElement,a)){if(p!==null&&hs(a)){if(r=p.start,n=p.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var v=a.textContent.length,x=Math.min(p.start,v);p=p.end===void 0?x:Math.min(p.end,v),!n.extend&&x>p&&(v=p,p=x,x=v),v=ds(a,x);var I=ds(a,p);v&&I&&(n.rangeCount!==1||n.anchorNode!==v.node||n.anchorOffset!==v.offset||n.focusNode!==I.node||n.focusOffset!==I.offset)&&(r=r.createRange(),r.setStart(v.node,v.offset),n.removeAllRanges(),x>p?(n.addRange(r),n.extend(I.node,I.offset)):(r.setEnd(I.node,I.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ur=g&&"documentMode"in document&&11>=document.documentMode,Li=null,Di=null,yo=null,cr=!1;function xl(n,r,a){var p=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cr||Li==null||Li!==_i(p)||(p=Li,"selectionStart"in p&&hs(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),yo&&Fn(yo,p)||(yo=p,p=f(Di,"onSelect"),0<p.length&&(r=new ts("onSelect","select",null,r,a),n.push({event:r,listeners:p}),r.target=Li)))}function Un(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Fi={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},zn={},ps={};g&&(ps=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function wo(n){if(zn[n])return zn[n];if(!Fi[n])return n;var r=Fi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ps)return zn[n]=r[a];return n}var Tl=wo("animationend"),ln=wo("animationiteration"),ms=wo("animationstart"),gs=wo("transitionend"),Ui=new Map,Cl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(n,r){Ui.set(n,r),h(r,[n])}for(var ei=0;ei<Cl.length;ei++){var dr=Cl[ei],Sl=dr.toLowerCase(),Ka=dr[0].toUpperCase()+dr.slice(1);Qt(Sl,"on"+Ka)}Qt(Tl,"onAnimationEnd"),Qt(ln,"onAnimationIteration"),Qt(ms,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(gs,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),El=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function _s(n,r,a){var p=n.type||"unknown-event";n.currentTarget=a,Zr(p,r,void 0,n),n.currentTarget=null}function vs(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var p=n[a],v=p.event;p=p.listeners;e:{var x=void 0;if(r)for(var I=p.length-1;0<=I;I--){var k=p[I],R=k.instance,q=k.currentTarget;if(k=k.listener,R!==x&&v.isPropagationStopped())break e;_s(v,k,q),x=R}else for(I=0;I<p.length;I++){if(k=p[I],R=k.instance,q=k.currentTarget,k=k.listener,R!==x&&v.isPropagationStopped())break e;_s(v,k,q),x=R}}}if(so)throw n=Ho,so=!1,Ho=null,n}function Je(n,r){var a=r[Hi];a===void 0&&(a=r[Hi]=new Set);var p=n+"__bubble";a.has(p)||(Pl(r,n,2,!1),a.add(p))}function ys(n,r,a){var p=0;r&&(p|=4),Pl(a,n,p,r)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Bi(n){if(!n[xo]){n[xo]=!0,s.forEach(function(a){a!=="selectionchange"&&(El.has(a)||ys(a,!1,n),ys(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[xo]||(r[xo]=!0,ys("selectionchange",!1,r))}}function Pl(n,r,a,p){switch(Ve(r)){case 1:var v=Fa;break;case 4:v=sl;break;default:v=mo}a=v.bind(null,r,a,n),v=void 0,!Wr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),p?v!==void 0?n.addEventListener(r,a,{capture:!0,passive:v}):n.addEventListener(r,a,!0):v!==void 0?n.addEventListener(r,a,{passive:v}):n.addEventListener(r,a,!1)}function i(n,r,a,p,v){var x=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var k=p.stateNode.containerInfo;if(k===v||k.nodeType===8&&k.parentNode===v)break;if(I===4)for(I=p.return;I!==null;){var R=I.tag;if((R===3||R===4)&&(R=I.stateNode.containerInfo,R===v||R.nodeType===8&&R.parentNode===v))return;I=I.return}for(;k!==null;){if(I=ni(k),I===null)return;if(R=I.tag,R===5||R===6){p=x=I;continue e}k=k.parentNode}}p=p.return}bo(function(){var q=x,ee=qr(a),ne=[];e:{var j=Ui.get(n);if(j!==void 0){var de=ts,ge=n;switch(n){case"keypress":if(jo(a)===0)break e;case"keydown":case"keyup":de=dl;break;case"focusin":ge="focus",de=er;break;case"focusout":ge="blur",de=er;break;case"beforeblur":case"afterblur":de=er;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=os;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=as;break;case Tl:case ln:case ms:de=Ba;break;case gs:de=qa;break;case"scroll":de=Ua;break;case"wheel":de=Oa;break;case"copy":case"cut":case"paste":de=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=hl}var ve=(r&4)!==0,lt=!ve&&n==="scroll",z=ve?j!==null?j+"Capture":null:j;ve=[];for(var F=q,V;F!==null;){V=F;var ie=V.stateNode;if(V.tag===5&&ie!==null&&(V=ie,z!==null&&(ie=oo(F,z),ie!=null&&ve.push(l(F,ie,V)))),lt)break;F=F.return}0<ve.length&&(j=new de(j,ge,null,a,ee),ne.push({event:j,listeners:ve}))}}if((r&7)===0){e:{if(j=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",j&&a!==Gr&&(ge=a.relatedTarget||a.fromElement)&&(ni(ge)||ge[Oe]))break e;if((de||j)&&(j=ee.window===ee?ee:(j=ee.ownerDocument)?j.defaultView||j.parentWindow:window,de?(ge=a.relatedTarget||a.toElement,de=q,ge=ge?ni(ge):null,ge!==null&&(lt=An(ge),ge!==lt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=q),de!==ge)){if(ve=is,ie="onMouseLeave",z="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(ve=hl,ie="onPointerLeave",z="onPointerEnter",F="pointer"),lt=de==null?j:oi(de),V=ge==null?j:oi(ge),j=new ve(ie,F+"leave",de,a,ee),j.target=lt,j.relatedTarget=V,ie=null,ni(ee)===q&&(ve=new ve(z,F+"enter",ge,a,ee),ve.target=V,ve.relatedTarget=lt,ie=ve),lt=ie,de&&ge)t:{for(ve=de,z=ge,F=0,V=ve;V;V=_(V))F++;for(V=0,ie=z;ie;ie=_(ie))V++;for(;0<F-V;)ve=_(ve),F--;for(;0<V-F;)z=_(z),V--;for(;F--;){if(ve===z||z!==null&&ve===z.alternate)break t;ve=_(ve),z=_(z)}ve=null}else ve=null;de!==null&&C(ne,j,de,ve,!1),ge!==null&&lt!==null&&C(ne,lt,ge,ve,!0)}}e:{if(j=q?oi(q):window,de=j.nodeName&&j.nodeName.toLowerCase(),de==="select"||de==="input"&&j.type==="file")var xe=Ja;else if(_l(j))if(rn)xe=cs;else{xe=Ri;var Ee=lr}else(de=j.nodeName)&&de.toLowerCase()==="input"&&(j.type==="checkbox"||j.type==="radio")&&(xe=ar);if(xe&&(xe=xe(n,q))){ir(ne,xe,a,ee);break e}Ee&&Ee(n,j,q),n==="focusout"&&(Ee=j._wrapperState)&&Ee.controlled&&j.type==="number"&&Br(j,"number",j.value)}switch(Ee=q?oi(q):window,n){case"focusin":(_l(Ee)||Ee.contentEditable==="true")&&(Li=Ee,Di=q,yo=null);break;case"focusout":yo=Di=Li=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,xl(ne,a,ee);break;case"selectionchange":if(ur)break;case"keydown":case"keyup":xl(ne,a,ee)}var Pe;if(Ln)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else wn?Ai(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(ml&&a.locale!=="ko"&&(wn||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&wn&&(Pe=es()):(Mn=ee,kt="value"in Mn?Mn.value:Mn.textContent,wn=!0)),Ee=f(q,ke),0<Ee.length&&(ke=new ss(ke,n,null,a,ee),ne.push({event:ke,listeners:Ee}),Pe?ke.data=Pe:(Pe=us(a),Pe!==null&&(ke.data=Pe)))),(Pe=yn?Wa(n,a):Dn(n,a))&&(q=f(q,"onBeforeInput"),0<q.length&&(ee=new ss("onBeforeInput","beforeinput",null,a,ee),ne.push({event:ee,listeners:q}),ee.data=Pe))}vs(ne,r)})}function l(n,r,a){return{instance:n,listener:r,currentTarget:a}}function f(n,r){for(var a=r+"Capture",p=[];n!==null;){var v=n,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=oo(n,a),x!=null&&p.unshift(l(n,x,v)),x=oo(n,r),x!=null&&p.push(l(n,x,v))),n=n.return}return p}function _(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function C(n,r,a,p,v){for(var x=r._reactName,I=[];a!==null&&a!==p;){var k=a,R=k.alternate,q=k.stateNode;if(R!==null&&R===p)break;k.tag===5&&q!==null&&(k=q,v?(R=oo(a,x),R!=null&&I.unshift(l(a,R,k))):v||(R=oo(a,x),R!=null&&I.push(l(a,R,k)))),a=a.return}I.length!==0&&n.push({event:r,listeners:I})}var N=/\r\n?/g,M=/\u0000|\uFFFD/g;function U(n){return(typeof n=="string"?n:""+n).replace(N,`
`).replace(M,"")}function G(n,r,a){if(r=U(r),U(n)!==r&&a)throw Error(o(425))}function $(){}var ae=null,Ce=null;function De(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dt=typeof setTimeout=="function"?setTimeout:void 0,at=typeof clearTimeout=="function"?clearTimeout:void 0,Mt=typeof Promise=="function"?Promise:void 0,Ct=typeof queueMicrotask=="function"?queueMicrotask:typeof Mt<"u"?function(n){return Mt.resolve(null).then(n).catch(Vi)}:dt;function Vi(n){setTimeout(function(){throw n})}function ws(n,r){var a=r,p=0;do{var v=a.nextSibling;if(n.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"){if(p===0){n.removeChild(v),Jt(r);return}p--}else a!=="$"&&a!=="$?"&&a!=="$!"||p++;a=v}while(a);Jt(r)}function Bn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Il(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var ti=Math.random().toString(36).slice(2),an="__reactFiber$"+ti,bi="__reactProps$"+ti,Oe="__reactContainer$"+ti,Hi="__reactEvents$"+ti,$a="__reactListeners$"+ti,Ya="__reactHandles$"+ti;function ni(n){var r=n[an];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Oe]||a[an]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Il(n);n!==null;){if(a=n[an])return a;n=Il(n)}return r}n=a,a=n.parentNode}return null}function ii(n){return n=n[an]||n[Oe],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(o(33))}function fr(n){return n[bi]||null}var Qa=[],hr=-1;function Gi(n){return{current:n}}function Qe(n){0>hr||(n.current=Qa[hr],Qa[hr]=null,hr--)}function $e(n,r){hr++,Qa[hr]=n.current,n.current=r}var qi={},St=Gi(qi),zt=Gi(!1),To=qi;function pr(n,r){var a=n.type.contextTypes;if(!a)return qi;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in a)v[x]=r[x];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=v),v}function Bt(n){return n=n.childContextTypes,n!=null}function Nl(){Qe(zt),Qe(St)}function Hc(n,r,a){if(St.current!==qi)throw Error(o(168));$e(St,r),$e(zt,a)}function Gc(n,r,a){var p=n.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return a;p=p.getChildContext();for(var v in p)if(!(v in r))throw Error(o(108,Le(n)||"Unknown",v));return H({},a,p)}function kl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qi,To=St.current,$e(St,n),$e(zt,zt.current),!0}function qc(n,r,a){var p=n.stateNode;if(!p)throw Error(o(169));a?(n=Gc(n,r,To),p.__reactInternalMemoizedMergedChildContext=n,Qe(zt),Qe(St),$e(St,n)):Qe(zt),$e(zt,a)}var ri=null,Al=!1,Xa=!1;function Oc(n){ri===null?ri=[n]:ri.push(n)}function im(n){Al=!0,Oc(n)}function Oi(){if(!Xa&&ri!==null){Xa=!0;var n=0,r=be;try{var a=ri;for(be=1;n<a.length;n++){var p=a[n];do p=p(!0);while(p!==null)}ri=null,Al=!1}catch(v){throw ri!==null&&(ri=ri.slice(n+1)),il($r,Oi),v}finally{be=r,Xa=!1}}return null}var mr=[],gr=0,Ml=null,Rl=0,un=[],cn=0,Co=null,si=1,li="";function So(n,r){mr[gr++]=Rl,mr[gr++]=Ml,Ml=n,Rl=r}function Wc(n,r,a){un[cn++]=si,un[cn++]=li,un[cn++]=Co,Co=n;var p=si;n=li;var v=32-Re(p)-1;p&=~(1<<v),a+=1;var x=32-Re(r)+v;if(30<x){var I=v-v%5;x=(p&(1<<I)-1).toString(32),p>>=I,v-=I,si=1<<32-Re(r)+v|a<<v|p,li=x+n}else si=1<<x|a<<v|p,li=n}function ja(n){n.return!==null&&(So(n,1),Wc(n,1,0))}function eu(n){for(;n===Ml;)Ml=mr[--gr],mr[gr]=null,Rl=mr[--gr],mr[gr]=null;for(;n===Co;)Co=un[--cn],un[cn]=null,li=un[--cn],un[cn]=null,si=un[--cn],un[cn]=null}var Xt=null,jt=null,et=!1,Tn=null;function Zc(n,r){var a=pn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Jc(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Xt=n,jt=Bn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Xt=n,jt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Co!==null?{id:si,overflow:li}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=pn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Xt=n,jt=null,!0):!1;default:return!1}}function tu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nu(n){if(et){var r=jt;if(r){var a=r;if(!Jc(n,r)){if(tu(n))throw Error(o(418));r=Bn(a.nextSibling);var p=Xt;r&&Jc(n,r)?Zc(p,a):(n.flags=n.flags&-4097|2,et=!1,Xt=n)}}else{if(tu(n))throw Error(o(418));n.flags=n.flags&-4097|2,et=!1,Xt=n}}}function Kc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Xt=n}function Ll(n){if(n!==Xt)return!1;if(!et)return Kc(n),et=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!De(n.type,n.memoizedProps)),r&&(r=jt)){if(tu(n))throw $c(),Error(o(418));for(;r;)Zc(n,r),r=Bn(r.nextSibling)}if(Kc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){jt=Bn(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}jt=null}}else jt=Xt?Bn(n.stateNode.nextSibling):null;return!0}function $c(){for(var n=jt;n;)n=Bn(n.nextSibling)}function _r(){jt=Xt=null,et=!1}function iu(n){Tn===null?Tn=[n]:Tn.push(n)}var om=se.ReactCurrentBatchConfig;function xs(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(o(309));var p=a.stateNode}if(!p)throw Error(o(147,n));var v=p,x=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===x?r.ref:(r=function(I){var k=v.refs;I===null?delete k[x]:k[x]=I},r._stringRef=x,r)}if(typeof n!="string")throw Error(o(284));if(!a._owner)throw Error(o(290,n))}return n}function Dl(n,r){throw n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Yc(n){var r=n._init;return r(n._payload)}function Qc(n){function r(z,F){if(n){var V=z.deletions;V===null?(z.deletions=[F],z.flags|=16):V.push(F)}}function a(z,F){if(!n)return null;for(;F!==null;)r(z,F),F=F.sibling;return null}function p(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function v(z,F){return z=Xi(z,F),z.index=0,z.sibling=null,z}function x(z,F,V){return z.index=V,n?(V=z.alternate,V!==null?(V=V.index,V<F?(z.flags|=2,F):V):(z.flags|=2,F)):(z.flags|=1048576,F)}function I(z){return n&&z.alternate===null&&(z.flags|=2),z}function k(z,F,V,ie){return F===null||F.tag!==6?(F=Ku(V,z.mode,ie),F.return=z,F):(F=v(F,V),F.return=z,F)}function R(z,F,V,ie){var xe=V.type;return xe===pe?ee(z,F,V.props.children,ie,V.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ae&&Yc(xe)===F.type)?(ie=v(F,V.props),ie.ref=xs(z,F,V),ie.return=z,ie):(ie=oa(V.type,V.key,V.props,null,z.mode,ie),ie.ref=xs(z,F,V),ie.return=z,ie)}function q(z,F,V,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=$u(V,z.mode,ie),F.return=z,F):(F=v(F,V.children||[]),F.return=z,F)}function ee(z,F,V,ie,xe){return F===null||F.tag!==7?(F=Ro(V,z.mode,ie,xe),F.return=z,F):(F=v(F,V),F.return=z,F)}function ne(z,F,V){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Ku(""+F,z.mode,V),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case he:return V=oa(F.type,F.key,F.props,null,z.mode,V),V.ref=xs(z,null,F),V.return=z,V;case me:return F=$u(F,z.mode,V),F.return=z,F;case Ae:var ie=F._init;return ne(z,ie(F._payload),V)}if(vi(F)||K(F))return F=Ro(F,z.mode,V,null),F.return=z,F;Dl(z,F)}return null}function j(z,F,V,ie){var xe=F!==null?F.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return xe!==null?null:k(z,F,""+V,ie);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case he:return V.key===xe?R(z,F,V,ie):null;case me:return V.key===xe?q(z,F,V,ie):null;case Ae:return xe=V._init,j(z,F,xe(V._payload),ie)}if(vi(V)||K(V))return xe!==null?null:ee(z,F,V,ie,null);Dl(z,V)}return null}function de(z,F,V,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return z=z.get(V)||null,k(F,z,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case he:return z=z.get(ie.key===null?V:ie.key)||null,R(F,z,ie,xe);case me:return z=z.get(ie.key===null?V:ie.key)||null,q(F,z,ie,xe);case Ae:var Ee=ie._init;return de(z,F,V,Ee(ie._payload),xe)}if(vi(ie)||K(ie))return z=z.get(V)||null,ee(F,z,ie,xe,null);Dl(F,ie)}return null}function ge(z,F,V,ie){for(var xe=null,Ee=null,Pe=F,ke=F=0,gt=null;Pe!==null&&ke<V.length;ke++){Pe.index>ke?(gt=Pe,Pe=null):gt=Pe.sibling;var Ge=j(z,Pe,V[ke],ie);if(Ge===null){Pe===null&&(Pe=gt);break}n&&Pe&&Ge.alternate===null&&r(z,Pe),F=x(Ge,F,ke),Ee===null?xe=Ge:Ee.sibling=Ge,Ee=Ge,Pe=gt}if(ke===V.length)return a(z,Pe),et&&So(z,ke),xe;if(Pe===null){for(;ke<V.length;ke++)Pe=ne(z,V[ke],ie),Pe!==null&&(F=x(Pe,F,ke),Ee===null?xe=Pe:Ee.sibling=Pe,Ee=Pe);return et&&So(z,ke),xe}for(Pe=p(z,Pe);ke<V.length;ke++)gt=de(Pe,z,ke,V[ke],ie),gt!==null&&(n&&gt.alternate!==null&&Pe.delete(gt.key===null?ke:gt.key),F=x(gt,F,ke),Ee===null?xe=gt:Ee.sibling=gt,Ee=gt);return n&&Pe.forEach(function(ji){return r(z,ji)}),et&&So(z,ke),xe}function ve(z,F,V,ie){var xe=K(V);if(typeof xe!="function")throw Error(o(150));if(V=xe.call(V),V==null)throw Error(o(151));for(var Ee=xe=null,Pe=F,ke=F=0,gt=null,Ge=V.next();Pe!==null&&!Ge.done;ke++,Ge=V.next()){Pe.index>ke?(gt=Pe,Pe=null):gt=Pe.sibling;var ji=j(z,Pe,Ge.value,ie);if(ji===null){Pe===null&&(Pe=gt);break}n&&Pe&&ji.alternate===null&&r(z,Pe),F=x(ji,F,ke),Ee===null?xe=ji:Ee.sibling=ji,Ee=ji,Pe=gt}if(Ge.done)return a(z,Pe),et&&So(z,ke),xe;if(Pe===null){for(;!Ge.done;ke++,Ge=V.next())Ge=ne(z,Ge.value,ie),Ge!==null&&(F=x(Ge,F,ke),Ee===null?xe=Ge:Ee.sibling=Ge,Ee=Ge);return et&&So(z,ke),xe}for(Pe=p(z,Pe);!Ge.done;ke++,Ge=V.next())Ge=de(Pe,z,ke,Ge.value,ie),Ge!==null&&(n&&Ge.alternate!==null&&Pe.delete(Ge.key===null?ke:Ge.key),F=x(Ge,F,ke),Ee===null?xe=Ge:Ee.sibling=Ge,Ee=Ge);return n&&Pe.forEach(function(zm){return r(z,zm)}),et&&So(z,ke),xe}function lt(z,F,V,ie){if(typeof V=="object"&&V!==null&&V.type===pe&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case he:e:{for(var xe=V.key,Ee=F;Ee!==null;){if(Ee.key===xe){if(xe=V.type,xe===pe){if(Ee.tag===7){a(z,Ee.sibling),F=v(Ee,V.props.children),F.return=z,z=F;break e}}else if(Ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ae&&Yc(xe)===Ee.type){a(z,Ee.sibling),F=v(Ee,V.props),F.ref=xs(z,Ee,V),F.return=z,z=F;break e}a(z,Ee);break}else r(z,Ee);Ee=Ee.sibling}V.type===pe?(F=Ro(V.props.children,z.mode,ie,V.key),F.return=z,z=F):(ie=oa(V.type,V.key,V.props,null,z.mode,ie),ie.ref=xs(z,F,V),ie.return=z,z=ie)}return I(z);case me:e:{for(Ee=V.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){a(z,F.sibling),F=v(F,V.children||[]),F.return=z,z=F;break e}else{a(z,F);break}else r(z,F);F=F.sibling}F=$u(V,z.mode,ie),F.return=z,z=F}return I(z);case Ae:return Ee=V._init,lt(z,F,Ee(V._payload),ie)}if(vi(V))return ge(z,F,V,ie);if(K(V))return ve(z,F,V,ie);Dl(z,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,F!==null&&F.tag===6?(a(z,F.sibling),F=v(F,V),F.return=z,z=F):(a(z,F),F=Ku(V,z.mode,ie),F.return=z,z=F),I(z)):a(z,F)}return lt}var vr=Qc(!0),Xc=Qc(!1),Fl=Gi(null),Ul=null,yr=null,ou=null;function ru(){ou=yr=Ul=null}function su(n){var r=Fl.current;Qe(Fl),n._currentValue=r}function lu(n,r,a){for(;n!==null;){var p=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),n===a)break;n=n.return}}function wr(n,r){Ul=n,ou=yr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Vt=!0),n.firstContext=null)}function dn(n){var r=n._currentValue;if(ou!==n)if(n={context:n,memoizedValue:r,next:null},yr===null){if(Ul===null)throw Error(o(308));yr=n,Ul.dependencies={lanes:0,firstContext:n}}else yr=yr.next=n;return r}var Eo=null;function au(n){Eo===null?Eo=[n]:Eo.push(n)}function jc(n,r,a,p){var v=r.interleaved;return v===null?(a.next=a,au(r)):(a.next=v.next,v.next=a),r.interleaved=a,ai(n,p)}function ai(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Wi=!1;function uu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ed(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ui(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Zi(n,r,a){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(He&2)!==0){var v=p.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),p.pending=r,ai(n,a)}return v=p.interleaved,v===null?(r.next=r,au(p)):(r.next=v.next,v.next=r),p.interleaved=r,ai(n,a)}function zl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var p=r.lanes;p&=n.pendingLanes,a|=p,r.lanes=a,_n(n,a)}}function td(n,r){var a=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,a===p)){var v=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var I={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};x===null?v=x=I:x=x.next=I,a=a.next}while(a!==null);x===null?v=x=r:x=x.next=r}else v=x=r;a={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:p.shared,effects:p.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Bl(n,r,a,p){var v=n.updateQueue;Wi=!1;var x=v.firstBaseUpdate,I=v.lastBaseUpdate,k=v.shared.pending;if(k!==null){v.shared.pending=null;var R=k,q=R.next;R.next=null,I===null?x=q:I.next=q,I=R;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,k=ee.lastBaseUpdate,k!==I&&(k===null?ee.firstBaseUpdate=q:k.next=q,ee.lastBaseUpdate=R))}if(x!==null){var ne=v.baseState;I=0,ee=q=R=null,k=x;do{var j=k.lane,de=k.eventTime;if((p&j)===j){ee!==null&&(ee=ee.next={eventTime:de,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ge=n,ve=k;switch(j=r,de=a,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){ne=ge.call(de,ne,j);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,j=typeof ge=="function"?ge.call(de,ne,j):ge,j==null)break e;ne=H({},ne,j);break e;case 2:Wi=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,j=v.effects,j===null?v.effects=[k]:j.push(k))}else de={eventTime:de,lane:j,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ee===null?(q=ee=de,R=ne):ee=ee.next=de,I|=j;if(k=k.next,k===null){if(k=v.shared.pending,k===null)break;j=k,k=j.next,j.next=null,v.lastBaseUpdate=j,v.shared.pending=null}}while(!0);if(ee===null&&(R=ne),v.baseState=R,v.firstBaseUpdate=q,v.lastBaseUpdate=ee,r=v.shared.interleaved,r!==null){v=r;do I|=v.lane,v=v.next;while(v!==r)}else x===null&&(v.shared.lanes=0);No|=I,n.lanes=I,n.memoizedState=ne}}function nd(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var p=n[r],v=p.callback;if(v!==null){if(p.callback=null,p=a,typeof v!="function")throw Error(o(191,v));v.call(p)}}}var Ts={},Vn=Gi(Ts),Cs=Gi(Ts),Ss=Gi(Ts);function Po(n){if(n===Ts)throw Error(o(174));return n}function cu(n,r){switch($e(Ss,r),$e(Cs,n),$e(Vn,Ts),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:zo(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=zo(r,n)}Qe(Vn),$e(Vn,r)}function xr(){Qe(Vn),Qe(Cs),Qe(Ss)}function id(n){Po(Ss.current);var r=Po(Vn.current),a=zo(r,n.type);r!==a&&($e(Cs,n),$e(Vn,a))}function du(n){Cs.current===n&&(Qe(Vn),Qe(Cs))}var it=Gi(0);function Vl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var fu=[];function hu(){for(var n=0;n<fu.length;n++)fu[n]._workInProgressVersionPrimary=null;fu.length=0}var bl=se.ReactCurrentDispatcher,pu=se.ReactCurrentBatchConfig,Io=0,ot=null,ft=null,pt=null,Hl=!1,Es=!1,Ps=0,rm=0;function Et(){throw Error(o(321))}function mu(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Yt(n[a],r[a]))return!1;return!0}function gu(n,r,a,p,v,x){if(Io=x,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,bl.current=n===null||n.memoizedState===null?um:cm,n=a(p,v),Es){x=0;do{if(Es=!1,Ps=0,25<=x)throw Error(o(301));x+=1,pt=ft=null,r.updateQueue=null,bl.current=dm,n=a(p,v)}while(Es)}if(bl.current=Ol,r=ft!==null&&ft.next!==null,Io=0,pt=ft=ot=null,Hl=!1,r)throw Error(o(300));return n}function _u(){var n=Ps!==0;return Ps=0,n}function bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?ot.memoizedState=pt=n:pt=pt.next=n,pt}function fn(){if(ft===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var r=pt===null?ot.memoizedState:pt.next;if(r!==null)pt=r,ft=n;else{if(n===null)throw Error(o(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},pt===null?ot.memoizedState=pt=n:pt=pt.next=n}return pt}function Is(n,r){return typeof r=="function"?r(n):r}function vu(n){var r=fn(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var p=ft,v=p.baseQueue,x=a.pending;if(x!==null){if(v!==null){var I=v.next;v.next=x.next,x.next=I}p.baseQueue=v=x,a.pending=null}if(v!==null){x=v.next,p=p.baseState;var k=I=null,R=null,q=x;do{var ee=q.lane;if((Io&ee)===ee)R!==null&&(R=R.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),p=q.hasEagerState?q.eagerState:n(p,q.action);else{var ne={lane:ee,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};R===null?(k=R=ne,I=p):R=R.next=ne,ot.lanes|=ee,No|=ee}q=q.next}while(q!==null&&q!==x);R===null?I=p:R.next=k,Yt(p,r.memoizedState)||(Vt=!0),r.memoizedState=p,r.baseState=I,r.baseQueue=R,a.lastRenderedState=p}if(n=a.interleaved,n!==null){v=n;do x=v.lane,ot.lanes|=x,No|=x,v=v.next;while(v!==n)}else v===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function yu(n){var r=fn(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var p=a.dispatch,v=a.pending,x=r.memoizedState;if(v!==null){a.pending=null;var I=v=v.next;do x=n(x,I.action),I=I.next;while(I!==v);Yt(x,r.memoizedState)||(Vt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),a.lastRenderedState=x}return[x,p]}function od(){}function rd(n,r){var a=ot,p=fn(),v=r(),x=!Yt(p.memoizedState,v);if(x&&(p.memoizedState=v,Vt=!0),p=p.queue,wu(ad.bind(null,a,p,n),[n]),p.getSnapshot!==r||x||pt!==null&&pt.memoizedState.tag&1){if(a.flags|=2048,Ns(9,ld.bind(null,a,p,v,r),void 0,null),mt===null)throw Error(o(349));(Io&30)!==0||sd(a,r,v)}return v}function sd(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ld(n,r,a,p){r.value=a,r.getSnapshot=p,ud(r)&&cd(n)}function ad(n,r,a){return a(function(){ud(r)&&cd(n)})}function ud(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Yt(n,a)}catch{return!0}}function cd(n){var r=ai(n,1);r!==null&&Pn(r,n,1,-1)}function dd(n){var r=bn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:n},r.queue=n,n=n.dispatch=am.bind(null,ot,n),[r.memoizedState,n]}function Ns(n,r,a,p){return n={tag:n,create:r,destroy:a,deps:p,next:null},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(p=a.next,a.next=n,n.next=p,r.lastEffect=n)),n}function fd(){return fn().memoizedState}function Gl(n,r,a,p){var v=bn();ot.flags|=n,v.memoizedState=Ns(1|r,a,void 0,p===void 0?null:p)}function ql(n,r,a,p){var v=fn();p=p===void 0?null:p;var x=void 0;if(ft!==null){var I=ft.memoizedState;if(x=I.destroy,p!==null&&mu(p,I.deps)){v.memoizedState=Ns(r,a,x,p);return}}ot.flags|=n,v.memoizedState=Ns(1|r,a,x,p)}function hd(n,r){return Gl(8390656,8,n,r)}function wu(n,r){return ql(2048,8,n,r)}function pd(n,r){return ql(4,2,n,r)}function md(n,r){return ql(4,4,n,r)}function gd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function _d(n,r,a){return a=a!=null?a.concat([n]):null,ql(4,4,gd.bind(null,r,n),a)}function xu(){}function vd(n,r){var a=fn();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&mu(r,p[1])?p[0]:(a.memoizedState=[n,r],n)}function yd(n,r){var a=fn();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&mu(r,p[1])?p[0]:(n=n(),a.memoizedState=[n,r],n)}function wd(n,r,a){return(Io&21)===0?(n.baseState&&(n.baseState=!1,Vt=!0),n.memoizedState=a):(Yt(a,r)||(a=rl(),ot.lanes|=a,No|=a,n.baseState=!0),r)}function sm(n,r){var a=be;be=a!==0&&4>a?a:4,n(!0);var p=pu.transition;pu.transition={};try{n(!1),r()}finally{be=a,pu.transition=p}}function xd(){return fn().memoizedState}function lm(n,r,a){var p=Yi(n);if(a={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null},Td(n))Cd(r,a);else if(a=jc(n,r,a,p),a!==null){var v=Lt();Pn(a,n,p,v),Sd(a,r,p)}}function am(n,r,a){var p=Yi(n),v={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null};if(Td(n))Cd(r,v);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var I=r.lastRenderedState,k=x(I,a);if(v.hasEagerState=!0,v.eagerState=k,Yt(k,I)){var R=r.interleaved;R===null?(v.next=v,au(r)):(v.next=R.next,R.next=v),r.interleaved=v;return}}catch{}finally{}a=jc(n,r,v,p),a!==null&&(v=Lt(),Pn(a,n,p,v),Sd(a,r,p))}}function Td(n){var r=n.alternate;return n===ot||r!==null&&r===ot}function Cd(n,r){Es=Hl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Sd(n,r,a){if((a&4194240)!==0){var p=r.lanes;p&=n.pendingLanes,a|=p,r.lanes=a,_n(n,a)}}var Ol={readContext:dn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},um={readContext:dn,useCallback:function(n,r){return bn().memoizedState=[n,r===void 0?null:r],n},useContext:dn,useEffect:hd,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Gl(4194308,4,gd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Gl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Gl(4,2,n,r)},useMemo:function(n,r){var a=bn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var p=bn();return r=a!==void 0?a(r):r,p.memoizedState=p.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},p.queue=n,n=n.dispatch=lm.bind(null,ot,n),[p.memoizedState,n]},useRef:function(n){var r=bn();return n={current:n},r.memoizedState=n},useState:dd,useDebugValue:xu,useDeferredValue:function(n){return bn().memoizedState=n},useTransition:function(){var n=dd(!1),r=n[0];return n=sm.bind(null,n[1]),bn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var p=ot,v=bn();if(et){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),mt===null)throw Error(o(349));(Io&30)!==0||sd(p,r,a)}v.memoizedState=a;var x={value:a,getSnapshot:r};return v.queue=x,hd(ad.bind(null,p,x,n),[n]),p.flags|=2048,Ns(9,ld.bind(null,p,x,a,r),void 0,null),a},useId:function(){var n=bn(),r=mt.identifierPrefix;if(et){var a=li,p=si;a=(p&~(1<<32-Re(p)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ps++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=rm++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},cm={readContext:dn,useCallback:vd,useContext:dn,useEffect:wu,useImperativeHandle:_d,useInsertionEffect:pd,useLayoutEffect:md,useMemo:yd,useReducer:vu,useRef:fd,useState:function(){return vu(Is)},useDebugValue:xu,useDeferredValue:function(n){var r=fn();return wd(r,ft.memoizedState,n)},useTransition:function(){var n=vu(Is)[0],r=fn().memoizedState;return[n,r]},useMutableSource:od,useSyncExternalStore:rd,useId:xd,unstable_isNewReconciler:!1},dm={readContext:dn,useCallback:vd,useContext:dn,useEffect:wu,useImperativeHandle:_d,useInsertionEffect:pd,useLayoutEffect:md,useMemo:yd,useReducer:yu,useRef:fd,useState:function(){return yu(Is)},useDebugValue:xu,useDeferredValue:function(n){var r=fn();return ft===null?r.memoizedState=n:wd(r,ft.memoizedState,n)},useTransition:function(){var n=yu(Is)[0],r=fn().memoizedState;return[n,r]},useMutableSource:od,useSyncExternalStore:rd,useId:xd,unstable_isNewReconciler:!1};function Cn(n,r){if(n&&n.defaultProps){r=H({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Tu(n,r,a,p){r=n.memoizedState,a=a(p,r),a=a==null?r:H({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wl={isMounted:function(n){return(n=n._reactInternals)?An(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var p=Lt(),v=Yi(n),x=ui(p,v);x.payload=r,a!=null&&(x.callback=a),r=Zi(n,x,v),r!==null&&(Pn(r,n,v,p),zl(r,n,v))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var p=Lt(),v=Yi(n),x=ui(p,v);x.tag=1,x.payload=r,a!=null&&(x.callback=a),r=Zi(n,x,v),r!==null&&(Pn(r,n,v,p),zl(r,n,v))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Lt(),p=Yi(n),v=ui(a,p);v.tag=2,r!=null&&(v.callback=r),r=Zi(n,v,p),r!==null&&(Pn(r,n,p,a),zl(r,n,p))}};function Ed(n,r,a,p,v,x,I){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,x,I):r.prototype&&r.prototype.isPureReactComponent?!Fn(a,p)||!Fn(v,x):!0}function Pd(n,r,a){var p=!1,v=qi,x=r.contextType;return typeof x=="object"&&x!==null?x=dn(x):(v=Bt(r)?To:St.current,p=r.contextTypes,x=(p=p!=null)?pr(n,v):qi),r=new r(a,x),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Wl,n.stateNode=r,r._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=v,n.__reactInternalMemoizedMaskedChildContext=x),r}function Id(n,r,a,p){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,p),r.state!==n&&Wl.enqueueReplaceState(r,r.state,null)}function Cu(n,r,a,p){var v=n.stateNode;v.props=a,v.state=n.memoizedState,v.refs={},uu(n);var x=r.contextType;typeof x=="object"&&x!==null?v.context=dn(x):(x=Bt(r)?To:St.current,v.context=pr(n,x)),v.state=n.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Tu(n,r,x,a),v.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(r=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),r!==v.state&&Wl.enqueueReplaceState(v,v.state,null),Bl(n,a,v,p),v.state=n.memoizedState),typeof v.componentDidMount=="function"&&(n.flags|=4194308)}function Tr(n,r){try{var a="",p=r;do a+=oe(p),p=p.return;while(p);var v=a}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:n,source:r,stack:v,digest:null}}function Su(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Eu(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var fm=typeof WeakMap=="function"?WeakMap:Map;function Nd(n,r,a){a=ui(-1,a),a.tag=3,a.payload={element:null};var p=r.value;return a.callback=function(){Xl||(Xl=!0,bu=p),Eu(n,r)},a}function kd(n,r,a){a=ui(-1,a),a.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var v=r.value;a.payload=function(){return p(v)},a.callback=function(){Eu(n,r)}}var x=n.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){Eu(n,r),typeof p!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var I=r.stack;this.componentDidCatch(r.value,{componentStack:I!==null?I:""})}),a}function Ad(n,r,a){var p=n.pingCache;if(p===null){p=n.pingCache=new fm;var v=new Set;p.set(r,v)}else v=p.get(r),v===void 0&&(v=new Set,p.set(r,v));v.has(a)||(v.add(a),n=Pm.bind(null,n,r,a),r.then(n,n))}function Md(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Rd(n,r,a,p,v){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=ui(-1,1),r.tag=2,Zi(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=v,n)}var hm=se.ReactCurrentOwner,Vt=!1;function Rt(n,r,a,p){r.child=n===null?Xc(r,null,a,p):vr(r,n.child,a,p)}function Ld(n,r,a,p,v){a=a.render;var x=r.ref;return wr(r,v),p=gu(n,r,a,p,x,v),a=_u(),n!==null&&!Vt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~v,ci(n,r,v)):(et&&a&&ja(r),r.flags|=1,Rt(n,r,p,v),r.child)}function Dd(n,r,a,p,v){if(n===null){var x=a.type;return typeof x=="function"&&!Ju(x)&&x.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=x,Fd(n,r,x,p,v)):(n=oa(a.type,null,p,r,r.mode,v),n.ref=r.ref,n.return=r,r.child=n)}if(x=n.child,(n.lanes&v)===0){var I=x.memoizedProps;if(a=a.compare,a=a!==null?a:Fn,a(I,p)&&n.ref===r.ref)return ci(n,r,v)}return r.flags|=1,n=Xi(x,p),n.ref=r.ref,n.return=r,r.child=n}function Fd(n,r,a,p,v){if(n!==null){var x=n.memoizedProps;if(Fn(x,p)&&n.ref===r.ref)if(Vt=!1,r.pendingProps=p=x,(n.lanes&v)!==0)(n.flags&131072)!==0&&(Vt=!0);else return r.lanes=n.lanes,ci(n,r,v)}return Pu(n,r,a,p,v)}function Ud(n,r,a){var p=r.pendingProps,v=p.children,x=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Sr,en),en|=a;else{if((a&1073741824)===0)return n=x!==null?x.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,$e(Sr,en),en|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:a,$e(Sr,en),en|=p}else x!==null?(p=x.baseLanes|a,r.memoizedState=null):p=a,$e(Sr,en),en|=p;return Rt(n,r,v,a),r.child}function zd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Pu(n,r,a,p,v){var x=Bt(a)?To:St.current;return x=pr(r,x),wr(r,v),a=gu(n,r,a,p,x,v),p=_u(),n!==null&&!Vt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~v,ci(n,r,v)):(et&&p&&ja(r),r.flags|=1,Rt(n,r,a,v),r.child)}function Bd(n,r,a,p,v){if(Bt(a)){var x=!0;kl(r)}else x=!1;if(wr(r,v),r.stateNode===null)Jl(n,r),Pd(r,a,p),Cu(r,a,p,v),p=!0;else if(n===null){var I=r.stateNode,k=r.memoizedProps;I.props=k;var R=I.context,q=a.contextType;typeof q=="object"&&q!==null?q=dn(q):(q=Bt(a)?To:St.current,q=pr(r,q));var ee=a.getDerivedStateFromProps,ne=typeof ee=="function"||typeof I.getSnapshotBeforeUpdate=="function";ne||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(k!==p||R!==q)&&Id(r,I,p,q),Wi=!1;var j=r.memoizedState;I.state=j,Bl(r,p,I,v),R=r.memoizedState,k!==p||j!==R||zt.current||Wi?(typeof ee=="function"&&(Tu(r,a,ee,p),R=r.memoizedState),(k=Wi||Ed(r,a,k,p,j,R,q))?(ne||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(r.flags|=4194308)):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=R),I.props=p,I.state=R,I.context=q,p=k):(typeof I.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{I=r.stateNode,ed(n,r),k=r.memoizedProps,q=r.type===r.elementType?k:Cn(r.type,k),I.props=q,ne=r.pendingProps,j=I.context,R=a.contextType,typeof R=="object"&&R!==null?R=dn(R):(R=Bt(a)?To:St.current,R=pr(r,R));var de=a.getDerivedStateFromProps;(ee=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(k!==ne||j!==R)&&Id(r,I,p,R),Wi=!1,j=r.memoizedState,I.state=j,Bl(r,p,I,v);var ge=r.memoizedState;k!==ne||j!==ge||zt.current||Wi?(typeof de=="function"&&(Tu(r,a,de,p),ge=r.memoizedState),(q=Wi||Ed(r,a,q,p,j,ge,R)||!1)?(ee||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,ge,R),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,ge,R)),typeof I.componentDidUpdate=="function"&&(r.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof I.componentDidUpdate!="function"||k===n.memoizedProps&&j===n.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&j===n.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=ge),I.props=p,I.state=ge,I.context=R,p=q):(typeof I.componentDidUpdate!="function"||k===n.memoizedProps&&j===n.memoizedState||(r.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&j===n.memoizedState||(r.flags|=1024),p=!1)}return Iu(n,r,a,p,x,v)}function Iu(n,r,a,p,v,x){zd(n,r);var I=(r.flags&128)!==0;if(!p&&!I)return v&&qc(r,a,!1),ci(n,r,x);p=r.stateNode,hm.current=r;var k=I&&typeof a.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,n!==null&&I?(r.child=vr(r,n.child,null,x),r.child=vr(r,null,k,x)):Rt(n,r,k,x),r.memoizedState=p.state,v&&qc(r,a,!0),r.child}function Vd(n){var r=n.stateNode;r.pendingContext?Hc(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Hc(n,r.context,!1),cu(n,r.containerInfo)}function bd(n,r,a,p,v){return _r(),iu(v),r.flags|=256,Rt(n,r,a,p),r.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function ku(n){return{baseLanes:n,cachePool:null,transitions:null}}function Hd(n,r,a){var p=r.pendingProps,v=it.current,x=!1,I=(r.flags&128)!==0,k;if((k=I)||(k=n!==null&&n.memoizedState===null?!1:(v&2)!==0),k?(x=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(v|=1),$e(it,v&1),n===null)return nu(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(I=p.children,n=p.fallback,x?(p=r.mode,x=r.child,I={mode:"hidden",children:I},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=I):x=ra(I,p,0,null),n=Ro(n,p,a,null),x.return=r,n.return=r,x.sibling=n,r.child=x,r.child.memoizedState=ku(a),r.memoizedState=Nu,n):Au(r,I));if(v=n.memoizedState,v!==null&&(k=v.dehydrated,k!==null))return pm(n,r,I,p,k,v,a);if(x){x=p.fallback,I=r.mode,v=n.child,k=v.sibling;var R={mode:"hidden",children:p.children};return(I&1)===0&&r.child!==v?(p=r.child,p.childLanes=0,p.pendingProps=R,r.deletions=null):(p=Xi(v,R),p.subtreeFlags=v.subtreeFlags&14680064),k!==null?x=Xi(k,x):(x=Ro(x,I,a,null),x.flags|=2),x.return=r,p.return=r,p.sibling=x,r.child=p,p=x,x=r.child,I=n.child.memoizedState,I=I===null?ku(a):{baseLanes:I.baseLanes|a,cachePool:null,transitions:I.transitions},x.memoizedState=I,x.childLanes=n.childLanes&~a,r.memoizedState=Nu,p}return x=n.child,n=x.sibling,p=Xi(x,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=a),p.return=r,p.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=p,r.memoizedState=null,p}function Au(n,r){return r=ra({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Zl(n,r,a,p){return p!==null&&iu(p),vr(r,n.child,null,a),n=Au(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function pm(n,r,a,p,v,x,I){if(a)return r.flags&256?(r.flags&=-257,p=Su(Error(o(422))),Zl(n,r,I,p)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(x=p.fallback,v=r.mode,p=ra({mode:"visible",children:p.children},v,0,null),x=Ro(x,v,I,null),x.flags|=2,p.return=r,x.return=r,p.sibling=x,r.child=p,(r.mode&1)!==0&&vr(r,n.child,null,I),r.child.memoizedState=ku(I),r.memoizedState=Nu,x);if((r.mode&1)===0)return Zl(n,r,I,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var k=p.dgst;return p=k,x=Error(o(419)),p=Su(x,p,void 0),Zl(n,r,I,p)}if(k=(I&n.childLanes)!==0,Vt||k){if(p=mt,p!==null){switch(I&-I){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|I))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,ai(n,v),Pn(p,n,v,-1))}return Zu(),p=Su(Error(o(421))),Zl(n,r,I,p)}return v.data==="$?"?(r.flags|=128,r.child=n.child,r=Im.bind(null,n),v._reactRetry=r,null):(n=x.treeContext,jt=Bn(v.nextSibling),Xt=r,et=!0,Tn=null,n!==null&&(un[cn++]=si,un[cn++]=li,un[cn++]=Co,si=n.id,li=n.overflow,Co=r),r=Au(r,p.children),r.flags|=4096,r)}function Gd(n,r,a){n.lanes|=r;var p=n.alternate;p!==null&&(p.lanes|=r),lu(n.return,r,a)}function Mu(n,r,a,p,v){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:a,tailMode:v}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=a,x.tailMode=v)}function qd(n,r,a){var p=r.pendingProps,v=p.revealOrder,x=p.tail;if(Rt(n,r,p.children,a),p=it.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gd(n,a,r);else if(n.tag===19)Gd(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if($e(it,p),(r.mode&1)===0)r.memoizedState=null;else switch(v){case"forwards":for(a=r.child,v=null;a!==null;)n=a.alternate,n!==null&&Vl(n)===null&&(v=a),a=a.sibling;a=v,a===null?(v=r.child,r.child=null):(v=a.sibling,a.sibling=null),Mu(r,!1,v,a,x);break;case"backwards":for(a=null,v=r.child,r.child=null;v!==null;){if(n=v.alternate,n!==null&&Vl(n)===null){r.child=v;break}n=v.sibling,v.sibling=a,a=v,v=n}Mu(r,!0,a,null,x);break;case"together":Mu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Jl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function ci(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),No|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,a=Xi(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Xi(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function mm(n,r,a){switch(r.tag){case 3:Vd(r),_r();break;case 5:id(r);break;case 1:Bt(r.type)&&kl(r);break;case 4:cu(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,v=r.memoizedProps.value;$e(Fl,p._currentValue),p._currentValue=v;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?($e(it,it.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Hd(n,r,a):($e(it,it.current&1),n=ci(n,r,a),n!==null?n.sibling:null);$e(it,it.current&1);break;case 19:if(p=(a&r.childLanes)!==0,(n.flags&128)!==0){if(p)return qd(n,r,a);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$e(it,it.current),p)break;return null;case 22:case 23:return r.lanes=0,Ud(n,r,a)}return ci(n,r,a)}var Od,Ru,Wd,Zd;Od=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ru=function(){},Wd=function(n,r,a,p){var v=n.memoizedProps;if(v!==p){n=r.stateNode,Po(Vn.current);var x=null;switch(a){case"input":v=Fr(n,v),p=Fr(n,p),x=[];break;case"select":v=H({},v,{value:void 0}),p=H({},p,{value:void 0}),x=[];break;case"textarea":v=Fo(n,v),p=Fo(n,p),x=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=$)}Hr(a,p);var I;a=null;for(q in v)if(!p.hasOwnProperty(q)&&v.hasOwnProperty(q)&&v[q]!=null)if(q==="style"){var k=v[q];for(I in k)k.hasOwnProperty(I)&&(a||(a={}),a[I]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(u.hasOwnProperty(q)?x||(x=[]):(x=x||[]).push(q,null));for(q in p){var R=p[q];if(k=v!=null?v[q]:void 0,p.hasOwnProperty(q)&&R!==k&&(R!=null||k!=null))if(q==="style")if(k){for(I in k)!k.hasOwnProperty(I)||R&&R.hasOwnProperty(I)||(a||(a={}),a[I]="");for(I in R)R.hasOwnProperty(I)&&k[I]!==R[I]&&(a||(a={}),a[I]=R[I])}else a||(x||(x=[]),x.push(q,a)),a=R;else q==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,k=k?k.__html:void 0,R!=null&&k!==R&&(x=x||[]).push(q,R)):q==="children"?typeof R!="string"&&typeof R!="number"||(x=x||[]).push(q,""+R):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(u.hasOwnProperty(q)?(R!=null&&q==="onScroll"&&Je("scroll",n),x||k===R||(x=[])):(x=x||[]).push(q,R))}a&&(x=x||[]).push("style",a);var q=x;(r.updateQueue=q)&&(r.flags|=4)}},Zd=function(n,r,a,p){a!==p&&(r.flags|=4)};function ks(n,r){if(!et)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Pt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,p=0;if(r)for(var v=n.child;v!==null;)a|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)a|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=p,n.childLanes=a,r}function gm(n,r,a){var p=r.pendingProps;switch(eu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(r),null;case 1:return Bt(r.type)&&Nl(),Pt(r),null;case 3:return p=r.stateNode,xr(),Qe(zt),Qe(St),hu(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Ll(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Tn!==null&&(qu(Tn),Tn=null))),Ru(n,r),Pt(r),null;case 5:du(r);var v=Po(Ss.current);if(a=r.type,n!==null&&r.stateNode!=null)Wd(n,r,a,p,v),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(o(166));return Pt(r),null}if(n=Po(Vn.current),Ll(r)){p=r.stateNode,a=r.type;var x=r.memoizedProps;switch(p[an]=r,p[bi]=x,n=(r.mode&1)!==0,a){case"dialog":Je("cancel",p),Je("close",p);break;case"iframe":case"object":case"embed":Je("load",p);break;case"video":case"audio":for(v=0;v<zi.length;v++)Je(zi[v],p);break;case"source":Je("error",p);break;case"img":case"image":case"link":Je("error",p),Je("load",p);break;case"details":Je("toggle",p);break;case"input":Ur(p,x),Je("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},Je("invalid",p);break;case"textarea":Vr(p,x),Je("invalid",p)}Hr(a,x),v=null;for(var I in x)if(x.hasOwnProperty(I)){var k=x[I];I==="children"?typeof k=="string"?p.textContent!==k&&(x.suppressHydrationWarning!==!0&&G(p.textContent,k,n),v=["children",k]):typeof k=="number"&&p.textContent!==""+k&&(x.suppressHydrationWarning!==!0&&G(p.textContent,k,n),v=["children",""+k]):u.hasOwnProperty(I)&&k!=null&&I==="onScroll"&&Je("scroll",p)}switch(a){case"input":mi(p),no(p,x,!0);break;case"textarea":mi(p),Ws(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=$)}p=v,r.updateQueue=p,p!==null&&(r.flags|=4)}else{I=v.nodeType===9?v:v.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Uo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=I.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=I.createElement(a,{is:p.is}):(n=I.createElement(a),a==="select"&&(I=n,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):n=I.createElementNS(n,a),n[an]=r,n[bi]=p,Od(n,r,!1,!1),r.stateNode=n;e:{switch(I=qn(a,p),a){case"dialog":Je("cancel",n),Je("close",n),v=p;break;case"iframe":case"object":case"embed":Je("load",n),v=p;break;case"video":case"audio":for(v=0;v<zi.length;v++)Je(zi[v],n);v=p;break;case"source":Je("error",n),v=p;break;case"img":case"image":case"link":Je("error",n),Je("load",n),v=p;break;case"details":Je("toggle",n),v=p;break;case"input":Ur(n,p),v=Fr(n,p),Je("invalid",n);break;case"option":v=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},v=H({},p,{value:void 0}),Je("invalid",n);break;case"textarea":Vr(n,p),v=Fo(n,p),Je("invalid",n);break;default:v=p}Hr(a,v),k=v;for(x in k)if(k.hasOwnProperty(x)){var R=k[x];x==="style"?Bo(n,R):x==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Zs(n,R)):x==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&yi(n,R):typeof R=="number"&&yi(n,""+R):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(u.hasOwnProperty(x)?R!=null&&x==="onScroll"&&Je("scroll",n):R!=null&&Y(n,x,R,I))}switch(a){case"input":mi(n),no(n,p,!1);break;case"textarea":mi(n),Ws(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Fe(p.value));break;case"select":n.multiple=!!p.multiple,x=p.value,x!=null?kn(n,!!p.multiple,x,!1):p.defaultValue!=null&&kn(n,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(n.onclick=$)}switch(a){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Pt(r),null;case 6:if(n&&r.stateNode!=null)Zd(n,r,n.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(o(166));if(a=Po(Ss.current),Po(Vn.current),Ll(r)){if(p=r.stateNode,a=r.memoizedProps,p[an]=r,(x=p.nodeValue!==a)&&(n=Xt,n!==null))switch(n.tag){case 3:G(p.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&G(p.nodeValue,a,(n.mode&1)!==0)}x&&(r.flags|=4)}else p=(a.nodeType===9?a:a.ownerDocument).createTextNode(p),p[an]=r,r.stateNode=p}return Pt(r),null;case 13:if(Qe(it),p=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&jt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)$c(),_r(),r.flags|=98560,x=!1;else if(x=Ll(r),p!==null&&p.dehydrated!==null){if(n===null){if(!x)throw Error(o(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));x[an]=r}else _r(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pt(r),x=!1}else Tn!==null&&(qu(Tn),Tn=null),x=!0;if(!x)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(it.current&1)!==0?ht===0&&(ht=3):Zu())),r.updateQueue!==null&&(r.flags|=4),Pt(r),null);case 4:return xr(),Ru(n,r),n===null&&Bi(r.stateNode.containerInfo),Pt(r),null;case 10:return su(r.type._context),Pt(r),null;case 17:return Bt(r.type)&&Nl(),Pt(r),null;case 19:if(Qe(it),x=r.memoizedState,x===null)return Pt(r),null;if(p=(r.flags&128)!==0,I=x.rendering,I===null)if(p)ks(x,!1);else{if(ht!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(I=Vl(n),I!==null){for(r.flags|=128,ks(x,!1),p=I.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=a,a=r.child;a!==null;)x=a,n=p,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=n,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,n=I.dependencies,x.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return $e(it,it.current&1|2),r.child}n=n.sibling}x.tail!==null&&tt()>Er&&(r.flags|=128,p=!0,ks(x,!1),r.lanes=4194304)}else{if(!p)if(n=Vl(I),n!==null){if(r.flags|=128,p=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ks(x,!0),x.tail===null&&x.tailMode==="hidden"&&!I.alternate&&!et)return Pt(r),null}else 2*tt()-x.renderingStartTime>Er&&a!==1073741824&&(r.flags|=128,p=!0,ks(x,!1),r.lanes=4194304);x.isBackwards?(I.sibling=r.child,r.child=I):(a=x.last,a!==null?a.sibling=I:r.child=I,x.last=I)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=tt(),r.sibling=null,a=it.current,$e(it,p?a&1|2:a&1),r):(Pt(r),null);case 22:case 23:return Wu(),p=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(en&1073741824)!==0&&(Pt(r),r.subtreeFlags&6&&(r.flags|=8192)):Pt(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function _m(n,r){switch(eu(r),r.tag){case 1:return Bt(r.type)&&Nl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return xr(),Qe(zt),Qe(St),hu(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return du(r),null;case 13:if(Qe(it),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));_r()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Qe(it),null;case 4:return xr(),null;case 10:return su(r.type._context),null;case 22:case 23:return Wu(),null;case 24:return null;default:return null}}var Kl=!1,It=!1,vm=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Cr(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){st(n,r,p)}else a.current=null}function Lu(n,r,a){try{a()}catch(p){st(n,r,p)}}var Jd=!1;function ym(n,r){if(ae=po,n=fs(),hs(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var p=a.getSelection&&a.getSelection();if(p&&p.rangeCount!==0){a=p.anchorNode;var v=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var I=0,k=-1,R=-1,q=0,ee=0,ne=n,j=null;t:for(;;){for(var de;ne!==a||v!==0&&ne.nodeType!==3||(k=I+v),ne!==x||p!==0&&ne.nodeType!==3||(R=I+p),ne.nodeType===3&&(I+=ne.nodeValue.length),(de=ne.firstChild)!==null;)j=ne,ne=de;for(;;){if(ne===n)break t;if(j===a&&++q===v&&(k=I),j===x&&++ee===p&&(R=I),(de=ne.nextSibling)!==null)break;ne=j,j=ne.parentNode}ne=de}a=k===-1||R===-1?null:{start:k,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ce={focusedElem:n,selectionRange:a},po=!1,fe=r;fe!==null;)if(r=fe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,fe=n;else for(;fe!==null;){r=fe;try{var ge=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,lt=ge.memoizedState,z=r.stateNode,F=z.getSnapshotBeforeUpdate(r.elementType===r.type?ve:Cn(r.type,ve),lt);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var V=r.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ie){st(r,r.return,ie)}if(n=r.sibling,n!==null){n.return=r.return,fe=n;break}fe=r.return}return ge=Jd,Jd=!1,ge}function As(n,r,a){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&n)===n){var x=v.destroy;v.destroy=void 0,x!==void 0&&Lu(r,a,x)}v=v.next}while(v!==p)}}function $l(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var p=a.create;a.destroy=p()}a=a.next}while(a!==r)}}function Du(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Kd(n){var r=n.alternate;r!==null&&(n.alternate=null,Kd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[an],delete r[bi],delete r[Hi],delete r[$a],delete r[Ya])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $d(n){return n.tag===5||n.tag===3||n.tag===4}function Yd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$d(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fu(n,r,a){var p=n.tag;if(p===5||p===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$));else if(p!==4&&(n=n.child,n!==null))for(Fu(n,r,a),n=n.sibling;n!==null;)Fu(n,r,a),n=n.sibling}function Uu(n,r,a){var p=n.tag;if(p===5||p===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(Uu(n,r,a),n=n.sibling;n!==null;)Uu(n,r,a),n=n.sibling}var vt=null,Sn=!1;function Ji(n,r,a){for(a=a.child;a!==null;)Qd(n,r,a),a=a.sibling}function Qd(n,r,a){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(lo,a)}catch{}switch(a.tag){case 5:It||Cr(a,r);case 6:var p=vt,v=Sn;vt=null,Ji(n,r,a),vt=p,Sn=v,vt!==null&&(Sn?(n=vt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):vt.removeChild(a.stateNode));break;case 18:vt!==null&&(Sn?(n=vt,a=a.stateNode,n.nodeType===8?ws(n.parentNode,a):n.nodeType===1&&ws(n,a),Jt(n)):ws(vt,a.stateNode));break;case 4:p=vt,v=Sn,vt=a.stateNode.containerInfo,Sn=!0,Ji(n,r,a),vt=p,Sn=v;break;case 0:case 11:case 14:case 15:if(!It&&(p=a.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var x=v,I=x.destroy;x=x.tag,I!==void 0&&((x&2)!==0||(x&4)!==0)&&Lu(a,r,I),v=v.next}while(v!==p)}Ji(n,r,a);break;case 1:if(!It&&(Cr(a,r),p=a.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=a.memoizedProps,p.state=a.memoizedState,p.componentWillUnmount()}catch(k){st(a,r,k)}Ji(n,r,a);break;case 21:Ji(n,r,a);break;case 22:a.mode&1?(It=(p=It)||a.memoizedState!==null,Ji(n,r,a),It=p):Ji(n,r,a);break;default:Ji(n,r,a)}}function Xd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new vm),r.forEach(function(p){var v=Nm.bind(null,n,p);a.has(p)||(a.add(p),p.then(v,v))})}}function En(n,r){var a=r.deletions;if(a!==null)for(var p=0;p<a.length;p++){var v=a[p];try{var x=n,I=r,k=I;e:for(;k!==null;){switch(k.tag){case 5:vt=k.stateNode,Sn=!1;break e;case 3:vt=k.stateNode.containerInfo,Sn=!0;break e;case 4:vt=k.stateNode.containerInfo,Sn=!0;break e}k=k.return}if(vt===null)throw Error(o(160));Qd(x,I,v),vt=null,Sn=!1;var R=v.alternate;R!==null&&(R.return=null),v.return=null}catch(q){st(v,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)jd(r,n),r=r.sibling}function jd(n,r){var a=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(En(r,n),Hn(n),p&4){try{As(3,n,n.return),$l(3,n)}catch(ve){st(n,n.return,ve)}try{As(5,n,n.return)}catch(ve){st(n,n.return,ve)}}break;case 1:En(r,n),Hn(n),p&512&&a!==null&&Cr(a,a.return);break;case 5:if(En(r,n),Hn(n),p&512&&a!==null&&Cr(a,a.return),n.flags&32){var v=n.stateNode;try{yi(v,"")}catch(ve){st(n,n.return,ve)}}if(p&4&&(v=n.stateNode,v!=null)){var x=n.memoizedProps,I=a!==null?a.memoizedProps:x,k=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{k==="input"&&x.type==="radio"&&x.name!=null&&zr(v,x),qn(k,I);var q=qn(k,x);for(I=0;I<R.length;I+=2){var ee=R[I],ne=R[I+1];ee==="style"?Bo(v,ne):ee==="dangerouslySetInnerHTML"?Zs(v,ne):ee==="children"?yi(v,ne):Y(v,ee,ne,q)}switch(k){case"input":to(v,x);break;case"textarea":Os(v,x);break;case"select":var j=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?kn(v,!!x.multiple,de,!1):j!==!!x.multiple&&(x.defaultValue!=null?kn(v,!!x.multiple,x.defaultValue,!0):kn(v,!!x.multiple,x.multiple?[]:"",!1))}v[bi]=x}catch(ve){st(n,n.return,ve)}}break;case 6:if(En(r,n),Hn(n),p&4){if(n.stateNode===null)throw Error(o(162));v=n.stateNode,x=n.memoizedProps;try{v.nodeValue=x}catch(ve){st(n,n.return,ve)}}break;case 3:if(En(r,n),Hn(n),p&4&&a!==null&&a.memoizedState.isDehydrated)try{Jt(r.containerInfo)}catch(ve){st(n,n.return,ve)}break;case 4:En(r,n),Hn(n);break;case 13:En(r,n),Hn(n),v=n.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(Vu=tt())),p&4&&Xd(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(It=(q=It)||ee,En(r,n),It=q):En(r,n),Hn(n),p&8192){if(q=n.memoizedState!==null,(n.stateNode.isHidden=q)&&!ee&&(n.mode&1)!==0)for(fe=n,ee=n.child;ee!==null;){for(ne=fe=ee;fe!==null;){switch(j=fe,de=j.child,j.tag){case 0:case 11:case 14:case 15:As(4,j,j.return);break;case 1:Cr(j,j.return);var ge=j.stateNode;if(typeof ge.componentWillUnmount=="function"){p=j,a=j.return;try{r=p,ge.props=r.memoizedProps,ge.state=r.memoizedState,ge.componentWillUnmount()}catch(ve){st(p,a,ve)}}break;case 5:Cr(j,j.return);break;case 22:if(j.memoizedState!==null){nf(ne);continue}}de!==null?(de.return=j,fe=de):nf(ne)}ee=ee.sibling}e:for(ee=null,ne=n;;){if(ne.tag===5){if(ee===null){ee=ne;try{v=ne.stateNode,q?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(k=ne.stateNode,R=ne.memoizedProps.style,I=R!=null&&R.hasOwnProperty("display")?R.display:null,k.style.display=br("display",I))}catch(ve){st(n,n.return,ve)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(ve){st(n,n.return,ve)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===n)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===n)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===n)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:En(r,n),Hn(n),p&4&&Xd(n);break;case 21:break;default:En(r,n),Hn(n)}}function Hn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if($d(a)){var p=a;break e}a=a.return}throw Error(o(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(yi(v,""),p.flags&=-33);var x=Yd(n);Uu(n,x,v);break;case 3:case 4:var I=p.stateNode.containerInfo,k=Yd(n);Fu(n,k,I);break;default:throw Error(o(161))}}catch(R){st(n,n.return,R)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function wm(n,r,a){fe=n,ef(n)}function ef(n,r,a){for(var p=(n.mode&1)!==0;fe!==null;){var v=fe,x=v.child;if(v.tag===22&&p){var I=v.memoizedState!==null||Kl;if(!I){var k=v.alternate,R=k!==null&&k.memoizedState!==null||It;k=Kl;var q=It;if(Kl=I,(It=R)&&!q)for(fe=v;fe!==null;)I=fe,R=I.child,I.tag===22&&I.memoizedState!==null?of(v):R!==null?(R.return=I,fe=R):of(v);for(;x!==null;)fe=x,ef(x),x=x.sibling;fe=v,Kl=k,It=q}tf(n)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,fe=x):tf(n)}}function tf(n){for(;fe!==null;){var r=fe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:It||$l(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!It)if(a===null)p.componentDidMount();else{var v=r.elementType===r.type?a.memoizedProps:Cn(r.type,a.memoizedProps);p.componentDidUpdate(v,a.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=r.updateQueue;x!==null&&nd(r,x,p);break;case 3:var I=r.updateQueue;if(I!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}nd(r,I,a)}break;case 5:var k=r.stateNode;if(a===null&&r.flags&4){a=k;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var q=r.alternate;if(q!==null){var ee=q.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Jt(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}It||r.flags&512&&Du(r)}catch(j){st(r,r.return,j)}}if(r===n){fe=null;break}if(a=r.sibling,a!==null){a.return=r.return,fe=a;break}fe=r.return}}function nf(n){for(;fe!==null;){var r=fe;if(r===n){fe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,fe=a;break}fe=r.return}}function of(n){for(;fe!==null;){var r=fe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{$l(4,r)}catch(R){st(r,a,R)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var v=r.return;try{p.componentDidMount()}catch(R){st(r,v,R)}}var x=r.return;try{Du(r)}catch(R){st(r,x,R)}break;case 5:var I=r.return;try{Du(r)}catch(R){st(r,I,R)}}}catch(R){st(r,r.return,R)}if(r===n){fe=null;break}var k=r.sibling;if(k!==null){k.return=r.return,fe=k;break}fe=r.return}}var xm=Math.ceil,Yl=se.ReactCurrentDispatcher,zu=se.ReactCurrentOwner,hn=se.ReactCurrentBatchConfig,He=0,mt=null,ut=null,yt=0,en=0,Sr=Gi(0),ht=0,Ms=null,No=0,Ql=0,Bu=0,Rs=null,bt=null,Vu=0,Er=1/0,di=null,Xl=!1,bu=null,Ki=null,jl=!1,$i=null,ea=0,Ls=0,Hu=null,ta=-1,na=0;function Lt(){return(He&6)!==0?tt():ta!==-1?ta:ta=tt()}function Yi(n){return(n.mode&1)===0?1:(He&2)!==0&&yt!==0?yt&-yt:om.transition!==null?(na===0&&(na=rl()),na):(n=be,n!==0||(n=window.event,n=n===void 0?16:Ve(n.type)),n)}function Pn(n,r,a,p){if(50<Ls)throw Ls=0,Hu=null,Error(o(185));Wt(n,a,p),((He&2)===0||n!==mt)&&(n===mt&&((He&2)===0&&(Ql|=a),ht===4&&Qi(n,yt)),Ht(n,p),a===1&&He===0&&(r.mode&1)===0&&(Er=tt()+500,Al&&Oi()))}function Ht(n,r){var a=n.callbackNode;Wo(n,r);var p=Ke(n,n===mt?yt:0);if(p===0)a!==null&&Kr(a),n.callbackNode=null,n.callbackPriority=0;else if(r=p&-p,n.callbackPriority!==r){if(a!=null&&Kr(a),r===1)n.tag===0?im(sf.bind(null,n)):Oc(sf.bind(null,n)),Ct(function(){(He&6)===0&&Oi()}),a=null;else{switch(Ei(p)){case 1:a=$r;break;case 4:a=ol;break;case 16:a=qo;break;case 536870912:a=xi;break;default:a=qo}a=pf(a,rf.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function rf(n,r){if(ta=-1,na=0,(He&6)!==0)throw Error(o(327));var a=n.callbackNode;if(Pr()&&n.callbackNode!==a)return null;var p=Ke(n,n===mt?yt:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||r)r=ia(n,p);else{r=p;var v=He;He|=2;var x=af();(mt!==n||yt!==r)&&(di=null,Er=tt()+500,Ao(n,r));do try{Sm();break}catch(k){lf(n,k)}while(!0);ru(),Yl.current=x,He=v,ut!==null?r=0:(mt=null,yt=0,r=ht)}if(r!==0){if(r===2&&(v=xt(n),v!==0&&(p=v,r=Gu(n,v))),r===1)throw a=Ms,Ao(n,0),Qi(n,p),Ht(n,tt()),a;if(r===6)Qi(n,p);else{if(v=n.current.alternate,(p&30)===0&&!Tm(v)&&(r=ia(n,p),r===2&&(x=xt(n),x!==0&&(p=x,r=Gu(n,x))),r===1))throw a=Ms,Ao(n,0),Qi(n,p),Ht(n,tt()),a;switch(n.finishedWork=v,n.finishedLanes=p,r){case 0:case 1:throw Error(o(345));case 2:Mo(n,bt,di);break;case 3:if(Qi(n,p),(p&130023424)===p&&(r=Vu+500-tt(),10<r)){if(Ke(n,0)!==0)break;if(v=n.suspendedLanes,(v&p)!==p){Lt(),n.pingedLanes|=n.suspendedLanes&v;break}n.timeoutHandle=dt(Mo.bind(null,n,bt,di),r);break}Mo(n,bt,di);break;case 4:if(Qi(n,p),(p&4194240)===p)break;for(r=n.eventTimes,v=-1;0<p;){var I=31-Re(p);x=1<<I,I=r[I],I>v&&(v=I),p&=~x}if(p=v,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*xm(p/1960))-p,10<p){n.timeoutHandle=dt(Mo.bind(null,n,bt,di),p);break}Mo(n,bt,di);break;case 5:Mo(n,bt,di);break;default:throw Error(o(329))}}}return Ht(n,tt()),n.callbackNode===a?rf.bind(null,n):null}function Gu(n,r){var a=Rs;return n.current.memoizedState.isDehydrated&&(Ao(n,r).flags|=256),n=ia(n,r),n!==2&&(r=bt,bt=a,r!==null&&qu(r)),n}function qu(n){bt===null?bt=n:bt.push.apply(bt,n)}function Tm(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var p=0;p<a.length;p++){var v=a[p],x=v.getSnapshot;v=v.value;try{if(!Yt(x(),v))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qi(n,r){for(r&=~Bu,r&=~Ql,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Re(r),p=1<<a;n[a]=-1,r&=~p}}function sf(n){if((He&6)!==0)throw Error(o(327));Pr();var r=Ke(n,0);if((r&1)===0)return Ht(n,tt()),null;var a=ia(n,r);if(n.tag!==0&&a===2){var p=xt(n);p!==0&&(r=p,a=Gu(n,p))}if(a===1)throw a=Ms,Ao(n,0),Qi(n,r),Ht(n,tt()),a;if(a===6)throw Error(o(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Mo(n,bt,di),Ht(n,tt()),null}function Ou(n,r){var a=He;He|=1;try{return n(r)}finally{He=a,He===0&&(Er=tt()+500,Al&&Oi())}}function ko(n){$i!==null&&$i.tag===0&&(He&6)===0&&Pr();var r=He;He|=1;var a=hn.transition,p=be;try{if(hn.transition=null,be=1,n)return n()}finally{be=p,hn.transition=a,He=r,(He&6)===0&&Oi()}}function Wu(){en=Sr.current,Qe(Sr)}function Ao(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,at(a)),ut!==null)for(a=ut.return;a!==null;){var p=a;switch(eu(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Nl();break;case 3:xr(),Qe(zt),Qe(St),hu();break;case 5:du(p);break;case 4:xr();break;case 13:Qe(it);break;case 19:Qe(it);break;case 10:su(p.type._context);break;case 22:case 23:Wu()}a=a.return}if(mt=n,ut=n=Xi(n.current,null),yt=en=r,ht=0,Ms=null,Bu=Ql=No=0,bt=Rs=null,Eo!==null){for(r=0;r<Eo.length;r++)if(a=Eo[r],p=a.interleaved,p!==null){a.interleaved=null;var v=p.next,x=a.pending;if(x!==null){var I=x.next;x.next=v,p.next=I}a.pending=p}Eo=null}return n}function lf(n,r){do{var a=ut;try{if(ru(),bl.current=Ol,Hl){for(var p=ot.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Hl=!1}if(Io=0,pt=ft=ot=null,Es=!1,Ps=0,zu.current=null,a===null||a.return===null){ht=1,Ms=r,ut=null;break}e:{var x=n,I=a.return,k=a,R=r;if(r=yt,k.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var q=R,ee=k,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var j=ee.alternate;j?(ee.updateQueue=j.updateQueue,ee.memoizedState=j.memoizedState,ee.lanes=j.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var de=Md(I);if(de!==null){de.flags&=-257,Rd(de,I,k,x,r),de.mode&1&&Ad(x,q,r),r=de,R=q;var ge=r.updateQueue;if(ge===null){var ve=new Set;ve.add(R),r.updateQueue=ve}else ge.add(R);break e}else{if((r&1)===0){Ad(x,q,r),Zu();break e}R=Error(o(426))}}else if(et&&k.mode&1){var lt=Md(I);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Rd(lt,I,k,x,r),iu(Tr(R,k));break e}}x=R=Tr(R,k),ht!==4&&(ht=2),Rs===null?Rs=[x]:Rs.push(x),x=I;do{switch(x.tag){case 3:x.flags|=65536,r&=-r,x.lanes|=r;var z=Nd(x,R,r);td(x,z);break e;case 1:k=R;var F=x.type,V=x.stateNode;if((x.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ki===null||!Ki.has(V)))){x.flags|=65536,r&=-r,x.lanes|=r;var ie=kd(x,k,r);td(x,ie);break e}}x=x.return}while(x!==null)}cf(a)}catch(xe){r=xe,ut===a&&a!==null&&(ut=a=a.return);continue}break}while(!0)}function af(){var n=Yl.current;return Yl.current=Ol,n===null?Ol:n}function Zu(){(ht===0||ht===3||ht===2)&&(ht=4),mt===null||(No&268435455)===0&&(Ql&268435455)===0||Qi(mt,yt)}function ia(n,r){var a=He;He|=2;var p=af();(mt!==n||yt!==r)&&(di=null,Ao(n,r));do try{Cm();break}catch(v){lf(n,v)}while(!0);if(ru(),He=a,Yl.current=p,ut!==null)throw Error(o(261));return mt=null,yt=0,ht}function Cm(){for(;ut!==null;)uf(ut)}function Sm(){for(;ut!==null&&!La();)uf(ut)}function uf(n){var r=hf(n.alternate,n,en);n.memoizedProps=n.pendingProps,r===null?cf(n):ut=r,zu.current=null}function cf(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=gm(a,r,en),a!==null){ut=a;return}}else{if(a=_m(a,r),a!==null){a.flags&=32767,ut=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ht=6,ut=null;return}}if(r=r.sibling,r!==null){ut=r;return}ut=r=n}while(r!==null);ht===0&&(ht=5)}function Mo(n,r,a){var p=be,v=hn.transition;try{hn.transition=null,be=1,Em(n,r,a,p)}finally{hn.transition=v,be=p}return null}function Em(n,r,a,p){do Pr();while($i!==null);if((He&6)!==0)throw Error(o(327));a=n.finishedWork;var v=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(o(177));n.callbackNode=null,n.callbackPriority=0;var x=a.lanes|a.childLanes;if(rt(n,x),n===mt&&(ut=mt=null,yt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||jl||(jl=!0,pf(qo,function(){return Pr(),null})),x=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||x){x=hn.transition,hn.transition=null;var I=be;be=1;var k=He;He|=4,zu.current=null,ym(n,a),jd(a,n),sn(Ce),po=!!ae,Ce=ae=null,n.current=a,wm(a),Go(),He=k,be=I,hn.transition=x}else n.current=a;if(jl&&(jl=!1,$i=n,ea=v),x=n.pendingLanes,x===0&&(Ki=null),ao(a.stateNode),Ht(n,tt()),r!==null)for(p=n.onRecoverableError,a=0;a<r.length;a++)v=r[a],p(v.value,{componentStack:v.stack,digest:v.digest});if(Xl)throw Xl=!1,n=bu,bu=null,n;return(ea&1)!==0&&n.tag!==0&&Pr(),x=n.pendingLanes,(x&1)!==0?n===Hu?Ls++:(Ls=0,Hu=n):Ls=0,Oi(),null}function Pr(){if($i!==null){var n=Ei(ea),r=hn.transition,a=be;try{if(hn.transition=null,be=16>n?16:n,$i===null)var p=!1;else{if(n=$i,$i=null,ea=0,(He&6)!==0)throw Error(o(331));var v=He;for(He|=4,fe=n.current;fe!==null;){var x=fe,I=x.child;if((fe.flags&16)!==0){var k=x.deletions;if(k!==null){for(var R=0;R<k.length;R++){var q=k[R];for(fe=q;fe!==null;){var ee=fe;switch(ee.tag){case 0:case 11:case 15:As(8,ee,x)}var ne=ee.child;if(ne!==null)ne.return=ee,fe=ne;else for(;fe!==null;){ee=fe;var j=ee.sibling,de=ee.return;if(Kd(ee),ee===q){fe=null;break}if(j!==null){j.return=de,fe=j;break}fe=de}}}var ge=x.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var lt=ve.sibling;ve.sibling=null,ve=lt}while(ve!==null)}}fe=x}}if((x.subtreeFlags&2064)!==0&&I!==null)I.return=x,fe=I;else e:for(;fe!==null;){if(x=fe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:As(9,x,x.return)}var z=x.sibling;if(z!==null){z.return=x.return,fe=z;break e}fe=x.return}}var F=n.current;for(fe=F;fe!==null;){I=fe;var V=I.child;if((I.subtreeFlags&2064)!==0&&V!==null)V.return=I,fe=V;else e:for(I=F;fe!==null;){if(k=fe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:$l(9,k)}}catch(xe){st(k,k.return,xe)}if(k===I){fe=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,fe=ie;break e}fe=k.return}}if(He=v,Oi(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(lo,n)}catch{}p=!0}return p}finally{be=a,hn.transition=r}}return!1}function df(n,r,a){r=Tr(a,r),r=Nd(n,r,1),n=Zi(n,r,1),r=Lt(),n!==null&&(Wt(n,1,r),Ht(n,r))}function st(n,r,a){if(n.tag===3)df(n,n,a);else for(;r!==null;){if(r.tag===3){df(r,n,a);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ki===null||!Ki.has(p))){n=Tr(a,n),n=kd(r,n,1),r=Zi(r,n,1),n=Lt(),r!==null&&(Wt(r,1,n),Ht(r,n));break}}r=r.return}}function Pm(n,r,a){var p=n.pingCache;p!==null&&p.delete(r),r=Lt(),n.pingedLanes|=n.suspendedLanes&a,mt===n&&(yt&a)===a&&(ht===4||ht===3&&(yt&130023424)===yt&&500>tt()-Vu?Ao(n,0):Bu|=a),Ht(n,r)}function ff(n,r){r===0&&((n.mode&1)===0?r=1:(r=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var a=Lt();n=ai(n,r),n!==null&&(Wt(n,r,a),Ht(n,a))}function Im(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),ff(n,a)}function Nm(n,r){var a=0;switch(n.tag){case 13:var p=n.stateNode,v=n.memoizedState;v!==null&&(a=v.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(o(314))}p!==null&&p.delete(r),ff(n,a)}var hf;hf=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||zt.current)Vt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Vt=!1,mm(n,r,a);Vt=(n.flags&131072)!==0}else Vt=!1,et&&(r.flags&1048576)!==0&&Wc(r,Rl,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;Jl(n,r),n=r.pendingProps;var v=pr(r,St.current);wr(r,a),v=gu(null,r,p,n,v,a);var x=_u();return r.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Bt(p)?(x=!0,kl(r)):x=!1,r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,uu(r),v.updater=Wl,r.stateNode=v,v._reactInternals=r,Cu(r,p,n,a),r=Iu(null,r,p,!0,x,a)):(r.tag=0,et&&x&&ja(r),Rt(null,r,v,a),r=r.child),r;case 16:p=r.elementType;e:{switch(Jl(n,r),n=r.pendingProps,v=p._init,p=v(p._payload),r.type=p,v=r.tag=Am(p),n=Cn(p,n),v){case 0:r=Pu(null,r,p,n,a);break e;case 1:r=Bd(null,r,p,n,a);break e;case 11:r=Ld(null,r,p,n,a);break e;case 14:r=Dd(null,r,p,Cn(p.type,n),a);break e}throw Error(o(306,p,""))}return r;case 0:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:Cn(p,v),Pu(n,r,p,v,a);case 1:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:Cn(p,v),Bd(n,r,p,v,a);case 3:e:{if(Vd(r),n===null)throw Error(o(387));p=r.pendingProps,x=r.memoizedState,v=x.element,ed(n,r),Bl(r,p,null,a);var I=r.memoizedState;if(p=I.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){v=Tr(Error(o(423)),r),r=bd(n,r,p,a,v);break e}else if(p!==v){v=Tr(Error(o(424)),r),r=bd(n,r,p,a,v);break e}else for(jt=Bn(r.stateNode.containerInfo.firstChild),Xt=r,et=!0,Tn=null,a=Xc(r,null,p,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_r(),p===v){r=ci(n,r,a);break e}Rt(n,r,p,a)}r=r.child}return r;case 5:return id(r),n===null&&nu(r),p=r.type,v=r.pendingProps,x=n!==null?n.memoizedProps:null,I=v.children,De(p,v)?I=null:x!==null&&De(p,x)&&(r.flags|=32),zd(n,r),Rt(n,r,I,a),r.child;case 6:return n===null&&nu(r),null;case 13:return Hd(n,r,a);case 4:return cu(r,r.stateNode.containerInfo),p=r.pendingProps,n===null?r.child=vr(r,null,p,a):Rt(n,r,p,a),r.child;case 11:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:Cn(p,v),Ld(n,r,p,v,a);case 7:return Rt(n,r,r.pendingProps,a),r.child;case 8:return Rt(n,r,r.pendingProps.children,a),r.child;case 12:return Rt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(p=r.type._context,v=r.pendingProps,x=r.memoizedProps,I=v.value,$e(Fl,p._currentValue),p._currentValue=I,x!==null)if(Yt(x.value,I)){if(x.children===v.children&&!zt.current){r=ci(n,r,a);break e}}else for(x=r.child,x!==null&&(x.return=r);x!==null;){var k=x.dependencies;if(k!==null){I=x.child;for(var R=k.firstContext;R!==null;){if(R.context===p){if(x.tag===1){R=ui(-1,a&-a),R.tag=2;var q=x.updateQueue;if(q!==null){q=q.shared;var ee=q.pending;ee===null?R.next=R:(R.next=ee.next,ee.next=R),q.pending=R}}x.lanes|=a,R=x.alternate,R!==null&&(R.lanes|=a),lu(x.return,a,r),k.lanes|=a;break}R=R.next}}else if(x.tag===10)I=x.type===r.type?null:x.child;else if(x.tag===18){if(I=x.return,I===null)throw Error(o(341));I.lanes|=a,k=I.alternate,k!==null&&(k.lanes|=a),lu(I,a,r),I=x.sibling}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===r){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}Rt(n,r,v.children,a),r=r.child}return r;case 9:return v=r.type,p=r.pendingProps.children,wr(r,a),v=dn(v),p=p(v),r.flags|=1,Rt(n,r,p,a),r.child;case 14:return p=r.type,v=Cn(p,r.pendingProps),v=Cn(p.type,v),Dd(n,r,p,v,a);case 15:return Fd(n,r,r.type,r.pendingProps,a);case 17:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:Cn(p,v),Jl(n,r),r.tag=1,Bt(p)?(n=!0,kl(r)):n=!1,wr(r,a),Pd(r,p,v),Cu(r,p,v,a),Iu(null,r,p,!0,n,a);case 19:return qd(n,r,a);case 22:return Ud(n,r,a)}throw Error(o(156,r.tag))};function pf(n,r){return il(n,r)}function km(n,r,a,p){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,r,a,p){return new km(n,r,a,p)}function Ju(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Am(n){if(typeof n=="function")return Ju(n)?1:0;if(n!=null){if(n=n.$$typeof,n===X)return 11;if(n===je)return 14}return 2}function Xi(n,r){var a=n.alternate;return a===null?(a=pn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function oa(n,r,a,p,v,x){var I=2;if(p=n,typeof n=="function")Ju(n)&&(I=1);else if(typeof n=="string")I=5;else e:switch(n){case pe:return Ro(a.children,v,x,r);case Te:I=8,v|=8;break;case le:return n=pn(12,a,r,v|2),n.elementType=le,n.lanes=x,n;case ce:return n=pn(13,a,r,v),n.elementType=ce,n.lanes=x,n;case Ue:return n=pn(19,a,r,v),n.elementType=Ue,n.lanes=x,n;case ze:return ra(a,v,x,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ie:I=10;break e;case Se:I=9;break e;case X:I=11;break e;case je:I=14;break e;case Ae:I=16,p=null;break e}throw Error(o(130,n==null?n:typeof n,""))}return r=pn(I,a,r,v),r.elementType=n,r.type=p,r.lanes=x,r}function Ro(n,r,a,p){return n=pn(7,n,p,r),n.lanes=a,n}function ra(n,r,a,p){return n=pn(22,n,p,r),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function Ku(n,r,a){return n=pn(6,n,null,r),n.lanes=a,n}function $u(n,r,a){return r=pn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Mm(n,r,a,p,v){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Yu(n,r,a,p,v,x,I,k,R){return n=new Mm(n,r,a,k,R),r===1?(r=1,x===!0&&(r|=8)):r=0,x=pn(3,null,null,r),n.current=x,x.stateNode=n,x.memoizedState={element:p,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},uu(x),n}function Rm(n,r,a){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:p==null?null:""+p,children:n,containerInfo:r,implementation:a}}function mf(n){if(!n)return qi;n=n._reactInternals;e:{if(An(n)!==n||n.tag!==1)throw Error(o(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Bt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(n.tag===1){var a=n.type;if(Bt(a))return Gc(n,a,r)}return r}function gf(n,r,a,p,v,x,I,k,R){return n=Yu(a,p,!0,n,v,x,I,k,R),n.context=mf(null),a=n.current,p=Lt(),v=Yi(a),x=ui(p,v),x.callback=r??null,Zi(a,x,v),n.current.lanes=v,Wt(n,v,p),Ht(n,p),n}function sa(n,r,a,p){var v=r.current,x=Lt(),I=Yi(v);return a=mf(a),r.context===null?r.context=a:r.pendingContext=a,r=ui(x,I),r.payload={element:n},p=p===void 0?null:p,p!==null&&(r.callback=p),n=Zi(v,r,I),n!==null&&(Pn(n,v,I,x),zl(n,v,I)),I}function la(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _f(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Qu(n,r){_f(n,r),(n=n.alternate)&&_f(n,r)}function Lm(){return null}var vf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Xu(n){this._internalRoot=n}aa.prototype.render=Xu.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));sa(n,r,null,null)},aa.prototype.unmount=Xu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;ko(function(){sa(null,n,null,null)}),r[Oe]=null}};function aa(n){this._internalRoot=n}aa.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ko();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ct.length&&r!==0&&r<ct[a].priority;a++);ct.splice(a,0,n),a===0&&$o(n)}};function ju(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ua(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yf(){}function Dm(n,r,a,p,v){if(v){if(typeof p=="function"){var x=p;p=function(){var q=la(I);x.call(q)}}var I=gf(r,p,n,0,null,!1,!1,"",yf);return n._reactRootContainer=I,n[Oe]=I.current,Bi(n.nodeType===8?n.parentNode:n),ko(),I}for(;v=n.lastChild;)n.removeChild(v);if(typeof p=="function"){var k=p;p=function(){var q=la(R);k.call(q)}}var R=Yu(n,0,!1,null,null,!1,!1,"",yf);return n._reactRootContainer=R,n[Oe]=R.current,Bi(n.nodeType===8?n.parentNode:n),ko(function(){sa(r,R,a,p)}),R}function ca(n,r,a,p,v){var x=a._reactRootContainer;if(x){var I=x;if(typeof v=="function"){var k=v;v=function(){var R=la(I);k.call(R)}}sa(r,I,n,v)}else I=Dm(a,r,n,v,p);return la(I)}Zo=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Me(r.pendingLanes);a!==0&&(_n(r,a|1),Ht(r,tt()),(He&6)===0&&(Er=tt()+500,Oi()))}break;case 13:ko(function(){var p=ai(n,1);if(p!==null){var v=Lt();Pn(p,n,1,v)}}),Qu(n,1)}},Jn=function(n){if(n.tag===13){var r=ai(n,134217728);if(r!==null){var a=Lt();Pn(r,n,134217728,a)}Qu(n,134217728)}},Jo=function(n){if(n.tag===13){var r=Yi(n),a=ai(n,r);if(a!==null){var p=Lt();Pn(a,n,r,p)}Qu(n,r)}},Ko=function(){return be},uo=function(n,r){var a=be;try{return be=n,r()}finally{be=a}},Vo=function(n,r,a){switch(r){case"input":if(to(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var p=a[r];if(p!==n&&p.form===n.form){var v=fr(p);if(!v)throw Error(o(90));gi(p),to(p,v)}}}break;case"textarea":Os(n,a);break;case"select":r=a.value,r!=null&&kn(n,!!a.multiple,r,!1)}},Qs=Ou,Xs=ko;var Fm={usingClientEntryPoint:!1,Events:[ii,oi,fr,$s,Ys,Ou]},Ds={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Um={bundleType:Ds.bundleType,version:Ds.version,rendererPackageName:Ds.rendererPackageName,rendererConfig:Ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=tl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ds.findFiberByHostInstance||Lm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{lo=da.inject(Um),Ot=da}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm,Gt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(r))throw Error(o(200));return Rm(n,r,null,a)},Gt.createRoot=function(n,r){if(!ju(n))throw Error(o(299));var a=!1,p="",v=vf;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Yu(n,1,!1,null,null,a,!1,p,v),n[Oe]=r.current,Bi(n.nodeType===8?n.parentNode:n),new Xu(r)},Gt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=tl(r),n=n===null?null:n.stateNode,n},Gt.flushSync=function(n){return ko(n)},Gt.hydrate=function(n,r,a){if(!ua(r))throw Error(o(200));return ca(null,n,r,!0,a)},Gt.hydrateRoot=function(n,r,a){if(!ju(n))throw Error(o(405));var p=a!=null&&a.hydratedSources||null,v=!1,x="",I=vf;if(a!=null&&(a.unstable_strictMode===!0&&(v=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(I=a.onRecoverableError)),r=gf(r,null,n,1,a??null,v,!1,x,I),n[Oe]=r.current,Bi(n),p)for(n=0;n<p.length;n++)a=p[n],v=a._getVersion,v=v(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,v]:r.mutableSourceEagerHydrationData.push(a,v);return new aa(r)},Gt.render=function(n,r,a){if(!ua(r))throw Error(o(200));return ca(null,n,r,!1,a)},Gt.unmountComponentAtNode=function(n){if(!ua(n))throw Error(o(40));return n._reactRootContainer?(ko(function(){ca(null,null,n,!1,function(){n._reactRootContainer=null,n[Oe]=null})}),!0):!1},Gt.unstable_batchedUpdates=Ou,Gt.unstable_renderSubtreeIntoContainer=function(n,r,a,p){if(!ua(a))throw Error(o(200));if(n==null||n._reactInternals===void 0)throw Error(o(38));return ca(n,r,a,!1,p)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var If;function lp(){if(If)return nc.exports;If=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),nc.exports=qm(),nc.exports}var Nf;function Om(){if(Nf)return fa;Nf=1;var t=lp();return fa.createRoot=t.createRoot,fa.hydrateRoot=t.hydrateRoot,fa}var Wm=Om();const Zm=Ec(Wm),Jm=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),tn=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),Hs=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663l.001.001zm-3.75-3.75a3.75 3.75 0 10-7.5 0 3.75 3.75 0 007.5 0z"})}),ap=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M-4.5 12h22.5"})}),Km=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962c.57-1.023.57-2.206 0-3.228m-5.545 0a3 3 0 10-5.545 0m7.5 0a3 3 0 10-7.5 0M10.5 4.886c1.024-.57 2.206-.57 3.228 0m5.545 0a3 3 0 105.545 0M10.5 19.114c-1.024.57-2.206.57-3.228 0m5.545 0a3 3 0 105.545 0"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})]}),Ic=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008v-.008z"})]}),up=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),$m=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8l4 4m0 0l-4 4m4-4H3"})}),Ym=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),Gs=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),qs=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),Nc=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.748 1.295 2.538 0 3.286L7.279 20.99c-1.25.72-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"})}),Qm=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75zm9 0a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75z",clipRule:"evenodd"})}),Xm=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),kc=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),jm=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),cp=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z"})}),eg=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),tg=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5"})}),ng=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v.01M9 21H15M12 3.75A5.25 5.25 0 006.75 9c0 1.623.822 3.104 2.083 4.015V15a.75.75 0 00.75.75h4.917a.75.75 0 00.75-.75v-2.015a5.234 5.234 0 002.083-4.015A5.25 5.25 0 0012 3.75z"})}),cc=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),dp=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0h9.75m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"})}),ig=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[S.jsx("circle",{cx:"12",cy:"12",r:"6",fill:"#0ea5e9"}),S.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#0ea5e9",strokeWidth:"2",fill:"none"})]}),kf=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),og=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),rg=({items:t,viewMode:e,listTitle:o,isLoading:s,onSiteSelect:u,onPersonSelect:h,selectedItem:m,mobileSheetState:g,setMobileSheetState:y})=>{const w=E=>m?"site_id"in E&&"site_id"in m?E.site_id===m.site_id:"person_id"in E&&"person_id"in m?E.person_id===m.person_id:!1:!1,T=()=>{switch(g){case"collapsed":return"h-12";case"half":return"h-[45vh]";case"full":return"h-[90vh]"}},P=()=>{y(g==="collapsed"?"half":g==="half"?"full":"collapsed")};return S.jsxs("aside",{className:`
        bg-slate-800 text-slate-200 border-t md:border-t-0 md:border-r border-slate-700/80 shadow-2xl md:shadow-none
        transition-all duration-300 ease-in-out
        
        /* Mobile Styles (Bottom Sheet) */
        fixed bottom-0 left-0 w-full z-20 rounded-t-2xl
        ${T()}
        
        /* Desktop Styles (Sidebar) */
        md:relative md:h-full md:w-80 lg:w-96 md:rounded-none md:z-auto
        flex flex-col
    `,children:[S.jsxs("div",{className:"md:hidden flex flex-col items-center justify-center pt-2 pb-1 cursor-pointer bg-slate-800 rounded-t-2xl border-b border-slate-700/50",onClick:P,children:[S.jsx("div",{className:"w-12 h-1.5 bg-slate-600 rounded-full mb-2"}),g==="collapsed"&&S.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["Xem danh sch (",t.length,")"]})]}),S.jsxs("div",{className:`flex-col h-full overflow-hidden ${g==="collapsed"?"hidden md:flex":"flex"}`,children:[S.jsxs("header",{className:"hidden md:flex flex-col p-4 border-b border-slate-700 shrink-0",children:[S.jsx("h1",{className:"text-2xl font-bold text-sky-400",children:"Bn  Lch s"}),S.jsx("h2",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider",children:" Nng"})]}),S.jsxs("div",{className:"flex-grow overflow-y-auto p-4 custom-scrollbar",children:[S.jsxs("h3",{className:"text-sm font-bold uppercase text-slate-500 mb-3 sticky top-0 bg-slate-800 z-10 py-1 flex items-center gap-2",children:[e==="sites"?S.jsx(tn,{className:"h-4 w-4"}):S.jsx(Hs,{className:"h-4 w-4"}),o," (",t.length,")"]}),s?S.jsx("div",{className:"space-y-4",children:[...Array(5)].map((E,A)=>S.jsxs("div",{className:"animate-pulse flex space-x-4",children:[S.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),S.jsxs("div",{className:"flex-1 space-y-3 py-1",children:[S.jsx("div",{className:"h-2 bg-slate-700 rounded"}),S.jsx("div",{className:"h-2 bg-slate-700 rounded w-5/6"})]})]},A))}):t.length>0?S.jsx("ul",{className:"space-y-1 pb-20 md:pb-0",children:t.map(E=>{const A=w(E),b="site_id"in E,B=b?`site-${E.site_id}`:`person-${E.person_id}`,O=b?E.site_name:E.full_name,Q=b?E.site_type:`${E.birth_year||"?"} - ${E.death_year||"?"}`;return S.jsxs("li",{onClick:()=>{b?u(E):h(E)},className:`relative flex items-center p-3 rounded-xl transition-all duration-200 cursor-pointer group 
                            ${A?"bg-sky-500/20 shadow-inner":"hover:bg-slate-700/50"}
                        `,children:[S.jsx("div",{className:`p-2 rounded-full mr-3 flex-shrink-0 ${A?"bg-sky-500 text-white":"bg-slate-700 text-sky-500 group-hover:bg-slate-600 group-hover:text-sky-400"}`,children:b?S.jsx(tn,{className:"h-5 w-5"}):S.jsx(Hs,{className:"h-5 w-5"})}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("p",{className:`font-medium truncate ${A?"text-sky-300":"text-slate-200"} group-hover:text-white`,children:O}),S.jsx("p",{className:"text-xs text-slate-400 capitalize truncate",children:Q})]})]},B)})}):S.jsx("div",{className:"flex flex-col items-center justify-center py-10 text-slate-400",children:S.jsx("p",{className:"italic",children:"Khng tm thy kt qu no."})})]}),S.jsx("footer",{className:"hidden md:block text-center text-xs text-slate-600 p-4 border-t border-slate-700 flex-shrink-0",children:S.jsxs("p",{children:[" ",new Date().getFullYear()," Da Nang Map"]})})]})]})};function fp(t,e){const o=Z.useRef(e);Z.useEffect(function(){e!==o.current&&t.attributionControl!=null&&(o.current!=null&&t.attributionControl.removeAttribution(o.current),e!=null&&t.attributionControl.addAttribution(e)),o.current=e},[t,e])}var sg=lp();const lg=1;function ag(t){return Object.freeze({__version:lg,map:t})}function hp(t,e){return Object.freeze({...t,...e})}const pp=Z.createContext(null),mp=pp.Provider;function Ta(){const t=Z.useContext(pp);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function gp(t){function e(o,s){const{instance:u,context:h}=t(o).current;return Z.useImperativeHandle(s,()=>u),o.children==null?null:bs.createElement(mp,{value:h},o.children)}return Z.forwardRef(e)}function ug(t){function e(o,s){const[u,h]=Z.useState(!1),{instance:m}=t(o,h).current;Z.useImperativeHandle(s,()=>m),Z.useEffect(function(){u&&m.update()},[m,u,o.children]);const g=m._contentNode;return g?sg.createPortal(o.children,g):null}return Z.forwardRef(e)}function cg(t){function e(o,s){const{instance:u}=t(o).current;return Z.useImperativeHandle(s,()=>u),null}return Z.forwardRef(e)}function Ac(t,e){const o=Z.useRef();Z.useEffect(function(){return e!=null&&t.instance.on(e),o.current=e,function(){o.current!=null&&t.instance.off(o.current),o.current=null}},[t,e])}function Ca(t,e){const o=t.pane??e.pane;return o?{...t,pane:o}:t}function dg(t,e){return function(s,u){const h=Ta(),m=t(Ca(s,h),h);return fp(h.map,s.attribution),Ac(m.current,s.eventHandlers),e(m.current,h,s,u),m}}var zs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var fg=zs.exports,Af;function hg(){return Af||(Af=1,(function(t,e){(function(o,s){s(e)})(fg,(function(o){var s="1.9.4";function u(i){var l,f,_,C;for(f=1,_=arguments.length;f<_;f++){C=arguments[f];for(l in C)i[l]=C[l]}return i}var h=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function m(i,l){var f=Array.prototype.slice;if(i.bind)return i.bind.apply(i,f.call(arguments,1));var _=f.call(arguments,2);return function(){return i.apply(l,_.length?_.concat(f.call(arguments)):arguments)}}var g=0;function y(i){return"_leaflet_id"in i||(i._leaflet_id=++g),i._leaflet_id}function w(i,l,f){var _,C,N,M;return M=function(){_=!1,C&&(N.apply(f,C),C=!1)},N=function(){_?C=arguments:(i.apply(f,arguments),setTimeout(M,l),_=!0)},N}function T(i,l,f){var _=l[1],C=l[0],N=_-C;return i===_&&f?i:((i-C)%N+N)%N+C}function P(){return!1}function E(i,l){if(l===!1)return i;var f=Math.pow(10,l===void 0?6:l);return Math.round(i*f)/f}function A(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function b(i){return A(i).split(/\s+/)}function B(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?h(i.options):{});for(var f in l)i.options[f]=l[f];return i.options}function O(i,l,f){var _=[];for(var C in i)_.push(encodeURIComponent(f?C.toUpperCase():C)+"="+encodeURIComponent(i[C]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function te(i,l){return i.replace(Q,function(f,_){var C=l[_];if(C===void 0)throw new Error("No value provided for variable "+f);return typeof C=="function"&&(C=C(l)),C})}var Y=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function se(i,l){for(var f=0;f<i.length;f++)if(i[f]===l)return f;return-1}var he="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var pe=0;function Te(i){var l=+new Date,f=Math.max(0,16-(l-pe));return pe=l+f,window.setTimeout(i,f)}var le=window.requestAnimationFrame||me("RequestAnimationFrame")||Te,Ie=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Se(i,l,f){if(f&&le===Te)i.call(l);else return le.call(window,m(i,l))}function X(i){i&&Ie.call(window,i)}var ce={__proto__:null,extend:u,create:h,bind:m,get lastId(){return g},stamp:y,throttle:w,wrapNum:T,falseFn:P,formatNum:E,trim:A,splitWords:b,setOptions:B,getParamString:O,template:te,isArray:Y,indexOf:se,emptyImageUrl:he,requestFn:le,cancelFn:Ie,requestAnimFrame:Se,cancelAnimFrame:X};function Ue(){}Ue.extend=function(i){var l=function(){B(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=l.__super__=this.prototype,_=h(f);_.constructor=l,l.prototype=_;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(l[C]=this[C]);return i.statics&&u(l,i.statics),i.includes&&(je(i.includes),u.apply(null,[_].concat(i.includes))),u(_,i),delete _.statics,delete _.includes,_.options&&(_.options=f.options?h(f.options):{},u(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,M=_._initHooks.length;N<M;N++)_._initHooks[N].call(this)}},l},Ue.include=function(i){var l=this.prototype.options;return u(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Ue.mergeOptions=function(i){return u(this.prototype.options,i),this},Ue.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),f=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function je(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Y(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(i,l,f){if(typeof i=="object")for(var _ in i)this._on(_,i[_],l);else{i=b(i);for(var C=0,N=i.length;C<N;C++)this._on(i[C],l,f)}return this},off:function(i,l,f){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],l);else{i=b(i);for(var C=arguments.length===1,N=0,M=i.length;N<M;N++)C?this._off(i[N]):this._off(i[N],l,f)}return this},_on:function(i,l,f,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,f)===!1){f===this&&(f=void 0);var C={fn:l,ctx:f};_&&(C.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(C)}},_off:function(i,l,f){var _,C,N;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(C=0,N=_.length;C<N;C++)_[C].fn=P;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(i,l,f);if(M!==!1){var U=_[M];this._firingCount&&(U.fn=P,this._events[i]=_=_.slice()),_.splice(M,1)}}},fire:function(i,l,f){if(!this.listens(i,f))return this;var _=u({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var C=this._events[i];if(C){this._firingCount=this._firingCount+1||1;for(var N=0,M=C.length;N<M;N++){var U=C[N],G=U.fn;U.once&&this.off(i,G,U.ctx),G.call(U.ctx||this,_)}this._firingCount--}}return f&&this._propagateEvent(_),this},listens:function(i,l,f,_){typeof i!="string"&&console.warn('"string" type argument expected');var C=l;typeof l!="function"&&(_=!!l,C=void 0,f=void 0);var N=this._events&&this._events[i];if(N&&N.length&&this._listens(i,C,f)!==!1)return!0;if(_){for(var M in this._eventParents)if(this._eventParents[M].listens(i,l,f,_))return!0}return!1},_listens:function(i,l,f){if(!this._events)return!1;var _=this._events[i]||[];if(!l)return!!_.length;f===this&&(f=void 0);for(var C=0,N=_.length;C<N;C++)if(_[C].fn===l&&_[C].ctx===f)return C;return!1},once:function(i,l,f){if(typeof i=="object")for(var _ in i)this._on(_,i[_],l,!0);else{i=b(i);for(var C=0,N=i.length;C<N;C++)this._on(i[C],l,f,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[y(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[y(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,u({layer:i.target,propagatedFrom:i.target},i),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var ze=Ue.extend(Ae);function J(i,l,f){this.x=f?Math.round(i):i,this.y=f?Math.round(l):l}var K=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(i){return this.clone()._add(H(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(H(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new J(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new J(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(i){i=H(i);var l=i.x-this.x,f=i.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(i){return i=H(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=H(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function H(i,l,f){return i instanceof J?i:Y(i)?new J(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new J(i.x,i.y):new J(i,l,f)}function D(i,l){if(i)for(var f=l?[i,l]:i,_=0,C=f.length;_<C;_++)this.extend(f[_])}D.prototype={extend:function(i){var l,f;if(!i)return this;if(i instanceof J||typeof i[0]=="number"||"x"in i)l=f=H(i);else if(i=W(i),l=i.min,f=i.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(i){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,f;return typeof i[0]=="number"||i instanceof J?i=H(i):i=W(i),i instanceof D?(l=i.min,f=i.max):l=f=i,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(i){i=W(i);var l=this.min,f=this.max,_=i.min,C=i.max,N=C.x>=l.x&&_.x<=f.x,M=C.y>=l.y&&_.y<=f.y;return N&&M},overlaps:function(i){i=W(i);var l=this.min,f=this.max,_=i.min,C=i.max,N=C.x>l.x&&_.x<f.x,M=C.y>l.y&&_.y<f.y;return N&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,f=this.max,_=Math.abs(l.x-f.x)*i,C=Math.abs(l.y-f.y)*i;return W(H(l.x-_,l.y-C),H(f.x+_,f.y+C))},equals:function(i){return i?(i=W(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function W(i,l){return!i||i instanceof D?i:new D(i,l)}function _e(i,l){if(i)for(var f=l?[i,l]:i,_=0,C=f.length;_<C;_++)this.extend(f[_])}_e.prototype={extend:function(i){var l=this._southWest,f=this._northEast,_,C;if(i instanceof oe)_=i,C=i;else if(i instanceof _e){if(_=i._southWest,C=i._northEast,!_||!C)return this}else return i?this.extend(re(i)||we(i)):this;return!l&&!f?(this._southWest=new oe(_.lat,_.lng),this._northEast=new oe(C.lat,C.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),f.lat=Math.max(C.lat,f.lat),f.lng=Math.max(C.lng,f.lng)),this},pad:function(i){var l=this._southWest,f=this._northEast,_=Math.abs(l.lat-f.lat)*i,C=Math.abs(l.lng-f.lng)*i;return new _e(new oe(l.lat-_,l.lng-C),new oe(f.lat+_,f.lng+C))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof oe||"lat"in i?i=re(i):i=we(i);var l=this._southWest,f=this._northEast,_,C;return i instanceof _e?(_=i.getSouthWest(),C=i.getNorthEast()):_=C=i,_.lat>=l.lat&&C.lat<=f.lat&&_.lng>=l.lng&&C.lng<=f.lng},intersects:function(i){i=we(i);var l=this._southWest,f=this._northEast,_=i.getSouthWest(),C=i.getNorthEast(),N=C.lat>=l.lat&&_.lat<=f.lat,M=C.lng>=l.lng&&_.lng<=f.lng;return N&&M},overlaps:function(i){i=we(i);var l=this._southWest,f=this._northEast,_=i.getSouthWest(),C=i.getNorthEast(),N=C.lat>l.lat&&_.lat<f.lat,M=C.lng>l.lng&&_.lng<f.lng;return N&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=we(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(i,l){return i instanceof _e?i:new _e(i,l)}function oe(i,l,f){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,f!==void 0&&(this.alt=+f)}oe.prototype={equals:function(i,l){if(!i)return!1;i=re(i);var f=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return f<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return Fe.distance(this,re(i))},wrap:function(){return Fe.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,f=l/Math.cos(Math.PI/180*this.lat);return we([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function re(i,l,f){return i instanceof oe?i:Y(i)&&typeof i[0]!="object"?i.length===3?new oe(i[0],i[1],i[2]):i.length===2?new oe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new oe(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new oe(i,l,f)}var Le={latLngToPoint:function(i,l){var f=this.projection.project(i),_=this.scale(l);return this.transformation._transform(f,_)},pointToLatLng:function(i,l){var f=this.scale(l),_=this.transformation.untransform(i,f);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(i),_=this.transformation.transform(l.min,f),C=this.transformation.transform(l.max,f);return new D(_,C)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?T(i.lng,this.wrapLng,!0):i.lng,f=this.wrapLat?T(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new oe(f,l,_)},wrapLatLngBounds:function(i){var l=i.getCenter(),f=this.wrapLatLng(l),_=l.lat-f.lat,C=l.lng-f.lng;if(_===0&&C===0)return i;var N=i.getSouthWest(),M=i.getNorthEast(),U=new oe(N.lat-_,N.lng-C),G=new oe(M.lat-_,M.lng-C);return new _e(U,G)}},Fe=u({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var f=Math.PI/180,_=i.lat*f,C=l.lat*f,N=Math.sin((l.lat-i.lat)*f/2),M=Math.sin((l.lng-i.lng)*f/2),U=N*N+Math.cos(_)*Math.cos(C)*M*M,G=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*G}}),We=6378137,_t={R:We,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,f=this.MAX_LATITUDE,_=Math.max(Math.min(f,i.lat),-f),C=Math.sin(_*l);return new J(this.R*i.lng*l,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(i){var l=180/Math.PI;return new oe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=We*Math.PI;return new D([-i,-i],[i,i])})()};function mi(i,l,f,_){if(Y(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=f,this._d=_}mi.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new J((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function gi(i,l,f,_){return new mi(i,l,f,_)}var _i=u({},Fe,{code:"EPSG:3857",projection:_t,transformation:(function(){var i=.5/(Math.PI*_t.R);return gi(i,.5,-i,.5)})()}),Fr=u({},_i,{code:"EPSG:900913"});function Ur(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function zr(i,l){var f="",_,C,N,M,U,G;for(_=0,N=i.length;_<N;_++){for(U=i[_],C=0,M=U.length;C<M;C++)G=U[C],f+=(C?"L":"M")+G.x+" "+G.y;f+=l?ye.svg?"z":"x":""}return f||"M0 0"}var to=document.documentElement.style,no="ActiveXObject"in window,Br=no&&!document.addEventListener,vi="msLaunchUri"in navigator&&!("documentMode"in document),kn=wt("webkit"),Fo=wt("android"),Vr=wt("android 2")||wt("android 3"),Os=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ws=Fo&&wt("Google")&&Os<537&&!("AudioNode"in window),Uo=!!window.opera,zo=!vi&&wt("chrome"),io=wt("gecko")&&!kn&&!Uo&&!no,Zs=!zo&&wt("safari"),yi=wt("phantom"),wi="OTransition"in to,Aa=navigator.platform.indexOf("Win")===0,br=no&&"transition"in to,Bo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vr,Js="MozPerspective"in to,Hr=!window.L_DISABLE_3D&&(br||Bo||Js)&&!wi&&!yi,qn=typeof orientation<"u"||wt("mobile"),Gr=qn&&kn,qr=qn&&Bo,Vo=!window.PointerEvent&&window.MSPointerEvent,On=!!(window.PointerEvent||Vo),Wn="ontouchstart"in window||!!window.TouchEvent,Ks=!window.L_NO_TOUCH&&(Wn||On),$s=qn&&Uo,Ys=qn&&io,Qs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xs=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",P,l),window.removeEventListener("testPassiveEventSupport",P,l)}catch{}return i})(),Or=(function(){return!!document.createElement("canvas").getContext})(),bo=!!(document.createElementNS&&Ur("svg").createSVGRect),oo=!!bo&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Wr=!bo&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),ro=navigator.platform.indexOf("Mac")===0,Ma=navigator.platform.indexOf("Linux")===0;function wt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ye={ie:no,ielt9:Br,edge:vi,webkit:kn,android:Fo,android23:Vr,androidStock:Ws,opera:Uo,chrome:zo,gecko:io,safari:Zs,phantom:yi,opera12:wi,win:Aa,ie3d:br,webkit3d:Bo,gecko3d:Js,any3d:Hr,mobile:qn,mobileWebkit:Gr,mobileWebkit3d:qr,msPointer:Vo,pointer:On,touch:Ks,touchNative:Wn,mobileOpera:$s,mobileGecko:Ys,retina:Qs,passiveEvents:Xs,canvas:Or,svg:bo,vml:Wr,inlineSvg:oo,mac:ro,linux:Ma},so=ye.msPointer?"MSPointerDown":"pointerdown",Ho=ye.msPointer?"MSPointerMove":"pointermove",js=ye.msPointer?"MSPointerUp":"pointerup",el=ye.msPointer?"MSPointerCancel":"pointercancel",Zr={touchstart:so,touchmove:Ho,touchend:js,touchcancel:el},An={touchstart:tt,touchmove:Go,touchend:Go,touchcancel:Go},Zn={},Jr=!1;function Ra(i,l,f){return l==="touchstart"&&La(),An[l]?(f=An[l].bind(this,f),i.addEventListener(Zr[l],f,!1),f):(console.warn("wrong event specified:",l),P)}function tl(i,l,f){if(!Zr[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Zr[l],f,!1)}function nl(i){Zn[i.pointerId]=i}function il(i){Zn[i.pointerId]&&(Zn[i.pointerId]=i)}function Kr(i){delete Zn[i.pointerId]}function La(){Jr||(document.addEventListener(so,nl,!0),document.addEventListener(Ho,il,!0),document.addEventListener(js,Kr,!0),document.addEventListener(el,Kr,!0),Jr=!0)}function Go(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in Zn)l.touches.push(Zn[f]);l.changedTouches=[l],i(l)}}function tt(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&nt(l),Go(i,l)}function Da(i){var l={},f,_;for(_ in i)f=i[_],l[_]=f&&f.bind?f.bind(i):f;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var $r=200;function ol(i,l){i.addEventListener("dblclick",l);var f=0,_;function C(N){if(N.detail!==1){_=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var M=$n(N);if(!(M.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!M.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var U=Date.now();U-f<=$r?(_++,_===2&&l(Da(N))):_=1,f=U}}}return i.addEventListener("click",C),{dblclick:l,simDblclick:C}}function qo(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Yr=Si(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xi=Si(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lo=xi==="webkitTransition"||xi==="OTransition"?xi+"End":"transitionend";function Ot(i){return typeof i=="string"?document.getElementById(i):i}function ao(i,l){var f=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);f=_?_[l]:null}return f==="auto"?null:f}function Re(i,l,f){var _=document.createElement(i);return _.className=l||"",f&&f.appendChild(_),_}function Ye(i){var l=i.parentNode;l&&l.removeChild(i)}function Oo(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ti(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function gn(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Ci(i,l){if(i.classList!==void 0)return i.classList.contains(l);var f=Wo(i);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}function Me(i,l){if(i.classList!==void 0)for(var f=b(l),_=0,C=f.length;_<C;_++)i.classList.add(f[_]);else if(!Ci(i,l)){var N=Wo(i);Qr(i,(N?N+" ":"")+l)}}function Ke(i,l){i.classList!==void 0?i.classList.remove(l):Qr(i,A((" "+Wo(i)+" ").replace(" "+l+" "," ")))}function Qr(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Wo(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function xt(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&rl(i,l)}function rl(i,l){var f=!1,_="DXImageTransform.Microsoft.Alpha";try{f=i.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):i.style.filter+=" progid:"+_+"(opacity="+l+")"}function Si(i){for(var l=document.documentElement.style,f=0;f<i.length;f++)if(i[f]in l)return i[f];return!1}function Wt(i,l,f){var _=l||new J(0,0);i.style[Yr]=(ye.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(f?" scale("+f+")":"")}function rt(i,l){i._leaflet_pos=l,ye.any3d?Wt(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function _n(i){return i._leaflet_pos||new J(0,0)}var be,Ei,Zo;if("onselectstart"in document)be=function(){Ne(window,"selectstart",nt)},Ei=function(){Ze(window,"selectstart",nt)};else{var Jn=Si(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);be=function(){if(Jn){var i=document.documentElement.style;Zo=i[Jn],i[Jn]="none"}},Ei=function(){Jn&&(document.documentElement.style[Jn]=Zo,Zo=void 0)}}function Jo(){Ne(window,"dragstart",nt)}function Ko(){Ze(window,"dragstart",nt)}var uo,co;function Pi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Zt(),uo=i,co=i.style.outlineStyle,i.style.outlineStyle="none",Ne(window,"keydown",Zt))}function Zt(){uo&&(uo.style.outlineStyle=co,uo=void 0,co=void 0,Ze(window,"keydown",Zt))}function vn(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function nn(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var fo={__proto__:null,TRANSFORM:Yr,TRANSITION:xi,TRANSITION_END:lo,get:Ot,getStyle:ao,create:Re,remove:Ye,empty:Oo,toFront:Ti,toBack:gn,hasClass:Ci,addClass:Me,removeClass:Ke,setClass:Qr,getClass:Wo,setOpacity:xt,testProp:Si,setTransform:Wt,setPosition:rt,getPosition:_n,get disableTextSelection(){return be},get enableTextSelection(){return Ei},disableImageDrag:Jo,enableImageDrag:Ko,preventOutline:Pi,restoreOutline:Zt,getSizedParentNode:vn,getScale:nn};function Ne(i,l,f,_){if(l&&typeof l=="object")for(var C in l)jr(i,C,l[C],f);else{l=b(l);for(var N=0,M=l.length;N<M;N++)jr(i,l[N],f,_)}return this}var ct="_leaflet_events";function Ze(i,l,f,_){if(arguments.length===1)Xr(i),delete i[ct];else if(l&&typeof l=="object")for(var C in l)$o(i,C,l[C],f);else if(l=b(l),arguments.length===2)Xr(i,function(U){return se(l,U)!==-1});else for(var N=0,M=l.length;N<M;N++)$o(i,l[N],f,_);return this}function Xr(i,l){for(var f in i[ct]){var _=f.split(/\d/)[0];(!l||l(_))&&$o(i,_,null,null,f)}}var Kn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function jr(i,l,f,_){var C=l+y(f)+(_?"_"+y(_):"");if(i[ct]&&i[ct][C])return this;var N=function(U){return f.call(_||i,U||window.event)},M=N;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?N=Ra(i,l,N):ye.touch&&l==="dblclick"?N=ol(i,N):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Kn[l]||l,N,ye.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(N=function(U){U=U||window.event,mo(i,U)&&M(U)},i.addEventListener(Kn[l],N,!1)):i.addEventListener(l,M,!1):i.attachEvent("on"+l,N),i[ct]=i[ct]||{},i[ct][C]=N}function $o(i,l,f,_,C){C=C||l+y(f)+(_?"_"+y(_):"");var N=i[ct]&&i[ct][C];if(!N)return this;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?tl(i,l,N):ye.touch&&l==="dblclick"?qo(i,N):"removeEventListener"in i?i.removeEventListener(Kn[l]||l,N,!1):i.detachEvent("on"+l,N),i[ct][C]=null}function on(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Yo(i){return jr(i,"wheel",on),this}function ho(i){return Ne(i,"mousedown touchstart dblclick contextmenu",on),i._leaflet_disable_click=!0,this}function nt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Jt(i){return nt(i),on(i),this}function $n(i){if(i.composedPath)return i.composedPath();for(var l=[],f=i.target;f;)l.push(f),f=f.parentNode;return l}function po(i,l){if(!l)return new J(i.clientX,i.clientY);var f=nn(l),_=f.boundingClientRect;return new J((i.clientX-_.left)/f.x-l.clientLeft,(i.clientY-_.top)/f.y-l.clientTop)}var Fa=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function sl(i){return ye.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Fa:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function mo(i,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==i;)f=f.parentNode}catch{return!1}return f!==i}var Qo={__proto__:null,on:Ne,off:Ze,stopPropagation:on,disableScrollPropagation:Yo,disableClickPropagation:ho,preventDefault:nt,stop:Jt,getPropagationPath:$n,getMousePosition:po,getWheelDelta:sl,isExternalTarget:mo,addListener:Ne,removeListener:Ze},Xo=ze.extend({run:function(i,l,f,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=_n(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Se(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var f=this._startPos.add(this._offset.multiplyBy(i));l&&f._round(),rt(this._el,f),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ve=ze.extend({options:{crs:_i,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=B(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(re(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xi&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,lo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(re(i),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=u({animate:f.animate},f.zoom),f.pan=u({animate:f.animate,duration:f.duration},f.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,f.zoom):this._tryAnimatedPan(i,f.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,f){var _=this.getZoomScale(l),C=this.getSize().divideBy(2),N=i instanceof J?i:this.latLngToContainerPoint(i),M=N.subtract(C).multiplyBy(1-1/_),U=this.containerPointToLatLng(C.add(M));return this.setView(U,l,{zoom:f})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():we(i);var f=H(l.paddingTopLeft||l.padding||[0,0]),_=H(l.paddingBottomRight||l.padding||[0,0]),C=this.getBoundsZoom(i,!1,f.add(_));if(C=typeof l.maxZoom=="number"?Math.min(l.maxZoom,C):C,C===1/0)return{center:i.getCenter(),zoom:C};var N=_.subtract(f).divideBy(2),M=this.project(i.getSouthWest(),C),U=this.project(i.getNorthEast(),C),G=this.unproject(M.add(U).divideBy(2).add(N),C);return{center:G,zoom:C}},fitBounds:function(i,l){if(i=we(i),!i.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(i,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=H(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Me(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,f){if(f=f||{},f.animate===!1||!ye.any3d)return this.setView(i,l,f);this._stop();var _=this.project(this.getCenter()),C=this.project(i),N=this.getSize(),M=this._zoom;i=re(i),l=l===void 0?M:l;var U=Math.max(N.x,N.y),G=U*this.getZoomScale(M,l),$=C.distanceTo(_)||1,ae=1.42,Ce=ae*ae;function De(Oe){var Hi=Oe?-1:1,$a=Oe?G:U,Ya=G*G-U*U+Hi*Ce*Ce*$*$,ni=2*$a*Ce*$,ii=Ya/ni,oi=Math.sqrt(ii*ii+1)-ii,fr=oi<1e-9?-18:Math.log(oi);return fr}function dt(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function at(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}function Mt(Oe){return dt(Oe)/at(Oe)}var Ct=De(0);function Vi(Oe){return U*(at(Ct)/at(Ct+ae*Oe))}function ws(Oe){return U*(at(Ct)*Mt(Ct+ae*Oe)-dt(Ct))/Ce}function Bn(Oe){return 1-Math.pow(1-Oe,1.5)}var Il=Date.now(),ti=(De(1)-Ct)/ae,an=f.duration?1e3*f.duration:1e3*ti*.8;function bi(){var Oe=(Date.now()-Il)/an,Hi=Bn(Oe)*ti;Oe<=1?(this._flyToFrame=Se(bi,this),this._move(this.unproject(_.add(C.subtract(_).multiplyBy(ws(Hi)/$)),M),this.getScaleZoom(U/Vi(Hi),M),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),bi.call(this),this},flyToBounds:function(i,l){var f=this._getBoundsCenterZoom(i,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(i){return i=we(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var f=this.getCenter(),_=this._limitCenter(f,this._zoom,we(i));return f.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var f=H(l.paddingTopLeft||l.padding||[0,0]),_=H(l.paddingBottomRight||l.padding||[0,0]),C=this.project(this.getCenter()),N=this.project(i),M=this.getPixelBounds(),U=W([M.min.add(f),M.max.subtract(_)]),G=U.getSize();if(!U.contains(N)){this._enforcingBounds=!0;var $=N.subtract(U.getCenter()),ae=U.extend(N).getSize().subtract(G);C.x+=$.x<0?-ae.x:ae.x,C.y+=$.y<0?-ae.y:ae.y,this.panTo(this.unproject(C),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=u({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),_=l.divideBy(2).round(),C=f.divideBy(2).round(),N=_.subtract(C);return!N.x&&!N.y?this:(i.animate&&i.pan?this.panBy(N):(i.pan&&this._rawPanBy(N),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=u({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=m(this._handleGeolocationResponse,this),f=m(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,i):navigator.geolocation.getCurrentPosition(l,f,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,f=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,f=i.coords.longitude,_=new oe(l,f),C=_.toBounds(i.coords.accuracy*2),N=this._locateOptions;if(N.setView){var M=this.getBoundsZoom(C);this.setView(_,N.maxZoom?Math.min(M,N.maxZoom):M)}var U={latlng:_,bounds:C,timestamp:i.timestamp};for(var G in i.coords)typeof i.coords[G]=="number"&&(U[G]=i.coords[G]);this.fire("locationfound",U)}},addHandler:function(i,l){if(!l)return this;var f=this[i]=new l(this);return this._handlers.push(f),this.options[i]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ye(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Ye(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var f="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=Re("div",f,l||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),f=this.unproject(i.getTopRight());return new _e(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,f){i=we(i),f=H(f||[0,0]);var _=this.getZoom()||0,C=this.getMinZoom(),N=this.getMaxZoom(),M=i.getNorthWest(),U=i.getSouthEast(),G=this.getSize().subtract(f),$=W(this.project(U,_),this.project(M,_)).getSize(),ae=ye.any3d?this.options.zoomSnap:1,Ce=G.x/$.x,De=G.y/$.y,dt=l?Math.max(Ce,De):Math.min(Ce,De);return _=this.getScaleZoom(dt,_),ae&&(_=Math.round(_/(ae/100))*(ae/100),_=l?Math.ceil(_/ae)*ae:Math.floor(_/ae)*ae),Math.max(C,Math.min(N,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var f=this._getTopLeftPoint(i,l);return new D(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(i)/f.scale(l)},getScaleZoom:function(i,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var _=f.zoom(i*f.scale(l));return isNaN(_)?1/0:_},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(re(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(H(i),l)},layerPointToLatLng:function(i){var l=H(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(re(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(re(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(we(i))},distance:function(i,l){return this.options.crs.distance(re(i),re(l))},containerPointToLayerPoint:function(i){return H(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return H(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(H(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(i)))},mouseEventToContainerPoint:function(i){return po(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=Ot(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(l,"scroll",this._onScroll,this),this._containerId=y(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,Me(i,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=ao(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rt(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(i.markerPane,"leaflet-zoom-hide"),Me(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,f){rt(this._mapPane,new J(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var C=this._zoom!==l;this._moveStart(C,f)._move(i,l)._moveEnd(C),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,f,_){l===void 0&&(l=this._zoom);var C=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?f&&f.pinch&&this.fire("zoom",f):((C||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){rt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[y(this._container)]=this;var l=i?Ze:Ne;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=Se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var f=[],_,C=l==="mouseout"||l==="mouseover",N=i.target||i.srcElement,M=!1;N;){if(_=this._targets[y(N)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){M=!0;break}if(_&&_.listens(l,!0)&&(C&&!mo(N,i)||(f.push(_),C))||N===this._container)break;N=N.parentNode}return!f.length&&!M&&!C&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var f=i.type;f==="mousedown"&&Pi(l),this._fireDOMEvent(i,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,f){if(i.type==="click"){var _=u({},i);_.type="preclick",this._fireDOMEvent(_,_.type,f)}var C=this._findEventTargets(i,l);if(f){for(var N=[],M=0;M<f.length;M++)f[M].listens(l,!0)&&N.push(f[M]);C=N.concat(C)}if(C.length){l==="contextmenu"&&nt(i);var U=C[0],G={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var $=U.getLatLng&&(!U._radius||U._radius<=10);G.containerPoint=$?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(i),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=$?U.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(M=0;M<C.length;M++)if(C[M].fire(l,G,!0),G.originalEvent._stopped||C[M].options.bubblingMouseEvents===!1&&se(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return _n(this._mapPane)||new J(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var f=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var f=this.getSize()._divideBy(2);return this.project(i,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,f){var _=this._getNewPixelOrigin(f,l);return this.project(i,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,l,f){var _=this._getNewPixelOrigin(f,l);return W([this.project(i.getSouthWest(),l)._subtract(_),this.project(i.getNorthWest(),l)._subtract(_),this.project(i.getSouthEast(),l)._subtract(_),this.project(i.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,f){if(!f)return i;var _=this.project(i,l),C=this.getSize().divideBy(2),N=new D(_.subtract(C),_.add(C)),M=this._getBoundsOffset(N,f,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(_.add(M),l)},_limitOffset:function(i,l){if(!l)return i;var f=this.getPixelBounds(),_=new D(f.min.add(i),f.max.add(i));return i.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(i,l,f){var _=W(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),C=_.min.subtract(i.min),N=_.max.subtract(i.max),M=this._rebound(C.x,-N.x),U=this._rebound(C.y,-N.y);return new J(M,U)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),f=this.getMaxZoom(),_=ye.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(l,Math.min(f,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var f=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var i=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var f=Yr,_=this._proxy.style[f];Wt(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ye(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Wt(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),C=this._getCenterOffset(i)._divideBy(1-1/_);return f.animate!==!0&&!this.getSize().contains(C)?!1:(Se(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,f,_){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mn(i,l){return new Ve(i,l)}var kt=Ue.extend({options:{position:"topright"},initialize:function(i){B(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),f=this.getPosition(),_=i._controlCorners[f];return Me(l,"leaflet-control"),f.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ye(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Rn=function(i){return new kt(i)};Ve.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",f=this._controlContainer=Re("div",l+"control-container",this._container);function _(C,N){var M=l+C+" "+l+N;i[C+N]=Re("div",M,f)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Ye(this._controlCorners[i]);Ye(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var es=kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,f,_){return f<_?-1:_<f?1:0}},initialize:function(i,l,f){B(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return kt.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(y(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Re("div",i),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ho(l),Yo(l);var _=this._section=Re("section",i+"-list");f&&(this._map.on("click",this.collapse,this),Ne(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=Re("a",i+"-toggle",l);C.href="#",C.title="Layers",C.setAttribute("role","button"),Ne(C,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){nt(N),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Re("div",i+"-base",_),this._separator=Re("div",i+"-separator",_),this._overlaysList=Re("div",i+"-overlays",_),l.appendChild(_)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&y(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,f){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(m(function(_,C){return this.options.sortFunction(_.layer,C.layer,_.name,C.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Oo(this._baseLayersList),Oo(this._overlaysList),this._layerControlInputs=[];var i,l,f,_,C=0;for(f=0;f<this._layers.length;f++)_=this._layers[f],this._addItem(_),l=l||_.overlay,i=i||!_.overlay,C+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&C>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(y(i.target)),f=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(i,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=f,_.firstChild},_addItem:function(i){var l=document.createElement("label"),f=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=f):_=this._createRadioElement("leaflet-base-layers_"+y(this),f),this._layerControlInputs.push(_),_.layerId=y(i.layer),Ne(_,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+i.name;var N=document.createElement("span");l.appendChild(N),N.appendChild(_),N.appendChild(C);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,f,_=[],C=[];this._handlingClick=!0;for(var N=i.length-1;N>=0;N--)l=i[N],f=this._getLayer(l.layerId).layer,l.checked?_.push(f):l.checked||C.push(f);for(N=0;N<C.length;N++)this._map.hasLayer(C[N])&&this._map.removeLayer(C[N]);for(N=0;N<_.length;N++)this._map.hasLayer(_[N])||this._map.addLayer(_[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,f,_=this._map.getZoom(),C=i.length-1;C>=0;C--)l=i[C],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&_<f.options.minZoom||f.options.maxZoom!==void 0&&_>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ne(i,"click",nt),this.expand();var l=this;setTimeout(function(){Ze(i,"click",nt),l._preventClick=!1})}}),jo=function(i,l,f){return new es(i,l,f)},Ii=kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",f=Re("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,f,_,C){var N=Re("a",f,_);return N.innerHTML=i,N.href="#",N.title=l,N.setAttribute("role","button"),N.setAttribute("aria-label",l),ho(N),Ne(N,"click",Jt),Ne(N,"click",C,this),Ne(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";Ke(this._zoomInButton,l),Ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Me(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Me(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ii,this.addControl(this.zoomControl))});var ll=function(i){return new Ii(i)},Tt=kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",f=Re("div",l),_=this.options;return this._addScales(_,l+"-line",f),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),f},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,f){i.metric&&(this._mScale=Re("div",l,f)),i.imperial&&(this._iScale=Re("div",l,f))},_update:function(){var i=this._map,l=i.getSize().y/2,f=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/i)},_updateImperial:function(i){var l=i*3.2808399,f,_,C;l>5280?(f=l/5280,_=this._getRoundNum(f),this._updateScale(this._iScale,_+" mi",_/f)):(C=this._getRoundNum(l),this._updateScale(this._iScale,C+" ft",C/l))},_updateScale:function(i,l,f){i.style.width=Math.round(this.options.maxWidth*f)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),f=i/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),Ni=function(i){return new Tt(i)},ts='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yn=kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?ts+" ":"")+"Leaflet</a>"},initialize:function(i){B(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),ho(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),i.length&&f.push(i.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&new Yn().addTo(this)});var Ua=function(i){return new Yn(i)};kt.Layers=es,kt.Zoom=Ii,kt.Scale=Tt,kt.Attribution=Yn,Rn.layers=jo,Rn.zoom=ll,Rn.scale=Ni,Rn.attribution=Ua;var Ft=Ue.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ft.addTo=function(i,l){return i.addHandler(l,this),this};var ns={Events:Ae},ki=ye.touch?"touchstart mousedown":"mousedown",Kt=ze.extend({options:{clickTolerance:3},initialize:function(i,l,f,_){B(this,_),this._element=i,this._dragStartTarget=l||i,this._preventOutline=f},enable:function(){this._enabled||(Ne(this._dragStartTarget,ki,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Kt._dragging===this&&this.finishDrag(!0),Ze(this._dragStartTarget,ki,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Ci(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Kt._dragging===this&&this.finishDrag();return}if(!(Kt._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Kt._dragging=this,this._preventOutline&&Pi(this._element),Jo(),be(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,f=vn(this._element);this._startPoint=new J(l.clientX,l.clientY),this._startPos=_n(this._element),this._parentScale=nn(f);var _=i.type==="mousedown";Ne(document,_?"mousemove":"touchmove",this._onMove,this),Ne(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,f=new J(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,nt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Me(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),rt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ze(document,"mousemove touchmove",this._onMove,this),Ze(document,"mouseup touchend touchcancel",this._onUp,this),Ko(),Ei();var l=this._moved&&this._moving;this._moving=!1,Kt._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function is(i,l,f){var _,C=[1,4,2,8],N,M,U,G,$,ae,Ce,De;for(N=0,ae=i.length;N<ae;N++)i[N]._code=Qn(i[N],l);for(U=0;U<4;U++){for(Ce=C[U],_=[],N=0,ae=i.length,M=ae-1;N<ae;M=N++)G=i[N],$=i[M],G._code&Ce?$._code&Ce||(De=tr($,G,Ce,l,f),De._code=Qn(De,l),_.push(De)):($._code&Ce&&(De=tr($,G,Ce,l,f),De._code=Qn(De,l),_.push(De)),_.push(G));i=_}return i}function al(i,l){var f,_,C,N,M,U,G,$,ae;if(!i||i.length===0)throw new Error("latlngs not passed");Ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ce=re([0,0]),De=we(i),dt=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());dt<1700&&(Ce=os(i));var at=i.length,Mt=[];for(f=0;f<at;f++){var Ct=re(i[f]);Mt.push(l.project(re([Ct.lat-Ce.lat,Ct.lng-Ce.lng])))}for(U=G=$=0,f=0,_=at-1;f<at;_=f++)C=Mt[f],N=Mt[_],M=C.y*N.x-N.y*C.x,G+=(C.x+N.x)*M,$+=(C.y+N.y)*M,U+=M*3;U===0?ae=Mt[0]:ae=[G/U,$/U];var Vi=l.unproject(H(ae));return re([Vi.lat+Ce.lat,Vi.lng+Ce.lng])}function os(i){for(var l=0,f=0,_=0,C=0;C<i.length;C++){var N=re(i[C]);l+=N.lat,f+=N.lng,_++}return re([l/_,f/_])}var za={__proto__:null,clipPolygon:is,polygonCenter:al,centroid:os};function er(i,l){if(!l||!i.length)return i.slice();var f=l*l;return i=ba(i,f),i=Va(i,f),i}function ul(i,l,f){return Math.sqrt(Xn(i,l,f,!0))}function Ba(i,l,f){return Xn(i,l,f)}function Va(i,l){var f=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,C=new _(f);C[0]=C[f-1]=1,rs(i,C,l,0,f-1);var N,M=[];for(N=0;N<f;N++)C[N]&&M.push(i[N]);return M}function rs(i,l,f,_,C){var N=0,M,U,G;for(U=_+1;U<=C-1;U++)G=Xn(i[U],i[_],i[C],!0),G>N&&(M=U,N=G);N>f&&(l[M]=1,rs(i,l,f,_,M),rs(i,l,f,M,C))}function ba(i,l){for(var f=[i[0]],_=1,C=0,N=i.length;_<N;_++)Ha(i[_],i[C])>l&&(f.push(i[_]),C=_);return C<N-1&&f.push(i[N-1]),f}var ss;function cl(i,l,f,_,C){var N=_?ss:Qn(i,f),M=Qn(l,f),U,G,$;for(ss=M;;){if(!(N|M))return[i,l];if(N&M)return!1;U=N||M,G=tr(i,l,U,f,C),$=Qn(G,f),U===N?(i=G,N=$):(l=G,M=$)}}function tr(i,l,f,_,C){var N=l.x-i.x,M=l.y-i.y,U=_.min,G=_.max,$,ae;return f&8?($=i.x+N*(G.y-i.y)/M,ae=G.y):f&4?($=i.x+N*(U.y-i.y)/M,ae=U.y):f&2?($=G.x,ae=i.y+M*(G.x-i.x)/N):f&1&&($=U.x,ae=i.y+M*(U.x-i.x)/N),new J($,ae,C)}function Qn(i,l){var f=0;return i.x<l.min.x?f|=1:i.x>l.max.x&&(f|=2),i.y<l.min.y?f|=4:i.y>l.max.y&&(f|=8),f}function Ha(i,l){var f=l.x-i.x,_=l.y-i.y;return f*f+_*_}function Xn(i,l,f,_){var C=l.x,N=l.y,M=f.x-C,U=f.y-N,G=M*M+U*U,$;return G>0&&($=((i.x-C)*M+(i.y-N)*U)/G,$>1?(C=f.x,N=f.y):$>0&&(C+=M*$,N+=U*$)),M=i.x-C,U=i.y-N,_?M*M+U*U:new J(C,N)}function Ut(i){return!Y(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function dl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(i)}function fl(i,l){var f,_,C,N,M,U,G,$;if(!i||i.length===0)throw new Error("latlngs not passed");Ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ae=re([0,0]),Ce=we(i),De=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());De<1700&&(ae=os(i));var dt=i.length,at=[];for(f=0;f<dt;f++){var Mt=re(i[f]);at.push(l.project(re([Mt.lat-ae.lat,Mt.lng-ae.lng])))}for(f=0,_=0;f<dt-1;f++)_+=at[f].distanceTo(at[f+1])/2;if(_===0)$=at[0];else for(f=0,N=0;f<dt-1;f++)if(M=at[f],U=at[f+1],C=M.distanceTo(U),N+=C,N>_){G=(N-_)/C,$=[U.x-G*(U.x-M.x),U.y-G*(U.y-M.y)];break}var Ct=l.unproject(H($));return re([Ct.lat+ae.lat,Ct.lng+ae.lng])}var hl={__proto__:null,simplify:er,pointToSegmentDistance:ul,closestPointOnSegment:Ba,clipSegment:cl,_getEdgeIntersection:tr,_getBitCode:Qn,_sqClosestPointOnSegment:Xn,isFlat:Ut,_flat:dl,polylineCenter:fl},ls={project:function(i){return new J(i.lng,i.lat)},unproject:function(i){return new oe(i.y,i.x)},bounds:new D([-180,-90],[180,90])},as={R:6378137,R_MINOR:6356752314245179e-9,bounds:new D([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,f=this.R,_=i.lat*l,C=this.R_MINOR/f,N=Math.sqrt(1-C*C),M=N*Math.sin(_),U=Math.tan(Math.PI/4-_/2)/Math.pow((1-M)/(1+M),N/2);return _=-f*Math.log(Math.max(U,1e-10)),new J(i.lng*l*f,_)},unproject:function(i){for(var l=180/Math.PI,f=this.R,_=this.R_MINOR/f,C=Math.sqrt(1-_*_),N=Math.exp(-i.y/f),M=Math.PI/2-2*Math.atan(N),U=0,G=.1,$;U<15&&Math.abs(G)>1e-7;U++)$=C*Math.sin(M),$=Math.pow((1-$)/(1+$),C/2),G=Math.PI/2-2*Math.atan(N*$)-M,M+=G;return new oe(M*l,i.x*l/f)}},Ga={__proto__:null,LonLat:ls,Mercator:as,SphericalMercator:_t},qa=u({},Fe,{code:"EPSG:3395",projection:as,transformation:(function(){var i=.5/(Math.PI*as.R);return gi(i,.5,-i,.5)})()}),pl=u({},Fe,{code:"EPSG:4326",projection:ls,transformation:gi(1/180,1,-1/180,.5)}),Oa=u({},Le,{projection:ls,transformation:gi(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var f=l.lng-i.lng,_=l.lat-i.lat;return Math.sqrt(f*f+_*_)},infinite:!0});Le.Earth=Fe,Le.EPSG3395=qa,Le.EPSG3857=_i,Le.EPSG900913=Fr,Le.EPSG4326=pl,Le.Simple=Oa;var $t=ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[y(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[y(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=y(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=y(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return y(i)in this._layers},eachLayer:function(i,l){for(var f in this._layers)i.call(l,this._layers[f]);return this},_addLayers:function(i){i=i?Y(i)?i:[i]:[];for(var l=0,f=i.length;l<f;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[y(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=y(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,f=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var C=this._zoomBoundLayers[_].options;i=C.minZoom===void 0?i:Math.min(i,C.minZoom),l=C.maxZoom===void 0?l:Math.max(l,C.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ln=$t.extend({initialize:function(i,l){B(this,l),this._layers={};var f,_;if(i)for(f=0,_=i.length;f<_;f++)this.addLayer(i[f])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),f,_;for(f in this._layers)_=this._layers[f],_[i]&&_[i].apply(_,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var f in this._layers)i.call(l,this._layers[f]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return y(i)}}),go=function(i,l){return new Ln(i,l)},yn=Ln.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Ln.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Ln.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new _e;for(var l in this._layers){var f=this._layers[l];i.extend(f.getBounds?f.getBounds():f.getLatLng())}return i}}),ml=function(i,l){return new yn(i,l)},jn=Ue.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){B(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var f=this._getIconUrl(i);if(!f){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,l){var f=this.options,_=f[l+"Size"];typeof _=="number"&&(_=[_,_]);var C=H(_),N=H(l==="shadow"&&f.shadowAnchor||f.iconAnchor||C&&C.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(f.className||""),N&&(i.style.marginLeft=-N.x+"px",i.style.marginTop=-N.y+"px"),C&&(i.style.width=C.x+"px",i.style.height=C.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ye.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function gl(i){return new jn(i)}var Ai=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ai.imagePath!="string"&&(Ai.imagePath=this._detectIconPath()),(this.options.imagePath||Ai.imagePath)+jn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(f,_,C){var N=_.exec(f);return N&&N[C]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Re("div","leaflet-default-icon-path",document.body),l=ao(i,"background-image")||ao(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),us=Ft.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Kt(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,f=l._map,_=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,N=_n(l._icon),M=f.getPixelBounds(),U=f.getPixelOrigin(),G=W(M.min._subtract(U).add(C),M.max._subtract(U).subtract(C));if(!G.contains(N)){var $=H((Math.max(G.max.x,N.x)-G.max.x)/(M.max.x-G.max.x)-(Math.min(G.min.x,N.x)-G.min.x)/(M.min.x-G.min.x),(Math.max(G.max.y,N.y)-G.max.y)/(M.max.y-G.max.y)-(Math.min(G.min.y,N.y)-G.min.y)/(M.min.y-G.min.y)).multiplyBy(_);f.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),rt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Se(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=Se(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,f=l._shadow,_=_n(l._icon),C=l._map.layerPointToLatLng(_);f&&rt(f,_),l._latlng=C,i.latlng=C,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),wn=$t.extend({options:{icon:new Ai,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){B(this,l),this._latlng=re(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=re(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=i.icon.createIcon(this._icon),_=!1;f!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(f.title=i.title),f.tagName==="IMG"&&(f.alt=i.alt||"")),Me(f,l),i.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(f,"focus",this._panOnFocus,this);var C=i.icon.createShadow(this._shadow),N=!1;C!==this._shadow&&(this._removeShadow(),N=!0),C&&(Me(C,l),C.alt=""),this._shadow=C,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&N&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(this._icon,"focus",this._panOnFocus,this),Ye(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ye(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&rt(this._icon,i),this._shadow&&rt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),us)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new us(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&xt(this._icon,i),this._shadow&&xt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,f=l.iconSize?H(l.iconSize):H(0,0),_=l.iconAnchor?H(l.iconAnchor):H(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:f.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Wa(i,l){return new wn(i,l)}var Dn=$t.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return B(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nr=Dn.extend({options:{fill:!0,radius:10},initialize:function(i,l){B(this,l),this._latlng=re(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=re(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Dn.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,f=this._clickTolerance(),_=[i+f,l+f];this._pxBounds=new D(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _l(i,l){return new nr(i,l)}var ir=nr.extend({initialize:function(i,l,f){if(typeof l=="number"&&(l=u({},f,{radius:l})),B(this,l),this._latlng=re(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new _e(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Dn.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,f=this._map,_=f.options.crs;if(_.distance===Fe.distance){var C=Math.PI/180,N=this._mRadius/Fe.R/C,M=f.project([l+N,i]),U=f.project([l-N,i]),G=M.add(U).divideBy(2),$=f.unproject(G).lat,ae=Math.acos((Math.cos(N*C)-Math.sin(l*C)*Math.sin($*C))/(Math.cos(l*C)*Math.cos($*C)))/C;(isNaN(ae)||ae===0)&&(ae=N/Math.cos(Math.PI/180*l)),this._point=G.subtract(f.getPixelOrigin()),this._radius=isNaN(ae)?0:G.x-f.project([$,i-ae]).x,this._radiusY=G.y-M.y}else{var Ce=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ce).x}this._updateBounds()}});function _o(i,l,f){return new ir(i,l,f)}var At=Dn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){B(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,f=null,_=Xn,C,N,M=0,U=this._parts.length;M<U;M++)for(var G=this._parts[M],$=1,ae=G.length;$<ae;$++){C=G[$-1],N=G[$];var Ce=_(i,C,N,!0);Ce<l&&(l=Ce,f=_(i,C,N))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=re(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new _e,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],f=Ut(i),_=0,C=i.length;_<C;_++)f?(l[_]=re(i[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(i[_]);return l},_project:function(){var i=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new J(i,i);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,f){var _=i[0]instanceof oe,C=i.length,N,M;if(_){for(M=[],N=0;N<C;N++)M[N]=this._map.latLngToLayerPoint(i[N]),f.extend(M[N]);l.push(M)}else for(N=0;N<C;N++)this._projectLatlngs(i[N],l,f)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,_,C,N,M,U,G;for(f=0,C=0,N=this._rings.length;f<N;f++)for(G=this._rings[f],_=0,M=G.length;_<M-1;_++)U=cl(G[_],G[_+1],i,_,!0),U&&(l[C]=l[C]||[],l[C].push(U[0]),(U[1]!==G[_+1]||_===M-2)&&(l[C].push(U[1]),C++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,f=0,_=i.length;f<_;f++)i[f]=er(i[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var f,_,C,N,M,U,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(f=0,N=this._parts.length;f<N;f++)for(U=this._parts[f],_=0,M=U.length,C=M-1;_<M;C=_++)if(!(!l&&_===0)&&ul(i,U[C],U[_])<=G)return!0;return!1}});function Za(i,l){return new At(i,l)}At._flat=dl;var xn=At.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return al(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=At.prototype._convertLatLngs.call(this,i),f=l.length;return f>=2&&l[0]instanceof oe&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(i){At.prototype._setLatLngs.call(this,i),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,f=new J(l,l);if(i=new D(i.min.subtract(f),i.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,C=this._rings.length,N;_<C;_++)N=is(this._rings[_],i,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,f,_,C,N,M,U,G,$;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(N=0,G=this._parts.length;N<G;N++)for(f=this._parts[N],M=0,$=f.length,U=$-1;M<$;U=M++)_=f[M],C=f[U],_.y>i.y!=C.y>i.y&&i.x<(C.x-_.x)*(i.y-_.y)/(C.y-_.y)+_.x&&(l=!l);return l||At.prototype._containsPoint.call(this,i,!0)}});function Ja(i,l){return new xn(i,l)}var rn=yn.extend({initialize:function(i,l){B(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=Y(i)?i:i.features,f,_,C;if(l){for(f=0,_=l.length;f<_;f++)C=l[f],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var N=this.options;if(N.filter&&!N.filter(i))return this;var M=Mi(i,N);return M?(M.feature=ar(i),M.defaultOptions=M.options,this.resetStyle(M),N.onEachFeature&&N.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=u({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Mi(i,l){var f=i.type==="Feature"?i.geometry:i,_=f?f.coordinates:null,C=[],N=l&&l.pointToLayer,M=l&&l.coordsToLatLng||rr,U,G,$,ae;if(!_&&!f)return null;switch(f.type){case"Point":return U=M(_),or(N,i,U,l);case"MultiPoint":for($=0,ae=_.length;$<ae;$++)U=M(_[$]),C.push(or(N,i,U,l));return new yn(C);case"LineString":case"MultiLineString":return G=vo(_,f.type==="LineString"?0:1,M),new At(G,l);case"Polygon":case"MultiPolygon":return G=vo(_,f.type==="Polygon"?1:2,M),new xn(G,l);case"GeometryCollection":for($=0,ae=f.geometries.length;$<ae;$++){var Ce=Mi({geometry:f.geometries[$],type:"Feature",properties:i.properties},l);Ce&&C.push(Ce)}return new yn(C);case"FeatureCollection":for($=0,ae=f.features.length;$<ae;$++){var De=Mi(f.features[$],l);De&&C.push(De)}return new yn(C);default:throw new Error("Invalid GeoJSON object.")}}function or(i,l,f,_){return i?i(l,f):new wn(f,_&&_.markersInheritOptions&&_)}function rr(i){return new oe(i[1],i[0],i[2])}function vo(i,l,f){for(var _=[],C=0,N=i.length,M;C<N;C++)M=l?vo(i[C],l-1,f):(f||rr)(i[C]),_.push(M);return _}function sr(i,l){return i=re(i),i.alt!==void 0?[E(i.lng,l),E(i.lat,l),E(i.alt,l)]:[E(i.lng,l),E(i.lat,l)]}function lr(i,l,f,_){for(var C=[],N=0,M=i.length;N<M;N++)C.push(l?lr(i[N],Ut(i[N])?0:l-1,f,_):sr(i[N],_));return!l&&f&&C.length>0&&C.push(C[0].slice()),C}function Ri(i,l){return i.feature?u({},i.feature,{geometry:l}):ar(l)}function ar(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var cs={toGeoJSON:function(i){return Ri(this,{type:"Point",coordinates:sr(this.getLatLng(),i)})}};wn.include(cs),ir.include(cs),nr.include(cs),At.include({toGeoJSON:function(i){var l=!Ut(this._latlngs),f=lr(this._latlngs,l?1:0,!1,i);return Ri(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),xn.include({toGeoJSON:function(i){var l=!Ut(this._latlngs),f=l&&!Ut(this._latlngs[0]),_=lr(this._latlngs,f?2:l?1:0,!0,i);return l||(_=[_]),Ri(this,{type:(f?"Multi":"")+"Polygon",coordinates:_})}}),Ln.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(i).geometry.coordinates)}),Ri(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var f=l==="GeometryCollection",_=[];return this.eachLayer(function(C){if(C.toGeoJSON){var N=C.toGeoJSON(i);if(f)_.push(N.geometry);else{var M=ar(N);M.type==="FeatureCollection"?_.push.apply(_,M.features):_.push(M)}}}),f?Ri(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function vl(i,l){return new rn(i,l)}var Yt=vl,Fn=$t.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,f){this._url=i,this._bounds=we(l),B(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ye(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ti(this._image),this},bringToBack:function(){return this._map&&gn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=we(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Re("img");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onload=m(this.fire,this,"load"),l.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Wt(this._image,f,l)},_reset:function(){var i=this._image,l=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();rt(i,l.min),i.style.width=f.x+"px",i.style.height=f.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),yl=function(i,l,f){return new Fn(i,l,f)},ds=Fn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Re("video");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onloadeddata=m(this.fire,this,"load"),i){for(var f=l.getElementsByTagName("source"),_=[],C=0;C<f.length;C++)_.push(f[C].src);this._url=f.length>0?_:[l.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var M=Re("source");M.src=this._url[N],l.appendChild(M)}}});function wl(i,l,f){return new ds(i,l,f)}var fs=Fn.extend({_initImage:function(){var i=this._image=this._url;Me(i,"leaflet-image-layer"),this._zoomAnimated&&Me(i,"leaflet-zoom-animated"),this.options.className&&Me(i,this.options.className),i.onselectstart=P,i.onmousemove=P}});function hs(i,l,f){return new fs(i,l,f)}var sn=$t.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof oe||Y(i))?(this._latlng=re(i),B(this,l)):(B(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&xt(this._container,1),this.bringToFront(),this.options.interactive&&(Me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(m(Ye,void 0,this._container),200)):Ye(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=re(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ti(this._container),this},bringToBack:function(){return this._map&&gn(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof yn){l=null;var f=this._source._layers;for(var _ in f)if(f[_]._map){l=f[_];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=H(this.options.offset),f=this._getAnchor();this._zoomAnimated?rt(this._container,i.add(f)):l=l.add(i).add(f);var _=this._containerBottom=-l.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});Ve.include({_initOverlay:function(i,l,f,_){var C=l;return C instanceof i||(C=new i(_).setContent(l)),f&&C.setLatLng(f),C}}),$t.include({_initOverlay:function(i,l,f,_){var C=f;return C instanceof i?(B(C,_),C._source=this):(C=l&&!_?l:new i(_,this),C.setContent(f)),C}});var ur=sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,sn.prototype.openOn.call(this,i)},onAdd:function(i){sn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dn||this._source.on("preclick",on))},onRemove:function(i){sn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dn||this._source.off("preclick",on))},getEvents:function(){var i=sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Re("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Re("div",i+"-content-wrapper",l);if(this._contentNode=Re("div",i+"-content",f),ho(l),Yo(this._contentNode),Ne(l,"contextmenu",on),this._tipContainer=Re("div",i+"-tip-container",l),this._tip=Re("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Re("a",i+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(_,"click",function(C){nt(C),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var f=i.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var _=i.offsetHeight,C=this.options.maxHeight,N="leaflet-popup-scrolled";C&&_>C?(l.height=C+"px",Me(i,N)):Ke(i,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),f=this._getAnchor();rt(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(ao(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,_=this._containerWidth,C=new J(this._containerLeft,-f-this._containerBottom);C._add(_n(this._container));var N=i.layerPointToContainerPoint(C),M=H(this.options.autoPanPadding),U=H(this.options.autoPanPaddingTopLeft||M),G=H(this.options.autoPanPaddingBottomRight||M),$=i.getSize(),ae=0,Ce=0;N.x+_+G.x>$.x&&(ae=N.x+_-$.x+G.x),N.x-ae-U.x<0&&(ae=N.x-U.x),N.y+f+G.y>$.y&&(Ce=N.y+f-$.y+G.y),N.y-Ce-U.y<0&&(Ce=N.y-U.y),(ae||Ce)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ae,Ce]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Li=function(i,l){return new ur(i,l)};Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(i,l,f){return this._initOverlay(ur,i,l,f).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),$t.include({bindPopup:function(i,l){return this._popup=this._initOverlay(ur,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof yn||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Jt(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Dn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Di=sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){sn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){sn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=sn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,f,_=this._map,C=this._container,N=_.latLngToContainerPoint(_.getCenter()),M=_.layerPointToContainerPoint(i),U=this.options.direction,G=C.offsetWidth,$=C.offsetHeight,ae=H(this.options.offset),Ce=this._getAnchor();U==="top"?(l=G/2,f=$):U==="bottom"?(l=G/2,f=0):U==="center"?(l=G/2,f=$/2):U==="right"?(l=0,f=$/2):U==="left"?(l=G,f=$/2):M.x<N.x?(U="right",l=0,f=$/2):(U="left",l=G+(ae.x+Ce.x)*2,f=$/2),i=i.subtract(H(l,f,!0)).add(ae).add(Ce),Ke(C,"leaflet-tooltip-right"),Ke(C,"leaflet-tooltip-left"),Ke(C,"leaflet-tooltip-top"),Ke(C,"leaflet-tooltip-bottom"),Me(C,"leaflet-tooltip-"+U),rt(C,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&xt(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yo=function(i,l){return new Di(i,l)};Ve.include({openTooltip:function(i,l,f){return this._initOverlay(Di,i,l,f).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),$t.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Di,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof yn||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Ne(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ne(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,f,_;this._tooltip.options.sticky&&i.originalEvent&&(f=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var cr=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Oo(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var _=H(f.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function xl(i){return new cr(i)}jn.Default=Ai;var Un=$t.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){B(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Ye(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof J?i:new J(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,f=-i(-1/0,1/0),_=0,C=l.length,N;_<C;_++)N=l[_].style.zIndex,l[_]!==this._container&&N&&(f=i(f,+N));isFinite(f)&&(this.options.zIndex=f+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){xt(this._container,this.options.opacity);var i=+new Date,l=!1,f=!1;for(var _ in this._tiles){var C=this._tiles[_];if(!(!C.current||!C.loaded)){var N=Math.min(1,(i-C.loaded)/200);xt(C.el,N),N<1?l=!0:(C.active?f=!0:this._onOpaqueTile(C),C.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(X(this._fadeFrame),this._fadeFrame=Se(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===i?(this._levels[f].el.style.zIndex=l-Math.abs(i-f),this._onUpdateLevel(f)):(Ye(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var _=this._levels[i],C=this._map;return _||(_=this._levels[i]={},_.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=C.project(C.unproject(C.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,C.getCenter(),C.getZoom()),P(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var i,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Ye(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,f,_){var C=Math.floor(i/2),N=Math.floor(l/2),M=f-1,U=new J(+C,+N);U.z=+M;var G=this._tileCoordsToKey(U),$=this._tiles[G];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),M>_?this._retainParent(C,N,M,_):!1)},_retainChildren:function(i,l,f,_){for(var C=2*i;C<2*i+2;C++)for(var N=2*l;N<2*l+2;N++){var M=new J(C,N);M.z=f+1;var U=this._tileCoordsToKey(M),G=this._tiles[U];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);f+1<_&&this._retainChildren(C,N,f+1,_)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,f,_){var C=Math.round(l);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var N=this.options.updateWhenZooming&&C!==this._tileZoom;(!_||N)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(i),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],i,l)},_setZoomTransform:function(i,l,f){var _=this._map.getZoomScale(f,i.zoom),C=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,f)).round();ye.any3d?Wt(i.el,C,_):rt(i.el,C)},_resetGrid:function(){var i=this._map,l=i.options.crs,f=this._tileSize=this.getTileSize(),_=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],_).x/f.x),Math.ceil(i.project([0,l.wrapLng[1]],_).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],_).y/f.x),Math.ceil(i.project([l.wrapLat[1],0],_).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(f,this._tileZoom),C=l.project(i,this._tileZoom).floor(),N=l.getSize().divideBy(_*2);return new D(C.subtract(N),C.add(N))},_update:function(i){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),C=this._pxBoundsToTileRange(_),N=C.getCenter(),M=[],U=this.options.keepBuffer,G=new D(C.getBottomLeft().subtract([U,-U]),C.getTopRight().add([U,-U]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var ae=this._tiles[$].coords;(ae.z!==this._tileZoom||!G.contains(new J(ae.x,ae.y)))&&(this._tiles[$].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(i,f);return}for(var Ce=C.min.y;Ce<=C.max.y;Ce++)for(var De=C.min.x;De<=C.max.x;De++){var dt=new J(De,Ce);if(dt.z=this._tileZoom,!!this._isValidTile(dt)){var at=this._tiles[this._tileCoordsToKey(dt)];at?at.current=!0:M.push(dt)}}if(M.sort(function(Ct,Vi){return Ct.distanceTo(N)-Vi.distanceTo(N)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(De=0;De<M.length;De++)this._addTile(M[De],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(i.x<f.min.x||i.x>f.max.x)||!l.wrapLat&&(i.y<f.min.y||i.y>f.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return we(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,f=this.getTileSize(),_=i.scaleBy(f),C=_.add(f),N=l.unproject(_,i.z),M=l.unproject(C,i.z);return[N,M]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),f=new _e(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),f=new J(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(i){var l=this._tiles[i];l&&(Ye(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Me(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=P,i.onmousemove=P,ye.ielt9&&this.options.opacity<1&&xt(i,this.options.opacity)},_addTile:function(i,l){var f=this._getTilePos(i),_=this._tileCoordsToKey(i),C=this.createTile(this._wrapCoords(i),m(this._tileReady,this,i));this._initTile(C),this.createTile.length<2&&Se(m(this._tileReady,this,i,null,C)),rt(C,f),this._tiles[_]={el:C,coords:i,current:!0},l.appendChild(C),this.fire("tileloadstart",{tile:C,coords:i})},_tileReady:function(i,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:i});var _=this._tileCoordsToKey(i);f=this._tiles[_],f&&(f.loaded=+new Date,this._map._fadeAnimated?(xt(f.el,0),X(this._fadeFrame),this._fadeFrame=Se(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(Me(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?Se(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new J(this._wrapX?T(i.x,this._wrapX):i.x,this._wrapY?T(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new D(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Fi(i){return new Un(i)}var zn=Un.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=B(this,l),l.detectRetina&&ye.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var f=document.createElement("img");return Ne(f,"load",m(this._tileOnLoad,this,l,f)),Ne(f,"error",m(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(i),f},getTileUrl:function(i){var l={r:ye.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=f),l["-y"]=f}return te(this._url,u(l,this.options))},_tileOnLoad:function(i,l){ye.ielt9?setTimeout(m(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,f){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),i(f,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,_=this.options.zoomOffset;return f&&(i=l-i),i+_},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=P,l.onerror=P,!l.complete)){l.src=he;var f=this._tiles[i].coords;Ye(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",he),Un.prototype._removeTile.call(this,i)},_tileReady:function(i,l,f){if(!(!this._map||f&&f.getAttribute("src")===he))return Un.prototype._tileReady.call(this,i,l,f)}});function ps(i,l){return new zn(i,l)}var wo=zn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var f=u({},this.defaultWmsParams);for(var _ in l)_ in this.options||(f[_]=l[_]);l=B(this,l);var C=l.detectRetina&&ye.retina?2:1,N=this.getTileSize();f.width=N.x*C,f.height=N.y*C,this.wmsParams=f},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,zn.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),f=this._crs,_=W(f.project(l[0]),f.project(l[1])),C=_.min,N=_.max,M=(this._wmsVersion>=1.3&&this._crs===pl?[C.y,C.x,N.y,N.x]:[C.x,C.y,N.x,N.y]).join(","),U=zn.prototype.getTileUrl.call(this,i);return U+O(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,l){return u(this.wmsParams,i),l||this.redraw(),this}});function Tl(i,l){return new wo(i,l)}zn.WMS=wo,ps.wms=Tl;var ln=$t.extend({options:{padding:.1},initialize:function(i){B(this,i),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var f=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,l),N=_.multiplyBy(-f).add(C).subtract(this._map._getNewPixelOrigin(i,l));ye.any3d?Wt(this._container,N,f):rt(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new D(f,f.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ms=ln.extend({options:{tolerance:0},getEvents:function(){var i=ln.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ne(i,"mousemove",this._onMouseMove,this),Ne(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,Ye(this._container),Ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var i=this._bounds,l=this._container,f=i.getSize(),_=ye.retina?2:1;rt(l,i.min),l.width=_*f.x,l.height=_*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[y(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,f=l.next,_=l.prev;f?f.prev=_:this._drawLast=_,_?_.next=f:this._drawFirst=f,delete i._order,delete this._layers[y(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),f=[],_,C;for(C=0;C<l.length;C++){if(_=Number(l[C]),isNaN(_))return;f.push(_)}i.options._dashArray=f}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Se(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var f,_,C,N,M=i._parts,U=M.length,G=this._ctx;if(U){for(G.beginPath(),f=0;f<U;f++){for(_=0,C=M[f].length;_<C;_++)N=M[f][_],G[_?"lineTo":"moveTo"](N.x,N.y);l&&G.closePath()}this._fillStroke(G,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,f=this._ctx,_=Math.max(Math.round(i._radius),1),C=(Math.max(Math.round(i._radiusY),1)||_)/_;C!==1&&(f.save(),f.scale(1,C)),f.beginPath(),f.arc(l.x,l.y/C,_,0,Math.PI*2,!1),C!==1&&f.restore(),this._fillStroke(f,i)}},_fillStroke:function(i,l){var f=l.options;f.fill&&(i.globalAlpha=f.fillOpacity,i.fillStyle=f.fillColor||f.color,i.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=f.opacity,i.lineWidth=f.weight,i.strokeStyle=f.color,i.lineCap=f.lineCap,i.lineJoin=f.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),f,_,C=this._drawFirst;C;C=C.next)f=C.layer,f.options.interactive&&f._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(f))&&(_=f);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var f,_,C=this._drawFirst;C;C=C.next)f=C.layer,f.options.interactive&&f._containsPoint(l)&&(_=f);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(Me(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,f){this._map._fireDOMEvent(l,f||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var f=l.next,_=l.prev;if(f)f.prev=_;else return;_?_.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var f=l.next,_=l.prev;if(_)_.next=f;else return;f?f.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function gs(i){return ye.canvas?new ms(i):null}var Ui=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Cl={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=Ui("shape");Me(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=Ui("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;Ye(l),i.removeInteractiveTarget(l),delete this._layers[y(i)]},_updateStyle:function(i){var l=i._stroke,f=i._fill,_=i.options,C=i._container;C.stroked=!!_.stroke,C.filled=!!_.fill,_.stroke?(l||(l=i._stroke=Ui("stroke")),C.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=Y(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(C.removeChild(l),i._stroke=null),_.fill?(f||(f=i._fill=Ui("fill")),C.appendChild(f),f.color=_.fillColor||_.color,f.opacity=_.fillOpacity):f&&(C.removeChild(f),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),f=Math.round(i._radius),_=Math.round(i._radiusY||f);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+_+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Ti(i._container)},_bringToBack:function(i){gn(i._container)}},Qt=ye.vml?Ui:Ur,ei=ln.extend({_initContainer:function(){this._container=Qt("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qt("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ye(this._container),Ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var i=this._bounds,l=i.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),rt(f,i.min),f.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Qt("path");i.options.className&&Me(l,i.options.className),i.options.interactive&&Me(l,"leaflet-interactive"),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Ye(i._path),i.removeInteractiveTarget(i._path),delete this._layers[y(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,f=i.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,zr(i._parts,l))},_updateCircle:function(i){var l=i._point,f=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||f,C="a"+f+","+_+" 0 1,0 ",N=i._empty()?"M0 0":"M"+(l.x-f)+","+l.y+C+f*2+",0 "+C+-f*2+",0 ";this._setPath(i,N)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Ti(i._path)},_bringToBack:function(i){gn(i._path)}});ye.vml&&ei.include(Cl);function dr(i){return ye.svg||ye.vml?new ei(i):null}Ve.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&gs(i)||dr(i)}});var Sl=xn.extend({initialize:function(i,l){xn.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=we(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Ka(i,l){return new Sl(i,l)}ei.create=Qt,ei.pointsToPath=zr,rn.geometryToLayer=Mi,rn.coordsToLatLng=rr,rn.coordsToLatLngs=vo,rn.latLngToCoords=sr,rn.latLngsToCoords=lr,rn.getFeature=Ri,rn.asFeature=ar,Ve.mergeOptions({boxZoom:!0});var zi=Ft.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ye(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),be(),Jo(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ne(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new D(this._point,this._startPoint),f=l.getSize();rt(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Ye(this._box),Ke(this._container,"leaflet-crosshair")),Ei(),Ko(),Ze(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var l=new _e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ve.addInitHook("addHandler","boxZoom",zi),Ve.mergeOptions({doubleClickZoom:!0});var El=Ft.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,f=l.getZoom(),_=l.options.zoomDelta,C=i.originalEvent.shiftKey?f-_:f+_;l.options.doubleClickZoom==="center"?l.setZoom(C):l.setZoomAround(i.containerPoint,C)}});Ve.addInitHook("addHandler","doubleClickZoom",El),Ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _s=Ft.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Kt(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=we(this._map.options.maxBounds);this._offsetLimit=W(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),f=this._initialWorldOffset,_=this._draggable._newPos.x,C=(_-l+f)%i+l-f,N=(_+l+f)%i-l-f,M=Math.abs(C+f)<Math.abs(N+f)?C:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var l=this._map,f=l.options,_=!f.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),_)l.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,M=f.easeLinearity,U=C.multiplyBy(M/N),G=U.distanceTo([0,0]),$=Math.min(f.inertiaMaxSpeed,G),ae=U.multiplyBy($/G),Ce=$/(f.inertiaDeceleration*M),De=ae.multiplyBy(-Ce/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),Se(function(){l.panBy(De,{duration:Ce,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ve.addInitHook("addHandler","dragging",_s),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vs=Ft.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ne(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,f=i.scrollTop||l.scrollTop,_=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},f=this.keyCodes,_,C;for(_=0,C=f.left.length;_<C;_++)l[f.left[_]]=[-1*i,0];for(_=0,C=f.right.length;_<C;_++)l[f.right[_]]=[i,0];for(_=0,C=f.down.length;_<C;_++)l[f.down[_]]=[0,i];for(_=0,C=f.up.length;_<C;_++)l[f.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},f=this.keyCodes,_,C;for(_=0,C=f.zoomIn.length;_<C;_++)l[f.zoomIn[_]]=i;for(_=0,C=f.zoomOut.length;_<C;_++)l[f.zoomOut[_]]=-i},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,f=this._map,_;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(_=this._panKeys[l],i.shiftKey&&(_=H(_).multiplyBy(3)),f.options.maxBounds&&(_=f._limitOffset(H(_),f.options.maxBounds)),f.options.worldCopyJump){var C=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(_)));f.panTo(C)}else f.panBy(_)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Jt(i)}}});Ve.addInitHook("addHandler","keyboard",vs),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Je=Ft.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=sl(i),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),_),Jt(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),f=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,N=f?Math.ceil(C/f)*f:C,M=i._limitZoom(l+(this._delta>0?N:-N))-l;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+M):i.setZoomAround(this._lastMousePos,l+M))}});Ve.addInitHook("addHandler","scrollWheelZoom",Je);var ys=600;Ve.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var xo=Ft.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new J(l.clientX,l.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",nt),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ys),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ze(document,"touchend",nt),Ze(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new J(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var f=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});Ve.addInitHook("addHandler","tapHold",xo),Ve.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var Bi=Ft.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(i.touches[0]),_=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(_)._divideBy(2))),this._startDist=f.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),nt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(i.touches[0]),_=l.mouseEventToContainerPoint(i.touches[1]),C=f.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(C,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&C<1||this._zoom>l.getMaxZoom()&&C>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var N=f._add(_)._divideBy(2)._subtract(this._centerPoint);if(C===1&&N.x===0&&N.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var M=m(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Se(M,this,!0),nt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ve.addInitHook("addHandler","touchZoom",Bi),Ve.BoxZoom=zi,Ve.DoubleClickZoom=El,Ve.Drag=_s,Ve.Keyboard=vs,Ve.ScrollWheelZoom=Je,Ve.TapHold=xo,Ve.TouchZoom=Bi,o.Bounds=D,o.Browser=ye,o.CRS=Le,o.Canvas=ms,o.Circle=ir,o.CircleMarker=nr,o.Class=Ue,o.Control=kt,o.DivIcon=cr,o.DivOverlay=sn,o.DomEvent=Qo,o.DomUtil=fo,o.Draggable=Kt,o.Evented=ze,o.FeatureGroup=yn,o.GeoJSON=rn,o.GridLayer=Un,o.Handler=Ft,o.Icon=jn,o.ImageOverlay=Fn,o.LatLng=oe,o.LatLngBounds=_e,o.Layer=$t,o.LayerGroup=Ln,o.LineUtil=hl,o.Map=Ve,o.Marker=wn,o.Mixin=ns,o.Path=Dn,o.Point=J,o.PolyUtil=za,o.Polygon=xn,o.Polyline=At,o.Popup=ur,o.PosAnimation=Xo,o.Projection=Ga,o.Rectangle=Sl,o.Renderer=ln,o.SVG=ei,o.SVGOverlay=fs,o.TileLayer=zn,o.Tooltip=Di,o.Transformation=mi,o.Util=ce,o.VideoOverlay=ds,o.bind=m,o.bounds=W,o.canvas=gs,o.circle=_o,o.circleMarker=_l,o.control=Rn,o.divIcon=xl,o.extend=u,o.featureGroup=ml,o.geoJSON=vl,o.geoJson=Yt,o.gridLayer=Fi,o.icon=gl,o.imageOverlay=yl,o.latLng=re,o.latLngBounds=we,o.layerGroup=go,o.map=Mn,o.marker=Wa,o.point=H,o.polygon=Ja,o.polyline=Za,o.popup=Li,o.rectangle=Ka,o.setOptions=B,o.stamp=y,o.svg=dr,o.svgOverlay=hs,o.tileLayer=ps,o.tooltip=yo,o.transformation=gi,o.version=s,o.videoOverlay=wl;var Pl=window.L;o.noConflict=function(){return window.L=Pl,this},window.L=o}))})(zs,zs.exports)),zs.exports}var Mr=hg();const Lo=Ec(Mr);function Sa(t,e,o){return Object.freeze({instance:t,context:e,container:o})}function Ea(t,e){return e==null?function(s,u){const h=Z.useRef();return h.current||(h.current=t(s,u)),h}:function(s,u){const h=Z.useRef();h.current||(h.current=t(s,u));const m=Z.useRef(s),{instance:g}=h.current;return Z.useEffect(function(){m.current!==s&&(e(g,s,m.current),m.current=s)},[g,s,u]),h}}function _p(t,e){Z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var h;(h=e.layerContainer)==null||h.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function vp(t){return function(o){const s=Ta(),u=t(Ca(o,s),s);return fp(s.map,o.attribution),Ac(u.current,o.eventHandlers),_p(u.current,s),u}}function pg(t,e){const o=Z.useRef();Z.useEffect(function(){if(e.pathOptions!==o.current){const u=e.pathOptions??{};t.instance.setStyle(u),o.current=u}},[t,e])}function mg(t){return function(o){const s=Ta(),u=t(Ca(o,s),s);return Ac(u.current,o.eventHandlers),_p(u.current,s),pg(u.current,o),u}}function gg(t,e){const o=Ea(t,e),s=vp(o);return gp(s)}function _g(t,e){const o=Ea(t),s=dg(o,e);return ug(s)}function vg(t,e){const o=Ea(t,e),s=mg(o);return gp(s)}function yg(t,e){const o=Ea(t,e),s=vp(o);return cg(s)}function wg(t,e,o){const{opacity:s,zIndex:u}=e;s!=null&&s!==o.opacity&&t.setOpacity(s),u!=null&&u!==o.zIndex&&t.setZIndex(u)}function Mc(){return Ta().map}function yp(t){const e=Mc();return Z.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function dc(){return dc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},dc.apply(this,arguments)}function xg({bounds:t,boundsOptions:e,center:o,children:s,className:u,id:h,placeholder:m,style:g,whenReady:y,zoom:w,...T},P){const[E]=Z.useState({className:u,id:h,style:g}),[A,b]=Z.useState(null);Z.useImperativeHandle(P,()=>(A==null?void 0:A.map)??null,[A]);const B=Z.useCallback(Q=>{if(Q!==null&&A===null){const te=new Mr.Map(Q,T);o!=null&&w!=null?te.setView(o,w):t!=null&&te.fitBounds(t,e),y!=null&&te.whenReady(y),b(ag(te))}},[]);Z.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const O=A?bs.createElement(mp,{value:A},s):m??null;return bs.createElement("div",dc({},E,{ref:B}),O)}const Tg=Z.forwardRef(xg),wp=gg(function({position:e,...o},s){const u=new Mr.Marker(e,o);return Sa(u,hp(s,{overlayContainer:u}))},function(e,o,s){o.position!==s.position&&e.setLatLng(o.position),o.icon!=null&&o.icon!==s.icon&&e.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==s.opacity&&e.setOpacity(o.opacity),e.dragging!=null&&o.draggable!==s.draggable&&(o.draggable===!0?e.dragging.enable():e.dragging.disable())}),Cg=vg(function({positions:e,...o},s){const u=new Mr.Polyline(e,o);return Sa(u,hp(s,{overlayContainer:u}))},function(e,o,s){o.positions!==s.positions&&e.setLatLngs(o.positions)}),xp=_g(function(e,o){const s=new Mr.Popup(e,o.overlayContainer);return Sa(s,o)},function(e,o,{position:s},u){Z.useEffect(function(){const{instance:m}=e;function g(w){w.popup===m&&(m.update(),u(!0))}function y(w){w.popup===m&&u(!1)}return o.map.on({popupopen:g,popupclose:y}),o.overlayContainer==null?(s!=null&&m.setLatLng(s),m.openOn(o.map)):o.overlayContainer.bindPopup(m),function(){var T;o.map.off({popupopen:g,popupclose:y}),(T=o.overlayContainer)==null||T.unbindPopup(),o.map.removeLayer(m)}},[e,o,u,s])}),Sg=yg(function({url:e,...o},s){const u=new Mr.TileLayer(e,Ca(o,s));return Sa(u,s)},function(e,o,s){wg(e,o,s);const{url:u}=o;u!=null&&u!==s.url&&e.setUrl(u)}),Eg="https://web-production-c3ccb.up.railway.app",Pg=[t=>`https://corsproxy.io/?${encodeURIComponent(t)}`,t=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(t)}`,t=>`https://api.allorigins.win/get?url=${encodeURIComponent(t)}`];let fc=[],Mf=[];const qt={mediaMap:new Map,eventMediaRelations:[],personEventRelations:[],personMap:new Map,isLoaded:!1,isLoading:!1},hc="dn_history_map_",Ig=1e3*60*60*24,Tp=t=>{try{const e=localStorage.getItem(hc+t);if(!e)return null;const{timestamp:o,data:s}=JSON.parse(e);return Date.now()-o>Ig?(localStorage.removeItem(hc+t),null):s}catch{return null}},Cp=(t,e)=>{try{localStorage.setItem(hc+t,JSON.stringify({timestamp:Date.now(),data:e}))}catch(o){console.warn("Failed to save to local cache",o)}},Ng=1,kg=1e3,Ag=async t=>new Promise((e,o)=>{let s=t.length;if(s===0){o(new Error("No promises to execute"));return}t.forEach(u=>{Promise.resolve(u).then(e).catch(h=>{s--,s===0&&o(new Error("All promises rejected"))})})});async function rc(t,e=Ng,o=15e3){let s=0;for(;s<=e;){s++;try{const u=new AbortController,h=setTimeout(()=>u.abort(),o),m=await fetch(t,{method:"GET",signal:u.signal});if(clearTimeout(h),!m.ok){if(m.status===404)return{count:0,data:[]};throw new Error(`HTTP ${m.status}`)}return await m.json()}catch(u){if(s<=e){const h=kg*s;await new Promise(m=>setTimeout(m,h))}else throw u}}}async function Gn(t,e){const o=`${Eg}${t}`,s=[()=>rc(o,0,8e3),...Pg.map(u=>()=>{const h=u(o);return h.includes("allorigins")?rc(h,0,2e4).then(m=>{if(m&&m.contents)try{return JSON.parse(m.contents)}catch{return m.contents}return m}):rc(h,0,2e4)})];try{return await Ag(s.map(h=>h()))}catch(u){return e!=null&&e.silent||console.warn(`[API] All fetch strategies failed for ${t}`,u),{count:0,data:[]}}}const In=t=>{if(!t)return[];if(Array.isArray(t))return t;if(t.contents)try{const e=typeof t.contents=="string"?JSON.parse(t.contents):t.contents;return In(e)}catch{return[]}return t.data&&Array.isArray(t.data)?t.data:[]},Sp=async()=>{if(!(qt.isLoaded||qt.isLoading)){qt.isLoading=!0,console.log("[RefData] Starting background load of reference data...");try{const[t,e,o,s]=await Promise.all([Gn("/media",{silent:!0}),Gn("/event-media",{silent:!0}),Gn("/person-events",{silent:!0}),Gn("/persons",{silent:!0})]),u=In(t);qt.mediaMap=new Map(u.map(m=>[String(m.media_key).trim(),m])),qt.eventMediaRelations=In(e),qt.personEventRelations=In(o);const h=In(s);qt.personMap=new Map(h.map(m=>[String(m.person_key).trim(),m])),qt.isLoaded=!0,console.log("[RefData] Background load complete.")}catch(t){console.error("[RefData] Background load failed (will retry on demand):",t)}finally{qt.isLoading=!1}}},Ep=t=>{if(t.city_name!==void 0){const o=t;return{site_id:o.city_id,site_name:o.city_name,site_type:"Thnh ph",latitude:Number(o.lat)||0,longitude:Number(o.lng)||0,address:"",description:"",additional_info:{"City ID":String(o.city_id)}}}else{const o=t;return{site_id:o.location_id||String(o.location_key),site_name:o.location_name||"Khng tn",site_type:o.location_type||"Di tch",latitude:Number(o.latitude)||0,longitude:Number(o.longitude)||0,address:o.address||"",description:o.location_description||"",additional_info:{Key:String(o.location_key),"City ID":String(o.city_id||"")}}}},Rc=t=>{const e=o=>{if(!o)return;const s=parseInt(String(o),10);return isNaN(s)?void 0:s};return{person_id:t.person_id||String(t.person_key),full_name:t.person_name||"Khng tn",birth_year:e(t.birth_year),death_year:e(t.death_year)}},Pp=t=>t.map(e=>{const o=String(e.event_key).trim(),u=qt.eventMediaRelations.filter(g=>String(g.event_key).trim()===o).map(g=>String(g.media_key).trim()).map(g=>qt.mediaMap.get(g)).filter(g=>!!g).map(g=>({media_id:g.media_id,media_url:g.media,media_type:g.media_type==="video"||g.media_type==="youtube"?"video":"image",caption:""})),m=qt.personEventRelations.filter(g=>String(g.event_key).trim()===o).map(g=>String(g.person_key).trim()).map(g=>qt.personMap.get(g)).filter(g=>!!g).map(Rc);return{event_id:e.event_id||String(e.event_key),event_name:e.event_name,start_date:e.event_date,description:e.description||"",media:u,persons:m,related_site_id:e.location_key?String(e.location_key):void 0,related_site_name:""}}),Mg=async()=>{const t=[],e=new Set,o=Tp("sites");if(o)return console.log("[Cache] Loaded sites from local storage"),fc=o,o;try{const s=await Gn("/locations"),u=In(s);if(u.length>0)for(const h of u){const m=Ep(h);m.latitude&&m.longitude&&(t.push(m),e.add(String(m.site_id)))}return t.length>0&&(fc=t,Cp("sites",t)),t}catch(s){return console.error("Error in fetchSites:",s),[]}},Rg=async()=>{const t=Tp("persons");if(t)return console.log("[Cache] Loaded persons from local storage"),Mf=t,t;try{const e=await Gn("/persons"),s=In(e).map(Rc);return s.length>0&&(Mf=s,Cp("persons",s)),s}catch(e){return console.error("Error in fetchPersons:",e),[]}},Lg=async t=>{let e=fc.find(o=>String(o.site_id)===String(t))||null;if(!e){const o=await Gn(`/locations/${t}`),s=In(o);s.length>0&&(e=Ep(s[0]))}if(!e)return null;try{const o=Gn(`/events/location/${t}`,{silent:!0}),s=Sp(),[u]=await Promise.all([o,s]),h=In(u),m=Pp(h);return{...e,events:m}}catch(o){return console.error("Error fetching site details:",o),{...e,events:[]}}},Dg=async t=>{const e=await Gn(`/persons/${t}`),o=In(e);if(o.length===0)return null;const s=o[0],u=Rc(s),h=String(s.person_key).trim();try{await Sp();const m=new Set(qt.personEventRelations.filter(E=>String(E.person_key).trim()===h).map(E=>String(E.event_key).trim()));if(m.size===0)return{...u,biography:s.biography||"",events:[],media:[]};const g=await Gn("/events"),w=In(g).filter(E=>m.has(String(E.event_key).trim())),T=Pp(w),P=[];return T.forEach(E=>{E.media&&P.push(...E.media)}),{...u,biography:s.biography||"",events:T,media:P}}catch(m){return console.error("Error fetching person details:",m),{...u,biography:s.biography||"",events:[],media:[]}}},sc=t=>t<1?"":t>=1e3?`${(t/1e3).toFixed(1)} km`:`${Math.round(t)} m`,Fg=(t,e)=>{const o=t.type,s=t.modifier;let u="";switch(o){case"depart":u="Khi hnh";break;case"arrive":return"Bn  n ch";case"turn":case"fork":case"end of road":s&&s.includes("left")?u="R tri":s&&s.includes("right")?u="R phi":u="R";break;case"roundabout":u=`i vo vng xuyn (li ra ${t.exit||1})`;break;default:u="i tip"}return e?`${u} vo ${e}`:u},Ug=async(t,e)=>{const[o,s]=t,[u,h]=e;try{const m=new AbortController,g=setTimeout(()=>m.abort(),8e3),y=`https://router.project-osrm.org/route/v1/driving/${s},${o};${h},${u}?steps=true&geometries=geojson&overview=full`,w=await fetch(y,{signal:m.signal});if(clearTimeout(g),!w.ok)throw new Error(`OSRM Status ${w.status}`);const T=await w.json();if(T.code!=="Ok"||!T.routes||T.routes.length===0)throw new Error("No route found");const P=T.routes[0],E=P.legs[0];return{summary:{totalDistance:sc(P.distance),totalDuration:`${Math.round(P.duration/60)} pht`},steps:E.steps.map(A=>({instruction:Fg(A.maneuver,A.name),distance:sc(A.distance)})),routeGeometry:P.geometry.coordinates.map(A=>[A[1],A[0]])}}catch{return{summary:{totalDistance:sc(zg(o,s,u,h)*1e3),totalDuration:"ng chim bay"},steps:[{instruction:"Ch  offline: i thng n ch",distance:""}],routeGeometry:[[o,s],[u,h]]}}};function zg(t,e,o,s){var u=6371,h=ha(o-t),m=ha(s-e),g=Math.sin(h/2)*Math.sin(h/2)+Math.cos(ha(t))*Math.cos(ha(o))*Math.sin(m/2)*Math.sin(m/2),y=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return u*y}function ha(t){return t*(Math.PI/180)}const Bg=async t=>{if(!t||t.length<3)return[];try{const e=new AbortController;setTimeout(()=>e.abort(),4e3);const o=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}&limit=5&countrycodes=vn`,s=await fetch(o,{headers:{"Accept-Language":"vi"},signal:e.signal});if(!s.ok)throw new Error("Nominatim fetch failed");return(await s.json()).map(h=>({name:h.display_name.split(",")[0],address:h.display_name,coordinates:[parseFloat(h.lat),parseFloat(h.lon)]}))}catch{return[]}},Vg=async t=>{try{const e=new AbortController;setTimeout(()=>e.abort(),4e3);const o=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t[0]}&lon=${t[1]}&zoom=18&addressdetails=1`,s=await fetch(o,{headers:{"Accept-Language":"vi"},signal:e.signal});if(!s.ok)throw new Error("Nominatim reverse failed");const u=await s.json();return u.display_name?u.display_name.split(",")[0]:"V tr  chn"}catch{return`${t[0].toFixed(4)}, ${t[1].toFixed(4)}`}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bg,Hg;function Gg(){return{geminiUrl:bg,vertexUrl:Hg}}function qg(t,e,o,s){var u,h;if(!(t!=null&&t.baseUrl)){const m=Gg();return e?(u=m.vertexUrl)!==null&&u!==void 0?u:o:(h=m.geminiUrl)!==null&&h!==void 0?h:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hi{}function ue(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(s,u)=>{if(Object.prototype.hasOwnProperty.call(e,u)){const h=e[u];return h!=null?String(h):""}else throw new Error(`Key '${u}' not found in valueMap.`)})}function d(t,e,o){for(let h=0;h<e.length-1;h++){const m=e[h];if(m.endsWith("[]")){const g=m.slice(0,-2);if(!(g in t))if(Array.isArray(o))t[g]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(t[g])){const y=t[g];if(Array.isArray(o))for(let w=0;w<y.length;w++){const T=y[w];d(T,e.slice(h+1),o[w])}else for(const w of y)d(w,e.slice(h+1),o)}return}else if(m.endsWith("[0]")){const g=m.slice(0,-3);g in t||(t[g]=[{}]);const y=t[g];d(y[0],e.slice(h+1),o);return}(!t[m]||typeof t[m]!="object")&&(t[m]={}),t=t[m]}const s=e[e.length-1],u=t[s];if(u!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===u)return;if(typeof u=="object"&&typeof o=="object"&&u!==null&&o!==null)Object.assign(u,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[s]=o}function c(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return o;const u=e[s];if(u.endsWith("[]")){const h=u.slice(0,-2);if(h in t){const m=t[h];return Array.isArray(m)?m.map(g=>c(g,e.slice(s+1),o)):o}else return o}else t=t[u]}return t}catch(s){if(s instanceof TypeError)return o;throw s}}function Og(t,e){for(const[o,s]of Object.entries(e)){const u=o.split("."),h=s.split("."),m=new Set;let g=-1;for(let y=0;y<u.length;y++)if(u[y]==="*"){g=y;break}if(g!==-1&&h.length>g)for(let y=g;y<h.length;y++){const w=h[y];w!=="*"&&!w.endsWith("[]")&&!w.endsWith("[0]")&&m.add(w)}pc(t,u,h,0,m)}}function pc(t,e,o,s,u){if(s>=e.length||typeof t!="object"||t===null)return;const h=e[s];if(h.endsWith("[]")){const m=h.slice(0,-2),g=t;if(m in g&&Array.isArray(g[m]))for(const y of g[m])pc(y,e,o,s+1,u)}else if(h==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const m=t,g=Object.keys(m).filter(w=>!w.startsWith("_")&&!u.has(w)),y={};for(const w of g)y[w]=m[w];for(const[w,T]of Object.entries(y)){const P=[];for(const E of o.slice(s))E==="*"?P.push(w):P.push(E);d(m,P,T)}for(const w of g)delete m[w]}}else{const m=t;h in m&&pc(m[h],e,o,s+1,u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wg(t){const e={},o=c(t,["operationName"]);o!=null&&d(e,["operationName"],o);const s=c(t,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function Zg(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response","generateVideoResponse"]);return m!=null&&d(e,["response"],Kg(m)),e}function Jg(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response"]);return m!=null&&d(e,["response"],$g(m)),e}function Kg(t){const e={},o=c(t,["generatedSamples"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>Yg(m))),d(e,["generatedVideos"],h)}const s=c(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(e,["raiMediaFilteredReasons"],u),e}function $g(t){const e={},o=c(t,["videos"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>Qg(m))),d(e,["generatedVideos"],h)}const s=c(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(e,["raiMediaFilteredReasons"],u),e}function Yg(t){const e={},o=c(t,["video"]);return o!=null&&d(e,["video"],i_(o)),e}function Qg(t){const e={},o=c(t,["_self"]);return o!=null&&d(e,["video"],o_(o)),e}function Xg(t){const e={},o=c(t,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function jg(t){const e={},o=c(t,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function e_(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response"]);return m!=null&&d(e,["response"],t_(m)),e}function t_(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["parent"]);s!=null&&d(e,["parent"],s);const u=c(t,["documentName"]);return u!=null&&d(e,["documentName"],u),e}function Ip(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response"]);return m!=null&&d(e,["response"],n_(m)),e}function n_(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["parent"]);s!=null&&d(e,["parent"],s);const u=c(t,["documentName"]);return u!=null&&d(e,["documentName"],u),e}function i_(t){const e={},o=c(t,["uri"]);o!=null&&d(e,["uri"],o);const s=c(t,["encodedVideo"]);s!=null&&d(e,["videoBytes"],Lc(s));const u=c(t,["encoding"]);return u!=null&&d(e,["mimeType"],u),e}function o_(t){const e={},o=c(t,["gcsUri"]);o!=null&&d(e,["uri"],o);const s=c(t,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],Lc(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["mimeType"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rf;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rf||(Rf={}));var Lf;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Lf||(Lf={}));var Df;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Df||(Df={}));var Dt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Dt||(Dt={}));var Ff;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ff||(Ff={}));var Uf;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Uf||(Uf={}));var zf;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(zf||(zf={}));var Bf;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Bf||(Bf={}));var Vf;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vf||(Vf={}));var bf;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(bf||(bf={}));var Hf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Hf||(Hf={}));var Gf;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Gf||(Gf={}));var qf;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(qf||(qf={}));var Of;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Of||(Of={}));var Wf;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Wf||(Wf={}));var Zf;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zf||(Zf={}));var Jf;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Jf||(Jf={}));var Kf;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Kf||(Kf={}));var $f;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($f||($f={}));var va;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(va||(va={}));var Yf;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yf||(Yf={}));var Qf;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qf||(Qf={}));var Xf;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xf||(Xf={}));var mc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mc||(mc={}));var jf;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(jf||(jf={}));var eh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(eh||(eh={}));var th;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(th||(th={}));var nh;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(nh||(nh={}));var ih;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ih||(ih={}));var oh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(oh||(oh={}));var rh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(rh||(rh={}));var sh;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sh||(sh={}));var lh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(lh||(lh={}));var ah;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ah||(ah={}));var uh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uh||(uh={}));var ch;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ch||(ch={}));var dh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dh||(dh={}));var fh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fh||(fh={}));var hh;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(hh||(hh={}));var ph;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ph||(ph={}));var mh;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(mh||(mh={}));var gh;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(gh||(gh={}));var _h;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_h||(_h={}));var vh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(vh||(vh={}));var yh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yh||(yh={}));var wh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wh||(wh={}));var xh;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xh||(xh={}));var Th;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Th||(Th={}));var Ch;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ch||(Ch={}));var Sh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sh||(Sh={}));var Eh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Eh||(Eh={}));var Ph;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ph||(Ph={}));var Ih;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ih||(Ih={}));var Nh;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Nh||(Nh={}));var Ir;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ir||(Ir={}));class gc{constructor(e){const o={};for(const s of e.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Us{get text(){var e,o,s,u,h,m,g,y;if(((u=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let w="",T=!1;const P=[];for(const E of(y=(g=(m=(h=this.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[A,b]of Object.entries(E))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(b!==null||b!==void 0)&&P.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;T=!0,w+=E.text}}return P.length>0&&console.warn(`there are non-text parts ${P} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?w:void 0}get data(){var e,o,s,u,h,m,g,y;if(((u=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let w="";const T=[];for(const P of(y=(g=(m=(h=this.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[E,A]of Object.entries(P))E!=="inlineData"&&(A!==null||A!==void 0)&&T.push(E);P.inlineData&&typeof P.inlineData.data=="string"&&(w+=atob(P.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),w.length>0?btoa(w):void 0}get functionCalls(){var e,o,s,u,h,m,g,y;if(((u=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const w=(y=(g=(m=(h=this.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((w==null?void 0:w.length)!==0)return w}get executableCode(){var e,o,s,u,h,m,g,y,w;if(((u=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(g=(m=(h=this.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(P=>P.executableCode).map(P=>P.executableCode).filter(P=>P!==void 0);if((T==null?void 0:T.length)!==0)return(w=T==null?void 0:T[0])===null||w===void 0?void 0:w.code}get codeExecutionResult(){var e,o,s,u,h,m,g,y,w;if(((u=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(g=(m=(h=this.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(P=>P.codeExecutionResult).map(P=>P.codeExecutionResult).filter(P=>P!==void 0);if((T==null?void 0:T.length)!==0)return(w=T==null?void 0:T[0])===null||w===void 0?void 0:w.output}}class kh{}class Ah{}class r_{}class s_{}class l_{}class a_{}class Mh{}class Rh{}class Lh{}class u_{}class ya{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new ya;let u;const h=e;return o?u=Jg(h):u=Zg(h),Object.assign(s,u),s}}class Dh{}class Fh{}class Uh{}class c_{}class d_{}class f_{}class Dc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Dc,h=e_(e);return Object.assign(s,h),s}}class h_{}class p_{}class m_{}class zh{}class g_{get text(){var e,o,s;let u="",h=!1;const m=[];for(const g of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&w!==null&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,u+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,o,s;let u="";const h=[];for(const m of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&y!==null&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}}class __{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Fc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Fc,h=Ip(e);return Object.assign(s,h),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Np(t,e){const o=qe(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function kp(t){return Array.isArray(t)?t.map(e=>wa(e)):[wa(t)]}function wa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ap(t){const e=wa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mp(t){const e=wa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Rp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Bh(e)):[Bh(t)]}function _c(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function bh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Nt(t){if(t==null)throw new Error("ContentUnion is required");return _c(t)?t:{role:"user",parts:Rp(t)}}function Uc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const s=Nt(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const o=Nt(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>Nt(o)):[Nt(e)]}function mn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vh(t)||bh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nt(t)]}const e=[],o=[],s=_c(t[0]);for(const u of t){const h=_c(u);if(h!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(h)e.push(u);else{if(Vh(u)||bh(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(u)}}return s||e.push({role:"user",parts:Rp(o)}),e}function v_(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(s=>s!=="null");if(o.length===1)e.type=Object.values(Dt).includes(o[0].toUpperCase())?o[0].toUpperCase():Dt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of o)e.anyOf.push({type:Object.values(Dt).includes(s.toUpperCase())?s.toUpperCase():Dt.TYPE_UNSPECIFIED})}}function Nr(t){const e={},o=["items"],s=["anyOf"],u=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const h=t.anyOf;h!=null&&h.length==2&&(h[0].type==="null"?(e.nullable=!0,t=h[1]):h[1].type==="null"&&(e.nullable=!0,t=h[0])),t.type instanceof Array&&v_(t.type,e);for(const[m,g]of Object.entries(t))if(g!=null)if(m=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;e.type=Object.values(Dt).includes(g.toUpperCase())?g.toUpperCase():Dt.TYPE_UNSPECIFIED}else if(o.includes(m))e[m]=Nr(g);else if(s.includes(m)){const y=[];for(const w of g){if(w.type=="null"){e.nullable=!0;continue}y.push(Nr(w))}e[m]=y}else if(u.includes(m)){const y={};for(const[w,T]of Object.entries(g))y[w]=Nr(T);e[m]=y}else{if(m==="additionalProperties")continue;e[m]=g}return e}function zc(t){return Nr(t)}function Bc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Rr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Nr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Nr(e.response));return t}function Lr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function y_(t,e,o,s=1){const u=!e.startsWith(`${o}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:u?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:u?`${o}/${e}`:e}function pi(t,e){if(typeof e!="string")throw new Error("name must be a string");return y_(t,e,"cachedContents")}function Lp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function eo(t){return Lc(t)}function w_(t){return t!=null&&typeof t=="object"&&"name"in t}function x_(t){return t!=null&&typeof t=="object"&&"video"in t}function T_(t){return t!=null&&typeof t=="object"&&"uri"in t}function Dp(t){var e;let o;if(w_(t)&&(o=t.name),!(T_(t)&&(o=t.uri,o===void 0))&&!(x_(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const u=o.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${o}`);o=u[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Fp(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function Up(t){for(const e of["models","tunedModels","publisherModels"])if(C_(t,e))return t[e];return[]}function C_(t,e){return t!==null&&typeof t=="object"&&e in t}function S_(t,e={}){const o=t,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function E_(t,e={}){const o=[],s=new Set;for(const u of t){const h=u.name;if(s.has(h))throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s.add(h);const m=S_(u,e);m.functionDeclarations&&o.push(...m.functionDeclarations)}return{functionDeclarations:o}}function zp(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,u=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(u>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||u!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function P_(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Bp(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const u=o.inlinedResponses;if(!Array.isArray(u)||u.length===0)return t;let h=!1;for(const m of u){if(typeof m!="object"||m===null)continue;const y=m.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){h=!0;break}}return h&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Dr(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Vp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I_(t){const e={},o=c(t,["responsesFile"]);o!=null&&d(e,["fileName"],o);const s=c(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>lv(m))),d(e,["inlinedResponses"],h)}const u=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["inlinedEmbedContentResponses"],h)}return e}function N_(t){const e={},o=c(t,["predictionsFormat"]);o!=null&&d(e,["format"],o);const s=c(t,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const u=c(t,["bigqueryDestination","outputUri"]);return u!=null&&d(e,["bigqueryUri"],u),e}function k_(t){const e={},o=c(t,["format"]);o!=null&&d(e,["predictionsFormat"],o);const s=c(t,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const u=c(t,["bigqueryUri"]);if(u!=null&&d(e,["bigqueryDestination","outputUri"],u),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ma(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const u=c(t,["metadata","state"]);u!=null&&d(e,["state"],Vp(u));const h=c(t,["metadata","createTime"]);h!=null&&d(e,["createTime"],h);const m=c(t,["metadata","endTime"]);m!=null&&d(e,["endTime"],m);const g=c(t,["metadata","updateTime"]);g!=null&&d(e,["updateTime"],g);const y=c(t,["metadata","model"]);y!=null&&d(e,["model"],y);const w=c(t,["metadata","output"]);return w!=null&&d(e,["dest"],I_(Bp(w))),e}function vc(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["displayName"]);s!=null&&d(e,["displayName"],s);const u=c(t,["state"]);u!=null&&d(e,["state"],Vp(u));const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["createTime"]);m!=null&&d(e,["createTime"],m);const g=c(t,["startTime"]);g!=null&&d(e,["startTime"],g);const y=c(t,["endTime"]);y!=null&&d(e,["endTime"],y);const w=c(t,["updateTime"]);w!=null&&d(e,["updateTime"],w);const T=c(t,["model"]);T!=null&&d(e,["model"],T);const P=c(t,["inputConfig"]);P!=null&&d(e,["src"],A_(P));const E=c(t,["outputConfig"]);E!=null&&d(e,["dest"],N_(Bp(E)));const A=c(t,["completionStats"]);return A!=null&&d(e,["completionStats"],A),e}function A_(t){const e={},o=c(t,["instancesFormat"]);o!=null&&d(e,["format"],o);const s=c(t,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const u=c(t,["bigquerySource","inputUri"]);return u!=null&&d(e,["bigqueryUri"],u),e}function M_(t,e){const o={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(e,["fileName"]);s!=null&&d(o,["fileName"],s);const u=c(e,["inlinedRequests"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>sv(t,m))),d(o,["requests","requests"],h)}return o}function R_(t){const e={},o=c(t,["format"]);o!=null&&d(e,["instancesFormat"],o);const s=c(t,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const u=c(t,["bigqueryUri"]);if(u!=null&&d(e,["bigquerySource","inputUri"],u),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function L_(t){const e={},o=c(t,["data"]);if(o!=null&&d(e,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function D_(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function F_(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function U_(t){const e={},o=c(t,["content"]);o!=null&&d(e,["content"],o);const s=c(t,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],z_(s));const u=c(t,["tokenCount"]);u!=null&&d(e,["tokenCount"],u);const h=c(t,["finishReason"]);h!=null&&d(e,["finishReason"],h);const m=c(t,["avgLogprobs"]);m!=null&&d(e,["avgLogprobs"],m);const g=c(t,["groundingMetadata"]);g!=null&&d(e,["groundingMetadata"],g);const y=c(t,["index"]);y!=null&&d(e,["index"],y);const w=c(t,["logprobsResult"]);w!=null&&d(e,["logprobsResult"],w);const T=c(t,["safetyRatings"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(A=>A)),d(e,["safetyRatings"],E)}const P=c(t,["urlContextMetadata"]);return P!=null&&d(e,["urlContextMetadata"],P),e}function z_(t){const e={},o=c(t,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>u)),d(e,["citations"],s)}return e}function bp(t){const e={},o=c(t,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>pv(h))),d(e,["parts"],u)}const s=c(t,["role"]);return s!=null&&d(e,["role"],s),e}function B_(t,e){const o={},s=c(t,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function V_(t,e){const o={},s=c(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const u=c(t,["dest"]);return e!==void 0&&u!=null&&d(e,["outputConfig"],k_(P_(u))),o}function Hh(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["src"]);u!=null&&d(o,["batch","inputConfig"],M_(t,zp(t,u)));const h=c(e,["config"]);return h!=null&&B_(h,o),o}function b_(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["model"],qe(t,s));const u=c(e,["src"]);u!=null&&d(o,["inputConfig"],R_(zp(t,u)));const h=c(e,["config"]);return h!=null&&V_(h,o),o}function H_(t,e){const o={},s=c(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),o}function G_(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["src"]);u!=null&&d(o,["batch","inputConfig"],$_(t,u));const h=c(e,["config"]);return h!=null&&H_(h,o),o}function q_(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function O_(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function W_(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["name"]);s!=null&&d(e,["name"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);return h!=null&&d(e,["error"],h),e}function Z_(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["name"]);s!=null&&d(e,["name"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);return h!=null&&d(e,["error"],h),e}function J_(t,e){const o={},s=c(e,["contents"]);if(s!=null){let h=Uc(t,s);Array.isArray(h)&&(h=h.map(m=>m)),d(o,["requests[]","request","content"],h)}const u=c(e,["config"]);return u!=null&&(d(o,["_self"],K_(u,o)),Og(o,{"requests[].*":"requests[].request.*"})),o}function K_(t,e){const o={},s=c(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const u=c(t,["title"]);e!==void 0&&u!=null&&d(e,["requests[]","title"],u);const h=c(t,["outputDimensionality"]);if(e!==void 0&&h!=null&&d(e,["requests[]","outputDimensionality"],h),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function $_(t,e){const o={},s=c(e,["fileName"]);s!=null&&d(o,["file_name"],s);const u=c(e,["inlinedRequests"]);return u!=null&&d(o,["requests"],J_(t,u)),o}function Y_(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Q_(t){const e={},o=c(t,["id"]);o!=null&&d(e,["id"],o);const s=c(t,["args"]);s!=null&&d(e,["args"],s);const u=c(t,["name"]);if(u!=null&&d(e,["name"],u),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X_(t){const e={},o=c(t,["mode"]);o!=null&&d(e,["mode"],o);const s=c(t,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function j_(t,e,o){const s={},u=c(e,["systemInstruction"]);o!==void 0&&u!=null&&d(o,["systemInstruction"],bp(Nt(u)));const h=c(e,["temperature"]);h!=null&&d(s,["temperature"],h);const m=c(e,["topP"]);m!=null&&d(s,["topP"],m);const g=c(e,["topK"]);g!=null&&d(s,["topK"],g);const y=c(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const w=c(e,["maxOutputTokens"]);w!=null&&d(s,["maxOutputTokens"],w);const T=c(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const P=c(e,["responseLogprobs"]);P!=null&&d(s,["responseLogprobs"],P);const E=c(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&d(s,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&d(s,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&d(s,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&d(s,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&d(s,["responseSchema"],zc(Q));const te=c(e,["responseJsonSchema"]);if(te!=null&&d(s,["responseJsonSchema"],te),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=c(e,["safetySettings"]);if(o!==void 0&&Y!=null){let X=Y;Array.isArray(X)&&(X=X.map(ce=>mv(ce))),d(o,["safetySettings"],X)}const se=c(e,["tools"]);if(o!==void 0&&se!=null){let X=Lr(se);Array.isArray(X)&&(X=X.map(ce=>_v(Rr(ce)))),d(o,["tools"],X)}const he=c(e,["toolConfig"]);if(o!==void 0&&he!=null&&d(o,["toolConfig"],gv(he)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=c(e,["cachedContent"]);o!==void 0&&me!=null&&d(o,["cachedContent"],pi(t,me));const pe=c(e,["responseModalities"]);pe!=null&&d(s,["responseModalities"],pe);const Te=c(e,["mediaResolution"]);Te!=null&&d(s,["mediaResolution"],Te);const le=c(e,["speechConfig"]);if(le!=null&&d(s,["speechConfig"],Bc(le)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ie=c(e,["thinkingConfig"]);Ie!=null&&d(s,["thinkingConfig"],Ie);const Se=c(e,["imageConfig"]);return Se!=null&&d(s,["imageConfig"],rv(Se)),s}function ev(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(w=>U_(w))),d(e,["candidates"],y)}const u=c(t,["modelVersion"]);u!=null&&d(e,["modelVersion"],u);const h=c(t,["promptFeedback"]);h!=null&&d(e,["promptFeedback"],h);const m=c(t,["responseId"]);m!=null&&d(e,["responseId"],m);const g=c(t,["usageMetadata"]);return g!=null&&d(e,["usageMetadata"],g),e}function tv(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function nv(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],Dr(t,s)),o}function iv(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function ov(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function rv(t){const e={},o=c(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=c(t,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sv(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["request","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let g=mn(u);Array.isArray(g)&&(g=g.map(y=>bp(y))),d(o,["request","contents"],g)}const h=c(e,["metadata"]);h!=null&&d(o,["metadata"],h);const m=c(e,["config"]);return m!=null&&d(o,["request","generationConfig"],j_(t,m,c(o,["request"],{}))),o}function lv(t){const e={},o=c(t,["response"]);o!=null&&d(e,["response"],ev(o));const s=c(t,["error"]);return s!=null&&d(e,["error"],s),e}function av(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);if(e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function uv(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);e!==void 0&&u!=null&&d(e,["_query","pageToken"],u);const h=c(t,["filter"]);return e!==void 0&&h!=null&&d(e,["_query","filter"],h),o}function cv(t){const e={},o=c(t,["config"]);return o!=null&&av(o,e),e}function dv(t){const e={},o=c(t,["config"]);return o!=null&&uv(o,e),e}function fv(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["operations"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>ma(m))),d(e,["batchJobs"],h)}return e}function hv(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["batchPredictionJobs"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>vc(m))),d(e,["batchJobs"],h)}return e}function pv(t){const e={},o=c(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=c(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const u=c(t,["executableCode"]);u!=null&&d(e,["executableCode"],u);const h=c(t,["fileData"]);h!=null&&d(e,["fileData"],Y_(h));const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],Q_(m));const g=c(t,["functionResponse"]);g!=null&&d(e,["functionResponse"],g);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],L_(y));const w=c(t,["text"]);w!=null&&d(e,["text"],w);const T=c(t,["thought"]);T!=null&&d(e,["thought"],T);const P=c(t,["thoughtSignature"]);P!=null&&d(e,["thoughtSignature"],P);const E=c(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function mv(t){const e={},o=c(t,["category"]);if(o!=null&&d(e,["category"],o),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(t,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function gv(t){const e={},o=c(t,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],X_(o));const s=c(t,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function _v(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let T=o;Array.isArray(T)&&(T=T.map(P=>P)),d(e,["functionDeclarations"],T)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],u);const h=c(t,["fileSearch"]);h!=null&&d(e,["fileSearch"],h);const m=c(t,["codeExecution"]);if(m!=null&&d(e,["codeExecution"],m),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(t,["googleMaps"]);g!=null&&d(e,["googleMaps"],iv(g));const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],ov(y));const w=c(t,["urlContext"]);return w!=null&&d(e,["urlContext"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(fi||(fi={}));class Do{constructor(e,o,s,u){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,s,u)}init(e,o,s){var u,h;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!s||Object.keys(s).length===0?m={config:{}}:typeof s=="object"?m=Object.assign({},s):m=s,m.config&&(m.config.pageToken=o.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(h=(u=m.config)===null||u===void 0?void 0:u.pageSize)!==null&&h!==void 0?h:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vv extends hi{constructor(e){super(),this.apiClient=e,this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)},this.list=async(o={})=>new Do(fi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o)}createInlinedGenerateContentRequest(e){const o=Hh(this.apiClient,e),s=o._url,u=ue("{model}:batchGenerateContent",s),g=o.batch.inputConfig.requests,y=g.requests,w=[];for(const T of y){const P=Object.assign({},T);if(P.systemInstruction){const E=P.systemInstruction;delete P.systemInstruction;const A=P.request;A.systemInstruction=E,P.request=A}w.push(P)}return g.requests=w,delete o.config,delete o._url,delete o._query,{path:u,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const s=o?Object.assign({},o):{},u=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${u}`),s.dest===void 0){const h=this.getGcsUri(e),m=this.getBigqueryUri(e);if(h)h.endsWith(".jsonl")?s.dest=`${h.slice(0,-6)}/dest`:s.dest=`${h}_dest_${u}`;else if(m)s.dest=`${m}_dest_${u}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=b_(this.apiClient,e);return g=ue("batchPredictionJobs",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>vc(T))}else{const w=Hh(this.apiClient,e);return g=ue("{model}:batchGenerateContent",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>ma(T))}}async createEmbeddingsInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=G_(this.apiClient,e);return h=ue("{model}:asyncBatchEmbedContent",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>ma(y))}}async get(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=nv(this.apiClient,e);return g=ue("batchPredictionJobs/{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>vc(T))}else{const w=tv(this.apiClient,e);return g=ue("batches/{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>ma(T))}}async cancel(e){var o,s,u,h;let m="",g={};if(this.apiClient.isVertexAI()){const y=F_(this.apiClient,e);m=ue("batchPredictionJobs/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=D_(this.apiClient,e);m=ue("batches/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal})}}async listInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=dv(e);return g=ue("batchPredictionJobs",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=hv(T),E=new zh;return Object.assign(E,P),E})}else{const w=cv(e);return g=ue("batches",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=fv(T),E=new zh;return Object.assign(E,P),E})}}async delete(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=O_(this.apiClient,e);return g=ue("batchPredictionJobs/{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>Z_(T))}else{const w=q_(this.apiClient,e);return g=ue("batches/{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>W_(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yv(t){const e={},o=c(t,["data"]);if(o!=null&&d(e,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Gh(t){const e={},o=c(t,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Gv(h))),d(e,["parts"],u)}const s=c(t,["role"]);return s!=null&&d(e,["role"],s),e}function wv(t,e){const o={},s=c(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const u=c(t,["expireTime"]);e!==void 0&&u!=null&&d(e,["expireTime"],u);const h=c(t,["displayName"]);e!==void 0&&h!=null&&d(e,["displayName"],h);const m=c(t,["contents"]);if(e!==void 0&&m!=null){let T=mn(m);Array.isArray(T)&&(T=T.map(P=>Gh(P))),d(e,["contents"],T)}const g=c(t,["systemInstruction"]);e!==void 0&&g!=null&&d(e,["systemInstruction"],Gh(Nt(g)));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(P=>Ov(P))),d(e,["tools"],T)}const w=c(t,["toolConfig"]);if(e!==void 0&&w!=null&&d(e,["toolConfig"],qv(w)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function xv(t,e){const o={},s=c(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const u=c(t,["expireTime"]);e!==void 0&&u!=null&&d(e,["expireTime"],u);const h=c(t,["displayName"]);e!==void 0&&h!=null&&d(e,["displayName"],h);const m=c(t,["contents"]);if(e!==void 0&&m!=null){let P=mn(m);Array.isArray(P)&&(P=P.map(E=>E)),d(e,["contents"],P)}const g=c(t,["systemInstruction"]);e!==void 0&&g!=null&&d(e,["systemInstruction"],Nt(g));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let P=y;Array.isArray(P)&&(P=P.map(E=>Wv(E))),d(e,["tools"],P)}const w=c(t,["toolConfig"]);e!==void 0&&w!=null&&d(e,["toolConfig"],w);const T=c(t,["kmsKeyName"]);return e!==void 0&&T!=null&&d(e,["encryption_spec","kmsKeyName"],T),o}function Tv(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["model"],Np(t,s));const u=c(e,["config"]);return u!=null&&wv(u,o),o}function Cv(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["model"],Np(t,s));const u=c(e,["config"]);return u!=null&&xv(u,o),o}function Sv(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],pi(t,s)),o}function Ev(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],pi(t,s)),o}function Pv(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function Iv(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function Nv(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function kv(t){const e={},o=c(t,["id"]);o!=null&&d(e,["id"],o);const s=c(t,["args"]);s!=null&&d(e,["args"],s);const u=c(t,["name"]);if(u!=null&&d(e,["name"],u),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Av(t){const e={},o=c(t,["mode"]);o!=null&&d(e,["mode"],o);const s=c(t,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Mv(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(t,["description"]);o!=null&&d(e,["description"],o);const s=c(t,["name"]);s!=null&&d(e,["name"],s);const u=c(t,["parameters"]);u!=null&&d(e,["parameters"],u);const h=c(t,["parametersJsonSchema"]);h!=null&&d(e,["parametersJsonSchema"],h);const m=c(t,["response"]);m!=null&&d(e,["response"],m);const g=c(t,["responseJsonSchema"]);return g!=null&&d(e,["responseJsonSchema"],g),e}function Rv(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],pi(t,s)),o}function Lv(t,e){const o={},s=c(e,["name"]);return s!=null&&d(o,["_url","name"],pi(t,s)),o}function Dv(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function Fv(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function Uv(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);return e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),o}function zv(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);return e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),o}function Bv(t){const e={},o=c(t,["config"]);return o!=null&&Uv(o,e),e}function Vv(t){const e={},o=c(t,["config"]);return o!=null&&zv(o,e),e}function bv(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["cachedContents"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["cachedContents"],h)}return e}function Hv(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["cachedContents"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["cachedContents"],h)}return e}function Gv(t){const e={},o=c(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=c(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const u=c(t,["executableCode"]);u!=null&&d(e,["executableCode"],u);const h=c(t,["fileData"]);h!=null&&d(e,["fileData"],Nv(h));const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],kv(m));const g=c(t,["functionResponse"]);g!=null&&d(e,["functionResponse"],g);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],yv(y));const w=c(t,["text"]);w!=null&&d(e,["text"],w);const T=c(t,["thought"]);T!=null&&d(e,["thought"],T);const P=c(t,["thoughtSignature"]);P!=null&&d(e,["thoughtSignature"],P);const E=c(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function qv(t){const e={},o=c(t,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],Av(o));const s=c(t,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function Ov(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let T=o;Array.isArray(T)&&(T=T.map(P=>P)),d(e,["functionDeclarations"],T)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],u);const h=c(t,["fileSearch"]);h!=null&&d(e,["fileSearch"],h);const m=c(t,["codeExecution"]);if(m!=null&&d(e,["codeExecution"],m),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(t,["googleMaps"]);g!=null&&d(e,["googleMaps"],Dv(g));const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],Fv(y));const w=c(t,["urlContext"]);return w!=null&&d(e,["urlContext"],w),e}function Wv(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let P=o;Array.isArray(P)&&(P=P.map(E=>Mv(E))),d(e,["functionDeclarations"],P)}const s=c(t,["retrieval"]);s!=null&&d(e,["retrieval"],s);const u=c(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const h=c(t,["computerUse"]);if(h!=null&&d(e,["computerUse"],h),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const m=c(t,["codeExecution"]);m!=null&&d(e,["codeExecution"],m);const g=c(t,["enterpriseWebSearch"]);g!=null&&d(e,["enterpriseWebSearch"],g);const y=c(t,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const w=c(t,["googleSearch"]);w!=null&&d(e,["googleSearch"],w);const T=c(t,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function Zv(t,e){const o={},s=c(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const u=c(t,["expireTime"]);return e!==void 0&&u!=null&&d(e,["expireTime"],u),o}function Jv(t,e){const o={},s=c(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const u=c(t,["expireTime"]);return e!==void 0&&u!=null&&d(e,["expireTime"],u),o}function Kv(t,e){const o={},s=c(e,["name"]);s!=null&&d(o,["_url","name"],pi(t,s));const u=c(e,["config"]);return u!=null&&Zv(u,o),o}function $v(t,e){const o={},s=c(e,["name"]);s!=null&&d(o,["_url","name"],pi(t,s));const u=c(e,["config"]);return u!=null&&Jv(u,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yv extends hi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Do(fi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Cv(this.apiClient,e);return g=ue("cachedContents",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>T)}else{const w=Tv(this.apiClient,e);return g=ue("cachedContents",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>T)}}async get(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Lv(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>T)}else{const w=Rv(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>T)}}async delete(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Ev(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Iv(T),E=new Fh;return Object.assign(E,P),E})}else{const w=Sv(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Pv(T),E=new Fh;return Object.assign(E,P),E})}}async update(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=$v(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>T)}else{const w=Kv(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>T)}}async listInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Vv(e);return g=ue("cachedContents",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Hv(T),E=new Uh;return Object.assign(E,P),E})}else{const w=Bv(e);return g=ue("cachedContents",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=bv(T),E=new Uh;return Object.assign(E,P),E})}}}function qh(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],s=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xe(t){return this instanceof Xe?(this.v=t,this):new Xe(t)}function kr(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(t,e||[]),u,h=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",m),u[Symbol.asyncIterator]=function(){return this},u;function m(A){return function(b){return Promise.resolve(b).then(A,P)}}function g(A,b){s[A]&&(u[A]=function(B){return new Promise(function(O,Q){h.push([A,B,O,Q])>1||y(A,B)})},b&&(u[A]=b(u[A])))}function y(A,b){try{w(s[A](b))}catch(B){E(h[0][3],B)}}function w(A){A.value instanceof Xe?Promise.resolve(A.value.v).then(T,P):E(h[0][2],A)}function T(A){y("next",A)}function P(A){y("throw",A)}function E(A,b){A(b),h.shift(),h.length&&y(h[0][0],h[0][1])}}function Vs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof qh=="function"?qh(t):t[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(h){o[h]=t[h]&&function(m){return new Promise(function(g,y){m=t[h](m),u(g,y,m.done,m.value)})}}function u(h,m,g,y){Promise.resolve(y).then(function(w){h({value:w,done:g})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qv(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Hp(o)}function Hp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Xv(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Oh(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let s=0;for(;s<o;)if(t[s].role==="user")e.push(t[s]),s++;else{const u=[];let h=!0;for(;s<o&&t[s].role==="model";)u.push(t[s]),h&&!Hp(t[s])&&(h=!1),s++;h?e.push(...u):e.pop()}return e}class jv{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new ey(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ey{constructor(e,o,s,u={},h=[]){this.apiClient=e,this.modelsModule=o,this.model=s,this.config=u,this.history=h,this.sendPromise=Promise.resolve(),Xv(h)}async sendMessage(e){var o;await this.sendPromise;const s=Nt(e.message),u=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var h,m,g;const y=await u,w=(m=(h=y.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content,T=y.automaticFunctionCallingHistory,P=this.getHistory(!0).length;let E=[];T!=null&&(E=(g=T.slice(P))!==null&&g!==void 0?g:[]);const A=w?[w]:[];this.recordHistory(s,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),u}async sendMessageStream(e){var o;await this.sendPromise;const s=Nt(e.message),u=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=u.then(()=>{}).catch(()=>{});const h=await u;return this.processStreamResponse(h,s)}getHistory(e=!1){const o=e?Oh(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var s,u;return kr(this,arguments,function*(){var m,g,y,w;const T=[];try{for(var P=!0,E=Vs(e),A;A=yield Xe(E.next()),m=A.done,!m;P=!0){w=A.value,P=!1;const b=w;if(Qv(b)){const B=(u=(s=b.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content;B!==void 0&&T.push(B)}yield yield Xe(b)}}catch(b){g={error:b}}finally{try{!P&&!m&&(y=E.return)&&(yield Xe(y.call(E)))}finally{if(g)throw g.error}}this.recordHistory(o,T)})}recordHistory(e,o,s){let u=[];o.length>0&&o.every(h=>h.role!==void 0)?u=o:u.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Oh(s)):this.history.push(e),this.history.push(...u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Pa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ty(t){const e={},o=c(t,["file"]);return o!=null&&d(e,["file"],o),e}function ny(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function iy(t){const e={},o=c(t,["name"]);return o!=null&&d(e,["_url","file"],Dp(o)),e}function oy(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function ry(t){const e={},o=c(t,["name"]);return o!=null&&d(e,["_url","file"],Dp(o)),e}function sy(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);return e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),o}function ly(t){const e={},o=c(t,["config"]);return o!=null&&sy(o,e),e}function ay(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["files"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["files"],h)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uy extends hi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Do(fi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=ly(e);return h=ue("files",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const w=ay(y),T=new h_;return Object.assign(T,w),T})}}async createInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=ty(e);return h=ue("upload/v1beta/files",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=ny(y),T=new p_;return Object.assign(T,w),T})}}async get(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=ry(e);return h=ue("files/{file}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=iy(e);return h=ue("files/{file}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const w=oy(y),T=new m_;return Object.assign(T,w),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ga(t){const e={},o=c(t,["data"]);if(o!=null&&d(e,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function cy(t){const e={},o=c(t,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Py(h))),d(e,["parts"],u)}const s=c(t,["role"]);return s!=null&&d(e,["role"],s),e}function dy(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function fy(t){const e={},o=c(t,["id"]);o!=null&&d(e,["id"],o);const s=c(t,["args"]);s!=null&&d(e,["args"],s);const u=c(t,["name"]);if(u!=null&&d(e,["name"],u),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hy(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(t,["description"]);o!=null&&d(e,["description"],o);const s=c(t,["name"]);s!=null&&d(e,["name"],s);const u=c(t,["parameters"]);u!=null&&d(e,["parameters"],u);const h=c(t,["parametersJsonSchema"]);h!=null&&d(e,["parametersJsonSchema"],h);const m=c(t,["response"]);m!=null&&d(e,["response"],m);const g=c(t,["responseJsonSchema"]);return g!=null&&d(e,["responseJsonSchema"],g),e}function py(t){const e={},o=c(t,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const s=c(t,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const u=c(t,["audioTimestamp"]);u!=null&&d(e,["audioTimestamp"],u);const h=c(t,["candidateCount"]);h!=null&&d(e,["candidateCount"],h);const m=c(t,["enableAffectiveDialog"]);m!=null&&d(e,["enableAffectiveDialog"],m);const g=c(t,["frequencyPenalty"]);g!=null&&d(e,["frequencyPenalty"],g);const y=c(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const w=c(t,["maxOutputTokens"]);w!=null&&d(e,["maxOutputTokens"],w);const T=c(t,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const P=c(t,["presencePenalty"]);P!=null&&d(e,["presencePenalty"],P);const E=c(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const A=c(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const b=c(t,["responseModalities"]);b!=null&&d(e,["responseModalities"],b);const B=c(t,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const O=c(t,["routingConfig"]);O!=null&&d(e,["routingConfig"],O);const Q=c(t,["seed"]);Q!=null&&d(e,["seed"],Q);const te=c(t,["speechConfig"]);te!=null&&d(e,["speechConfig"],Gp(te));const Y=c(t,["stopSequences"]);Y!=null&&d(e,["stopSequences"],Y);const se=c(t,["temperature"]);se!=null&&d(e,["temperature"],se);const he=c(t,["thinkingConfig"]);he!=null&&d(e,["thinkingConfig"],he);const me=c(t,["topK"]);me!=null&&d(e,["topK"],me);const pe=c(t,["topP"]);if(pe!=null&&d(e,["topP"],pe),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function my(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function gy(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function _y(t,e){const o={},s=c(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const u=c(t,["responseModalities"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","responseModalities"],u);const h=c(t,["temperature"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","temperature"],h);const m=c(t,["topP"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topP"],m);const g=c(t,["topK"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","topK"],g);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const w=c(t,["mediaResolution"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","mediaResolution"],w);const T=c(t,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const P=c(t,["speechConfig"]);e!==void 0&&P!=null&&d(e,["setup","generationConfig","speechConfig"],Vc(P));const E=c(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],cy(Nt(b)));const B=c(t,["tools"]);if(e!==void 0&&B!=null){let me=Lr(B);Array.isArray(me)&&(me=me.map(pe=>Ny(Rr(pe)))),d(e,["setup","tools"],me)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&d(e,["setup","sessionResumption"],Iy(O));const Q=c(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const te=c(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&d(e,["setup","outputAudioTranscription"],te);const Y=c(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);const se=c(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const he=c(t,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),o}function vy(t,e){const o={},s=c(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],py(s));const u=c(t,["responseModalities"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","responseModalities"],u);const h=c(t,["temperature"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","temperature"],h);const m=c(t,["topP"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topP"],m);const g=c(t,["topK"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","topK"],g);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const w=c(t,["mediaResolution"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","mediaResolution"],w);const T=c(t,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const P=c(t,["speechConfig"]);e!==void 0&&P!=null&&d(e,["setup","generationConfig","speechConfig"],Gp(Vc(P)));const E=c(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],Nt(b));const B=c(t,["tools"]);if(e!==void 0&&B!=null){let me=Lr(B);Array.isArray(me)&&(me=me.map(pe=>ky(Rr(pe)))),d(e,["setup","tools"],me)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&d(e,["setup","sessionResumption"],O);const Q=c(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const te=c(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&d(e,["setup","outputAudioTranscription"],te);const Y=c(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);const se=c(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const he=c(t,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),o}function yy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["setup","model"],qe(t,s));const u=c(e,["config"]);return u!=null&&d(o,["config"],_y(u,o)),o}function wy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["setup","model"],qe(t,s));const u=c(e,["config"]);return u!=null&&d(o,["config"],vy(u,o)),o}function xy(t){const e={},o=c(t,["musicGenerationConfig"]);return o!=null&&d(e,["musicGenerationConfig"],o),e}function Ty(t){const e={},o=c(t,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>u)),d(e,["weightedPrompts"],s)}return e}function Cy(t){const e={},o=c(t,["media"]);if(o!=null){let w=kp(o);Array.isArray(w)&&(w=w.map(T=>ga(T))),d(e,["mediaChunks"],w)}const s=c(t,["audio"]);s!=null&&d(e,["audio"],ga(Mp(s)));const u=c(t,["audioStreamEnd"]);u!=null&&d(e,["audioStreamEnd"],u);const h=c(t,["video"]);h!=null&&d(e,["video"],ga(Ap(h)));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["activityStart"]);g!=null&&d(e,["activityStart"],g);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function Sy(t){const e={},o=c(t,["media"]);if(o!=null){let w=kp(o);Array.isArray(w)&&(w=w.map(T=>T)),d(e,["mediaChunks"],w)}const s=c(t,["audio"]);s!=null&&d(e,["audio"],Mp(s));const u=c(t,["audioStreamEnd"]);u!=null&&d(e,["audioStreamEnd"],u);const h=c(t,["video"]);h!=null&&d(e,["video"],Ap(h));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const g=c(t,["activityStart"]);g!=null&&d(e,["activityStart"],g);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function Ey(t){const e={},o=c(t,["setupComplete"]);o!=null&&d(e,["setupComplete"],o);const s=c(t,["serverContent"]);s!=null&&d(e,["serverContent"],s);const u=c(t,["toolCall"]);u!=null&&d(e,["toolCall"],u);const h=c(t,["toolCallCancellation"]);h!=null&&d(e,["toolCallCancellation"],h);const m=c(t,["usageMetadata"]);m!=null&&d(e,["usageMetadata"],Ay(m));const g=c(t,["goAway"]);g!=null&&d(e,["goAway"],g);const y=c(t,["sessionResumptionUpdate"]);return y!=null&&d(e,["sessionResumptionUpdate"],y),e}function Py(t){const e={},o=c(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=c(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const u=c(t,["executableCode"]);u!=null&&d(e,["executableCode"],u);const h=c(t,["fileData"]);h!=null&&d(e,["fileData"],dy(h));const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],fy(m));const g=c(t,["functionResponse"]);g!=null&&d(e,["functionResponse"],g);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],ga(y));const w=c(t,["text"]);w!=null&&d(e,["text"],w);const T=c(t,["thought"]);T!=null&&d(e,["thought"],T);const P=c(t,["thoughtSignature"]);P!=null&&d(e,["thoughtSignature"],P);const E=c(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function Iy(t){const e={},o=c(t,["handle"]);if(o!=null&&d(e,["handle"],o),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Gp(t){const e={},o=c(t,["languageCode"]);o!=null&&d(e,["languageCode"],o);const s=c(t,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Ny(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let T=o;Array.isArray(T)&&(T=T.map(P=>P)),d(e,["functionDeclarations"],T)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],u);const h=c(t,["fileSearch"]);h!=null&&d(e,["fileSearch"],h);const m=c(t,["codeExecution"]);if(m!=null&&d(e,["codeExecution"],m),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(t,["googleMaps"]);g!=null&&d(e,["googleMaps"],my(g));const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],gy(y));const w=c(t,["urlContext"]);return w!=null&&d(e,["urlContext"],w),e}function ky(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let P=o;Array.isArray(P)&&(P=P.map(E=>hy(E))),d(e,["functionDeclarations"],P)}const s=c(t,["retrieval"]);s!=null&&d(e,["retrieval"],s);const u=c(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const h=c(t,["computerUse"]);if(h!=null&&d(e,["computerUse"],h),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const m=c(t,["codeExecution"]);m!=null&&d(e,["codeExecution"],m);const g=c(t,["enterpriseWebSearch"]);g!=null&&d(e,["enterpriseWebSearch"],g);const y=c(t,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const w=c(t,["googleSearch"]);w!=null&&d(e,["googleSearch"],w);const T=c(t,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function Ay(t){const e={},o=c(t,["promptTokenCount"]);o!=null&&d(e,["promptTokenCount"],o);const s=c(t,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const u=c(t,["candidatesTokenCount"]);u!=null&&d(e,["responseTokenCount"],u);const h=c(t,["toolUsePromptTokenCount"]);h!=null&&d(e,["toolUsePromptTokenCount"],h);const m=c(t,["thoughtsTokenCount"]);m!=null&&d(e,["thoughtsTokenCount"],m);const g=c(t,["totalTokenCount"]);g!=null&&d(e,["totalTokenCount"],g);const y=c(t,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["promptTokensDetails"],A)}const w=c(t,["cacheTokensDetails"]);if(w!=null){let A=w;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["cacheTokensDetails"],A)}const T=c(t,["candidatesTokensDetails"]);if(T!=null){let A=T;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["responseTokensDetails"],A)}const P=c(t,["toolUsePromptTokensDetails"]);if(P!=null){let A=P;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["toolUsePromptTokensDetails"],A)}const E=c(t,["trafficType"]);return E!=null&&d(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function My(t){const e={},o=c(t,["data"]);if(o!=null&&d(e,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Ry(t){const e={},o=c(t,["content"]);o!=null&&d(e,["content"],o);const s=c(t,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],Ly(s));const u=c(t,["tokenCount"]);u!=null&&d(e,["tokenCount"],u);const h=c(t,["finishReason"]);h!=null&&d(e,["finishReason"],h);const m=c(t,["avgLogprobs"]);m!=null&&d(e,["avgLogprobs"],m);const g=c(t,["groundingMetadata"]);g!=null&&d(e,["groundingMetadata"],g);const y=c(t,["index"]);y!=null&&d(e,["index"],y);const w=c(t,["logprobsResult"]);w!=null&&d(e,["logprobsResult"],w);const T=c(t,["safetyRatings"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(A=>A)),d(e,["safetyRatings"],E)}const P=c(t,["urlContextMetadata"]);return P!=null&&d(e,["urlContextMetadata"],P),e}function Ly(t){const e={},o=c(t,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>u)),d(e,["citations"],s)}return e}function Dy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let h=mn(u);Array.isArray(h)&&(h=h.map(m=>m)),d(o,["contents"],h)}return o}function Fy(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["tokensInfo"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),d(e,["tokensInfo"],u)}return e}function Uy(t){const e={},o=c(t,["values"]);o!=null&&d(e,["values"],o);const s=c(t,["statistics"]);return s!=null&&d(e,["statistics"],zy(s)),e}function zy(t){const e={},o=c(t,["truncated"]);o!=null&&d(e,["truncated"],o);const s=c(t,["token_count"]);return s!=null&&d(e,["tokenCount"],s),e}function Ia(t){const e={},o=c(t,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>Z0(h))),d(e,["parts"],u)}const s=c(t,["role"]);return s!=null&&d(e,["role"],s),e}function By(t){const e={},o=c(t,["controlType"]);o!=null&&d(e,["controlType"],o);const s=c(t,["enableControlImageComputation"]);return s!=null&&d(e,["computeControl"],s),e}function Vy(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function by(t,e){const o={},s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],Nt(s));const u=c(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>Jp(g))),d(e,["tools"],m)}const h=c(t,["generationConfig"]);return e!==void 0&&h!=null&&d(e,["generationConfig"],M0(h)),o}function Hy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let m=mn(u);Array.isArray(m)&&(m=m.map(g=>Ia(g))),d(o,["contents"],m)}const h=c(e,["config"]);return h!=null&&Vy(h),o}function Gy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let m=mn(u);Array.isArray(m)&&(m=m.map(g=>g)),d(o,["contents"],m)}const h=c(e,["config"]);return h!=null&&by(h,o),o}function qy(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["totalTokens"]);s!=null&&d(e,["totalTokens"],s);const u=c(t,["cachedContentTokenCount"]);return u!=null&&d(e,["cachedContentTokenCount"],u),e}function Oy(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["totalTokens"]);return s!=null&&d(e,["totalTokens"],s),e}function Wy(t,e){const o={},s=c(e,["model"]);return s!=null&&d(o,["_url","name"],qe(t,s)),o}function Zy(t,e){const o={},s=c(e,["model"]);return s!=null&&d(o,["_url","name"],qe(t,s)),o}function Jy(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function Ky(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function $y(t,e){const o={},s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const u=c(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const h=c(t,["numberOfImages"]);e!==void 0&&h!=null&&d(e,["parameters","sampleCount"],h);const m=c(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const g=c(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const w=c(t,["safetyFilterLevel"]);e!==void 0&&w!=null&&d(e,["parameters","safetySetting"],w);const T=c(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const P=c(t,["includeSafetyAttributes"]);e!==void 0&&P!=null&&d(e,["parameters","includeSafetyAttributes"],P);const E=c(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const A=c(t,["language"]);e!==void 0&&A!=null&&d(e,["parameters","language"],A);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const B=c(t,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&d(e,["parameters","addWatermark"],O);const Q=c(t,["labels"]);e!==void 0&&Q!=null&&d(e,["labels"],Q);const te=c(t,["editMode"]);e!==void 0&&te!=null&&d(e,["parameters","editMode"],te);const Y=c(t,["baseSteps"]);return e!==void 0&&Y!=null&&d(e,["parameters","editConfig","baseSteps"],Y),o}function Yy(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const h=c(e,["referenceImages"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>X0(y))),d(o,["instances[0]","referenceImages"],g)}const m=c(e,["config"]);return m!=null&&$y(m,o),o}function Qy(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>Na(h))),d(e,["generatedImages"],u)}return e}function Xy(t,e){const o={},s=c(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const u=c(t,["title"]);e!==void 0&&u!=null&&d(e,["requests[]","title"],u);const h=c(t,["outputDimensionality"]);if(e!==void 0&&h!=null&&d(e,["requests[]","outputDimensionality"],h),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function jy(t,e){const o={},s=c(t,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const u=c(t,["title"]);e!==void 0&&u!=null&&d(e,["instances[]","title"],u);const h=c(t,["outputDimensionality"]);e!==void 0&&h!=null&&d(e,["parameters","outputDimensionality"],h);const m=c(t,["mimeType"]);e!==void 0&&m!=null&&d(e,["instances[]","mimeType"],m);const g=c(t,["autoTruncate"]);return e!==void 0&&g!=null&&d(e,["parameters","autoTruncate"],g),o}function e0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let g=Uc(t,u);Array.isArray(g)&&(g=g.map(y=>y)),d(o,["requests[]","content"],g)}const h=c(e,["config"]);h!=null&&Xy(h,o);const m=c(e,["model"]);return m!==void 0&&d(o,["requests[]","model"],qe(t,m)),o}function t0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let m=Uc(t,u);Array.isArray(m)&&(m=m.map(g=>g)),d(o,["instances[]","content"],m)}const h=c(e,["config"]);return h!=null&&jy(h,o),o}function n0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["embeddings"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["embeddings"],h)}const u=c(t,["metadata"]);return u!=null&&d(e,["metadata"],u),e}function i0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["predictions[]","embeddings"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>Uy(m))),d(e,["embeddings"],h)}const u=c(t,["metadata"]);return u!=null&&d(e,["metadata"],u),e}function o0(t){const e={},o=c(t,["endpoint"]);o!=null&&d(e,["name"],o);const s=c(t,["deployedModelId"]);return s!=null&&d(e,["deployedModelId"],s),e}function r0(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function s0(t){const e={},o=c(t,["id"]);o!=null&&d(e,["id"],o);const s=c(t,["args"]);s!=null&&d(e,["args"],s);const u=c(t,["name"]);if(u!=null&&d(e,["name"],u),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function l0(t){const e={},o=c(t,["mode"]);o!=null&&d(e,["mode"],o);const s=c(t,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function a0(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(t,["description"]);o!=null&&d(e,["description"],o);const s=c(t,["name"]);s!=null&&d(e,["name"],s);const u=c(t,["parameters"]);u!=null&&d(e,["parameters"],u);const h=c(t,["parametersJsonSchema"]);h!=null&&d(e,["parametersJsonSchema"],h);const m=c(t,["response"]);m!=null&&d(e,["response"],m);const g=c(t,["responseJsonSchema"]);return g!=null&&d(e,["responseJsonSchema"],g),e}function u0(t,e,o){const s={},u=c(e,["systemInstruction"]);o!==void 0&&u!=null&&d(o,["systemInstruction"],Ia(Nt(u)));const h=c(e,["temperature"]);h!=null&&d(s,["temperature"],h);const m=c(e,["topP"]);m!=null&&d(s,["topP"],m);const g=c(e,["topK"]);g!=null&&d(s,["topK"],g);const y=c(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const w=c(e,["maxOutputTokens"]);w!=null&&d(s,["maxOutputTokens"],w);const T=c(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const P=c(e,["responseLogprobs"]);P!=null&&d(s,["responseLogprobs"],P);const E=c(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&d(s,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&d(s,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&d(s,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&d(s,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&d(s,["responseSchema"],zc(Q));const te=c(e,["responseJsonSchema"]);if(te!=null&&d(s,["responseJsonSchema"],te),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=c(e,["safetySettings"]);if(o!==void 0&&Y!=null){let X=Y;Array.isArray(X)&&(X=X.map(ce=>j0(ce))),d(o,["safetySettings"],X)}const se=c(e,["tools"]);if(o!==void 0&&se!=null){let X=Lr(se);Array.isArray(X)&&(X=X.map(ce=>sw(Rr(ce)))),d(o,["tools"],X)}const he=c(e,["toolConfig"]);if(o!==void 0&&he!=null&&d(o,["toolConfig"],rw(he)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const me=c(e,["cachedContent"]);o!==void 0&&me!=null&&d(o,["cachedContent"],pi(t,me));const pe=c(e,["responseModalities"]);pe!=null&&d(s,["responseModalities"],pe);const Te=c(e,["mediaResolution"]);Te!=null&&d(s,["mediaResolution"],Te);const le=c(e,["speechConfig"]);if(le!=null&&d(s,["speechConfig"],Bc(le)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ie=c(e,["thinkingConfig"]);Ie!=null&&d(s,["thinkingConfig"],Ie);const Se=c(e,["imageConfig"]);return Se!=null&&d(s,["imageConfig"],U0(Se)),s}function c0(t,e,o){const s={},u=c(e,["systemInstruction"]);o!==void 0&&u!=null&&d(o,["systemInstruction"],Nt(u));const h=c(e,["temperature"]);h!=null&&d(s,["temperature"],h);const m=c(e,["topP"]);m!=null&&d(s,["topP"],m);const g=c(e,["topK"]);g!=null&&d(s,["topK"],g);const y=c(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const w=c(e,["maxOutputTokens"]);w!=null&&d(s,["maxOutputTokens"],w);const T=c(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const P=c(e,["responseLogprobs"]);P!=null&&d(s,["responseLogprobs"],P);const E=c(e,["logprobs"]);E!=null&&d(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&d(s,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&d(s,["frequencyPenalty"],b);const B=c(e,["seed"]);B!=null&&d(s,["seed"],B);const O=c(e,["responseMimeType"]);O!=null&&d(s,["responseMimeType"],O);const Q=c(e,["responseSchema"]);Q!=null&&d(s,["responseSchema"],zc(Q));const te=c(e,["responseJsonSchema"]);te!=null&&d(s,["responseJsonSchema"],te);const Y=c(e,["routingConfig"]);Y!=null&&d(s,["routingConfig"],Y);const se=c(e,["modelSelectionConfig"]);se!=null&&d(s,["modelConfig"],se);const he=c(e,["safetySettings"]);if(o!==void 0&&he!=null){let Ae=he;Array.isArray(Ae)&&(Ae=Ae.map(ze=>ze)),d(o,["safetySettings"],Ae)}const me=c(e,["tools"]);if(o!==void 0&&me!=null){let Ae=Lr(me);Array.isArray(Ae)&&(Ae=Ae.map(ze=>Jp(Rr(ze)))),d(o,["tools"],Ae)}const pe=c(e,["toolConfig"]);o!==void 0&&pe!=null&&d(o,["toolConfig"],pe);const Te=c(e,["labels"]);o!==void 0&&Te!=null&&d(o,["labels"],Te);const le=c(e,["cachedContent"]);o!==void 0&&le!=null&&d(o,["cachedContent"],pi(t,le));const Ie=c(e,["responseModalities"]);Ie!=null&&d(s,["responseModalities"],Ie);const Se=c(e,["mediaResolution"]);Se!=null&&d(s,["mediaResolution"],Se);const X=c(e,["speechConfig"]);X!=null&&d(s,["speechConfig"],Zp(Bc(X)));const ce=c(e,["audioTimestamp"]);ce!=null&&d(s,["audioTimestamp"],ce);const Ue=c(e,["thinkingConfig"]);Ue!=null&&d(s,["thinkingConfig"],Ue);const je=c(e,["imageConfig"]);return je!=null&&d(s,["imageConfig"],z0(je)),s}function Wh(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let m=mn(u);Array.isArray(m)&&(m=m.map(g=>Ia(g))),d(o,["contents"],m)}const h=c(e,["config"]);return h!=null&&d(o,["generationConfig"],u0(t,h,o)),o}function Zh(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["contents"]);if(u!=null){let m=mn(u);Array.isArray(m)&&(m=m.map(g=>g)),d(o,["contents"],m)}const h=c(e,["config"]);return h!=null&&d(o,["generationConfig"],c0(t,h,o)),o}function Jh(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(w=>Ry(w))),d(e,["candidates"],y)}const u=c(t,["modelVersion"]);u!=null&&d(e,["modelVersion"],u);const h=c(t,["promptFeedback"]);h!=null&&d(e,["promptFeedback"],h);const m=c(t,["responseId"]);m!=null&&d(e,["responseId"],m);const g=c(t,["usageMetadata"]);return g!=null&&d(e,["usageMetadata"],g),e}function Kh(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["candidates"]);if(s!=null){let w=s;Array.isArray(w)&&(w=w.map(T=>T)),d(e,["candidates"],w)}const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const h=c(t,["modelVersion"]);h!=null&&d(e,["modelVersion"],h);const m=c(t,["promptFeedback"]);m!=null&&d(e,["promptFeedback"],m);const g=c(t,["responseId"]);g!=null&&d(e,["responseId"],g);const y=c(t,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function d0(t,e){const o={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const h=c(t,["guidanceScale"]);if(e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const g=c(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const y=c(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const w=c(t,["includeRaiReason"]);e!==void 0&&w!=null&&d(e,["parameters","includeRaiReason"],w);const T=c(t,["language"]);e!==void 0&&T!=null&&d(e,["parameters","language"],T);const P=c(t,["outputMimeType"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","mimeType"],P);const E=c(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(t,["imageSize"]);if(e!==void 0&&A!=null&&d(e,["parameters","sampleImageSize"],A),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function f0(t,e){const o={},s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const u=c(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const h=c(t,["numberOfImages"]);e!==void 0&&h!=null&&d(e,["parameters","sampleCount"],h);const m=c(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const g=c(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const w=c(t,["safetyFilterLevel"]);e!==void 0&&w!=null&&d(e,["parameters","safetySetting"],w);const T=c(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const P=c(t,["includeSafetyAttributes"]);e!==void 0&&P!=null&&d(e,["parameters","includeSafetyAttributes"],P);const E=c(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const A=c(t,["language"]);e!==void 0&&A!=null&&d(e,["parameters","language"],A);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const B=c(t,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const O=c(t,["addWatermark"]);e!==void 0&&O!=null&&d(e,["parameters","addWatermark"],O);const Q=c(t,["labels"]);e!==void 0&&Q!=null&&d(e,["labels"],Q);const te=c(t,["imageSize"]);e!==void 0&&te!=null&&d(e,["parameters","sampleImageSize"],te);const Y=c(t,["enhancePrompt"]);return e!==void 0&&Y!=null&&d(e,["parameters","enhancePrompt"],Y),o}function h0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const h=c(e,["config"]);return h!=null&&d0(h,o),o}function p0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const h=c(e,["config"]);return h!=null&&f0(h,o),o}function m0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["predictions"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>I0(m))),d(e,["generatedImages"],h)}const u=c(t,["positivePromptSafetyAttributes"]);return u!=null&&d(e,["positivePromptSafetyAttributes"],Op(u)),e}function g0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["predictions"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>Na(m))),d(e,["generatedImages"],h)}const u=c(t,["positivePromptSafetyAttributes"]);return u!=null&&d(e,["positivePromptSafetyAttributes"],Wp(u)),e}function _0(t,e){const o={},s=c(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(t,["durationSeconds"]);if(e!==void 0&&u!=null&&d(e,["parameters","durationSeconds"],u),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=c(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const m=c(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const g=c(t,["personGeneration"]);if(e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=c(t,["negativePrompt"]);e!==void 0&&y!=null&&d(e,["parameters","negativePrompt"],y);const w=c(t,["enhancePrompt"]);if(e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=c(t,["lastFrame"]);e!==void 0&&T!=null&&d(e,["instances[0]","lastFrame"],ka(T));const P=c(t,["referenceImages"]);if(e!==void 0&&P!=null){let E=P;Array.isArray(E)&&(E=E.map(A=>yw(A))),d(e,["instances[0]","referenceImages"],E)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function v0(t,e){const o={},s=c(t,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const u=c(t,["outputGcsUri"]);e!==void 0&&u!=null&&d(e,["parameters","storageUri"],u);const h=c(t,["fps"]);e!==void 0&&h!=null&&d(e,["parameters","fps"],h);const m=c(t,["durationSeconds"]);e!==void 0&&m!=null&&d(e,["parameters","durationSeconds"],m);const g=c(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const y=c(t,["aspectRatio"]);e!==void 0&&y!=null&&d(e,["parameters","aspectRatio"],y);const w=c(t,["resolution"]);e!==void 0&&w!=null&&d(e,["parameters","resolution"],w);const T=c(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const P=c(t,["pubsubTopic"]);e!==void 0&&P!=null&&d(e,["parameters","pubsubTopic"],P);const E=c(t,["negativePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","negativePrompt"],E);const A=c(t,["enhancePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","enhancePrompt"],A);const b=c(t,["generateAudio"]);e!==void 0&&b!=null&&d(e,["parameters","generateAudio"],b);const B=c(t,["lastFrame"]);e!==void 0&&B!=null&&d(e,["instances[0]","lastFrame"],Nn(B));const O=c(t,["referenceImages"]);if(e!==void 0&&O!=null){let Y=O;Array.isArray(Y)&&(Y=Y.map(se=>ww(se))),d(e,["instances[0]","referenceImages"],Y)}const Q=c(t,["mask"]);e!==void 0&&Q!=null&&d(e,["instances[0]","mask"],vw(Q));const te=c(t,["compressionQuality"]);return e!==void 0&&te!=null&&d(e,["parameters","compressionQuality"],te),o}function y0(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response","generateVideoResponse"]);return m!=null&&d(e,["response"],C0(m)),e}function w0(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response"]);return m!=null&&d(e,["response"],S0(m)),e}function x0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const h=c(e,["image"]);h!=null&&d(o,["instances[0]","image"],ka(h));const m=c(e,["video"]);m!=null&&d(o,["instances[0]","video"],Kp(m));const g=c(e,["source"]);g!=null&&E0(g,o);const y=c(e,["config"]);return y!=null&&_0(y,o),o}function T0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const h=c(e,["image"]);h!=null&&d(o,["instances[0]","image"],Nn(h));const m=c(e,["video"]);m!=null&&d(o,["instances[0]","video"],$p(m));const g=c(e,["source"]);g!=null&&P0(g,o);const y=c(e,["config"]);return y!=null&&v0(y,o),o}function C0(t){const e={},o=c(t,["generatedSamples"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>k0(m))),d(e,["generatedVideos"],h)}const s=c(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(e,["raiMediaFilteredReasons"],u),e}function S0(t){const e={},o=c(t,["videos"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>A0(m))),d(e,["generatedVideos"],h)}const s=c(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const u=c(t,["raiMediaFilteredReasons"]);return u!=null&&d(e,["raiMediaFilteredReasons"],u),e}function E0(t,e){const o={},s=c(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const u=c(t,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],ka(u));const h=c(t,["video"]);return e!==void 0&&h!=null&&d(e,["instances[0]","video"],Kp(h)),o}function P0(t,e){const o={},s=c(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const u=c(t,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],Nn(u));const h=c(t,["video"]);return e!==void 0&&h!=null&&d(e,["instances[0]","video"],$p(h)),o}function I0(t){const e={},o=c(t,["_self"]);o!=null&&d(e,["image"],B0(o));const s=c(t,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const u=c(t,["_self"]);return u!=null&&d(e,["safetyAttributes"],Op(u)),e}function Na(t){const e={},o=c(t,["_self"]);o!=null&&d(e,["image"],qp(o));const s=c(t,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const u=c(t,["_self"]);u!=null&&d(e,["safetyAttributes"],Wp(u));const h=c(t,["prompt"]);return h!=null&&d(e,["enhancedPrompt"],h),e}function N0(t){const e={},o=c(t,["_self"]);o!=null&&d(e,["mask"],qp(o));const s=c(t,["labels"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),d(e,["labels"],u)}return e}function k0(t){const e={},o=c(t,["video"]);return o!=null&&d(e,["video"],gw(o)),e}function A0(t){const e={},o=c(t,["_self"]);return o!=null&&d(e,["video"],_w(o)),e}function M0(t){const e={},o=c(t,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const s=c(t,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const u=c(t,["audioTimestamp"]);u!=null&&d(e,["audioTimestamp"],u);const h=c(t,["candidateCount"]);h!=null&&d(e,["candidateCount"],h);const m=c(t,["enableAffectiveDialog"]);m!=null&&d(e,["enableAffectiveDialog"],m);const g=c(t,["frequencyPenalty"]);g!=null&&d(e,["frequencyPenalty"],g);const y=c(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const w=c(t,["maxOutputTokens"]);w!=null&&d(e,["maxOutputTokens"],w);const T=c(t,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const P=c(t,["presencePenalty"]);P!=null&&d(e,["presencePenalty"],P);const E=c(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const A=c(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const b=c(t,["responseModalities"]);b!=null&&d(e,["responseModalities"],b);const B=c(t,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const O=c(t,["routingConfig"]);O!=null&&d(e,["routingConfig"],O);const Q=c(t,["seed"]);Q!=null&&d(e,["seed"],Q);const te=c(t,["speechConfig"]);te!=null&&d(e,["speechConfig"],Zp(te));const Y=c(t,["stopSequences"]);Y!=null&&d(e,["stopSequences"],Y);const se=c(t,["temperature"]);se!=null&&d(e,["temperature"],se);const he=c(t,["thinkingConfig"]);he!=null&&d(e,["thinkingConfig"],he);const me=c(t,["topK"]);me!=null&&d(e,["topK"],me);const pe=c(t,["topP"]);if(pe!=null&&d(e,["topP"],pe),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function R0(t,e){const o={},s=c(e,["model"]);return s!=null&&d(o,["_url","name"],qe(t,s)),o}function L0(t,e){const o={},s=c(e,["model"]);return s!=null&&d(o,["_url","name"],qe(t,s)),o}function D0(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function F0(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function U0(t){const e={},o=c(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=c(t,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function z0(t){const e={},o=c(t,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=c(t,["imageSize"]);s!=null&&d(e,["imageSize"],s);const u=c(t,["outputMimeType"]);u!=null&&d(e,["imageOutputOptions","mimeType"],u);const h=c(t,["outputCompressionQuality"]);return h!=null&&d(e,["imageOutputOptions","compressionQuality"],h),e}function B0(t){const e={},o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],eo(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function qp(t){const e={},o=c(t,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const s=c(t,["bytesBase64Encoded"]);s!=null&&d(e,["imageBytes"],eo(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["mimeType"],u),e}function ka(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(t,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],eo(o));const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Nn(t){const e={},o=c(t,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const s=c(t,["imageBytes"]);s!=null&&d(e,["bytesBase64Encoded"],eo(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["mimeType"],u),e}function V0(t,e,o){const s={},u=c(e,["pageSize"]);o!==void 0&&u!=null&&d(o,["_query","pageSize"],u);const h=c(e,["pageToken"]);o!==void 0&&h!=null&&d(o,["_query","pageToken"],h);const m=c(e,["filter"]);o!==void 0&&m!=null&&d(o,["_query","filter"],m);const g=c(e,["queryBase"]);return o!==void 0&&g!=null&&d(o,["_url","models_url"],Fp(t,g)),s}function b0(t,e,o){const s={},u=c(e,["pageSize"]);o!==void 0&&u!=null&&d(o,["_query","pageSize"],u);const h=c(e,["pageToken"]);o!==void 0&&h!=null&&d(o,["_query","pageToken"],h);const m=c(e,["filter"]);o!==void 0&&m!=null&&d(o,["_query","filter"],m);const g=c(e,["queryBase"]);return o!==void 0&&g!=null&&d(o,["_url","models_url"],Fp(t,g)),s}function H0(t,e){const o={},s=c(e,["config"]);return s!=null&&V0(t,s,o),o}function G0(t,e){const o={},s=c(e,["config"]);return s!=null&&b0(t,s,o),o}function q0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["_self"]);if(u!=null){let h=Up(u);Array.isArray(h)&&(h=h.map(m=>yc(m))),d(e,["models"],h)}return e}function O0(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["_self"]);if(u!=null){let h=Up(u);Array.isArray(h)&&(h=h.map(m=>wc(m))),d(e,["models"],h)}return e}function W0(t){const e={},o=c(t,["maskMode"]);o!=null&&d(e,["maskMode"],o);const s=c(t,["segmentationClasses"]);s!=null&&d(e,["maskClasses"],s);const u=c(t,["maskDilation"]);return u!=null&&d(e,["dilation"],u),e}function yc(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["displayName"]);s!=null&&d(e,["displayName"],s);const u=c(t,["description"]);u!=null&&d(e,["description"],u);const h=c(t,["version"]);h!=null&&d(e,["version"],h);const m=c(t,["_self"]);m!=null&&d(e,["tunedModelInfo"],lw(m));const g=c(t,["inputTokenLimit"]);g!=null&&d(e,["inputTokenLimit"],g);const y=c(t,["outputTokenLimit"]);y!=null&&d(e,["outputTokenLimit"],y);const w=c(t,["supportedGenerationMethods"]);w!=null&&d(e,["supportedActions"],w);const T=c(t,["temperature"]);T!=null&&d(e,["temperature"],T);const P=c(t,["maxTemperature"]);P!=null&&d(e,["maxTemperature"],P);const E=c(t,["topP"]);E!=null&&d(e,["topP"],E);const A=c(t,["topK"]);A!=null&&d(e,["topK"],A);const b=c(t,["thinking"]);return b!=null&&d(e,["thinking"],b),e}function wc(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["displayName"]);s!=null&&d(e,["displayName"],s);const u=c(t,["description"]);u!=null&&d(e,["description"],u);const h=c(t,["versionId"]);h!=null&&d(e,["version"],h);const m=c(t,["deployedModels"]);if(m!=null){let P=m;Array.isArray(P)&&(P=P.map(E=>o0(E))),d(e,["endpoints"],P)}const g=c(t,["labels"]);g!=null&&d(e,["labels"],g);const y=c(t,["_self"]);y!=null&&d(e,["tunedModelInfo"],aw(y));const w=c(t,["defaultCheckpointId"]);w!=null&&d(e,["defaultCheckpointId"],w);const T=c(t,["checkpoints"]);if(T!=null){let P=T;Array.isArray(P)&&(P=P.map(E=>E)),d(e,["checkpoints"],P)}return e}function Z0(t){const e={},o=c(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=c(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const u=c(t,["executableCode"]);u!=null&&d(e,["executableCode"],u);const h=c(t,["fileData"]);h!=null&&d(e,["fileData"],r0(h));const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],s0(m));const g=c(t,["functionResponse"]);g!=null&&d(e,["functionResponse"],g);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],My(y));const w=c(t,["text"]);w!=null&&d(e,["text"],w);const T=c(t,["thought"]);T!=null&&d(e,["thought"],T);const P=c(t,["thoughtSignature"]);P!=null&&d(e,["thoughtSignature"],P);const E=c(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function J0(t){const e={},o=c(t,["productImage"]);return o!=null&&d(e,["image"],Nn(o)),e}function K0(t,e){const o={},s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const u=c(t,["baseSteps"]);e!==void 0&&u!=null&&d(e,["parameters","baseSteps"],u);const h=c(t,["outputGcsUri"]);e!==void 0&&h!=null&&d(e,["parameters","storageUri"],h);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const g=c(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const w=c(t,["addWatermark"]);e!==void 0&&w!=null&&d(e,["parameters","addWatermark"],w);const T=c(t,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","compressionQuality"],P);const E=c(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const A=c(t,["labels"]);return e!==void 0&&A!=null&&d(e,["labels"],A),o}function $0(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["source"]);u!=null&&Q0(u,o);const h=c(e,["config"]);return h!=null&&K0(h,o),o}function Y0(t){const e={},o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>Na(u))),d(e,["generatedImages"],s)}return e}function Q0(t,e){const o={},s=c(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const u=c(t,["personImage"]);e!==void 0&&u!=null&&d(e,["instances[0]","personImage","image"],Nn(u));const h=c(t,["productImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>J0(g))),d(e,["instances[0]","productImages"],m)}return o}function X0(t){const e={},o=c(t,["referenceImage"]);o!=null&&d(e,["referenceImage"],Nn(o));const s=c(t,["referenceId"]);s!=null&&d(e,["referenceId"],s);const u=c(t,["referenceType"]);u!=null&&d(e,["referenceType"],u);const h=c(t,["maskImageConfig"]);h!=null&&d(e,["maskImageConfig"],W0(h));const m=c(t,["controlImageConfig"]);m!=null&&d(e,["controlImageConfig"],By(m));const g=c(t,["styleImageConfig"]);g!=null&&d(e,["styleImageConfig"],g);const y=c(t,["subjectImageConfig"]);return y!=null&&d(e,["subjectImageConfig"],y),e}function Op(t){const e={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const s=c(t,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const u=c(t,["contentType"]);return u!=null&&d(e,["contentType"],u),e}function Wp(t){const e={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const s=c(t,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const u=c(t,["contentType"]);return u!=null&&d(e,["contentType"],u),e}function j0(t){const e={},o=c(t,["category"]);if(o!=null&&d(e,["category"],o),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(t,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function ew(t){const e={},o=c(t,["image"]);return o!=null&&d(e,["image"],Nn(o)),e}function tw(t,e){const o={},s=c(t,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const u=c(t,["maxPredictions"]);e!==void 0&&u!=null&&d(e,["parameters","maxPredictions"],u);const h=c(t,["confidenceThreshold"]);e!==void 0&&h!=null&&d(e,["parameters","confidenceThreshold"],h);const m=c(t,["maskDilation"]);e!==void 0&&m!=null&&d(e,["parameters","maskDilation"],m);const g=c(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&d(e,["parameters","binaryColorThreshold"],g);const y=c(t,["labels"]);return e!==void 0&&y!=null&&d(e,["labels"],y),o}function nw(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["source"]);u!=null&&ow(u,o);const h=c(e,["config"]);return h!=null&&tw(h,o),o}function iw(t){const e={},o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>N0(u))),d(e,["generatedMasks"],s)}return e}function ow(t,e){const o={},s=c(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const u=c(t,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],Nn(u));const h=c(t,["scribbleImage"]);return e!==void 0&&h!=null&&d(e,["instances[0]","scribble"],ew(h)),o}function Zp(t){const e={},o=c(t,["languageCode"]);o!=null&&d(e,["languageCode"],o);const s=c(t,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function rw(t){const e={},o=c(t,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],l0(o));const s=c(t,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function sw(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let T=o;Array.isArray(T)&&(T=T.map(P=>P)),d(e,["functionDeclarations"],T)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],u);const h=c(t,["fileSearch"]);h!=null&&d(e,["fileSearch"],h);const m=c(t,["codeExecution"]);if(m!=null&&d(e,["codeExecution"],m),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(t,["googleMaps"]);g!=null&&d(e,["googleMaps"],D0(g));const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],F0(y));const w=c(t,["urlContext"]);return w!=null&&d(e,["urlContext"],w),e}function Jp(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let P=o;Array.isArray(P)&&(P=P.map(E=>a0(E))),d(e,["functionDeclarations"],P)}const s=c(t,["retrieval"]);s!=null&&d(e,["retrieval"],s);const u=c(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);const h=c(t,["computerUse"]);if(h!=null&&d(e,["computerUse"],h),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const m=c(t,["codeExecution"]);m!=null&&d(e,["codeExecution"],m);const g=c(t,["enterpriseWebSearch"]);g!=null&&d(e,["enterpriseWebSearch"],g);const y=c(t,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const w=c(t,["googleSearch"]);w!=null&&d(e,["googleSearch"],w);const T=c(t,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function lw(t){const e={},o=c(t,["baseModel"]);o!=null&&d(e,["baseModel"],o);const s=c(t,["createTime"]);s!=null&&d(e,["createTime"],s);const u=c(t,["updateTime"]);return u!=null&&d(e,["updateTime"],u),e}function aw(t){const e={},o=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(e,["baseModel"],o);const s=c(t,["createTime"]);s!=null&&d(e,["createTime"],s);const u=c(t,["updateTime"]);return u!=null&&d(e,["updateTime"],u),e}function uw(t,e){const o={},s=c(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const u=c(t,["description"]);e!==void 0&&u!=null&&d(e,["description"],u);const h=c(t,["defaultCheckpointId"]);return e!==void 0&&h!=null&&d(e,["defaultCheckpointId"],h),o}function cw(t,e){const o={},s=c(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const u=c(t,["description"]);e!==void 0&&u!=null&&d(e,["description"],u);const h=c(t,["defaultCheckpointId"]);return e!==void 0&&h!=null&&d(e,["defaultCheckpointId"],h),o}function dw(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","name"],qe(t,s));const u=c(e,["config"]);return u!=null&&uw(u,o),o}function fw(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["config"]);return u!=null&&cw(u,o),o}function hw(t,e){const o={},s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&d(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","mimeType"],g);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const w=c(t,["enhanceInputImage"]);e!==void 0&&w!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],w);const T=c(t,["imagePreservationFactor"]);e!==void 0&&T!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const P=c(t,["labels"]);e!==void 0&&P!=null&&d(e,["labels"],P);const E=c(t,["numberOfImages"]);e!==void 0&&E!=null&&d(e,["parameters","sampleCount"],E);const A=c(t,["mode"]);return e!==void 0&&A!=null&&d(e,["parameters","mode"],A),o}function pw(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["_url","model"],qe(t,s));const u=c(e,["image"]);u!=null&&d(o,["instances[0]","image"],Nn(u));const h=c(e,["upscaleFactor"]);h!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],h);const m=c(e,["config"]);return m!=null&&hw(m,o),o}function mw(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>Na(h))),d(e,["generatedImages"],u)}return e}function gw(t){const e={},o=c(t,["uri"]);o!=null&&d(e,["uri"],o);const s=c(t,["encodedVideo"]);s!=null&&d(e,["videoBytes"],eo(s));const u=c(t,["encoding"]);return u!=null&&d(e,["mimeType"],u),e}function _w(t){const e={},o=c(t,["gcsUri"]);o!=null&&d(e,["uri"],o);const s=c(t,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],eo(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["mimeType"],u),e}function vw(t){const e={},o=c(t,["image"]);o!=null&&d(e,["_self"],Nn(o));const s=c(t,["maskMode"]);return s!=null&&d(e,["maskMode"],s),e}function yw(t){const e={},o=c(t,["image"]);o!=null&&d(e,["image"],ka(o));const s=c(t,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function ww(t){const e={},o=c(t,["image"]);o!=null&&d(e,["image"],Nn(o));const s=c(t,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function Kp(t){const e={},o=c(t,["uri"]);o!=null&&d(e,["uri"],o);const s=c(t,["videoBytes"]);s!=null&&d(e,["encodedVideo"],eo(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["encoding"],u),e}function $p(t){const e={},o=c(t,["uri"]);o!=null&&d(e,["gcsUri"],o);const s=c(t,["videoBytes"]);s!=null&&d(e,["bytesBase64Encoded"],eo(s));const u=c(t,["mimeType"]);return u!=null&&d(e,["mimeType"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xw="Content-Type",Tw="X-Server-Timeout",Cw="User-Agent",xc="x-goog-api-client",Sw="1.30.0",Ew=`google-genai-sdk/${Sw}`,Pw="v1beta1",Iw="v1beta",$h=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Nw{constructor(e){var o,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const u={};this.clientOptions.vertexai?(u.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Pw,u.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(u.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Iw,u.baseUrl="https://generativelanguage.googleapis.com/"),u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,s){const u=[this.getRequestUrlInternal(o)];return s&&u.push(this.getBaseResourcePath()),e!==""&&u.push(e),new URL(`${u.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,o,s);if(e.queryParams)for(const[m,g]of Object.entries(e.queryParams))u.searchParams.append(m,String(g));let h={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else h.body=e.body;return h=await this.includeExtraHttpOptionsToRequestInit(h,o,u.toString(),e.abortSignal),this.unaryApiCall(u,h,e.httpMethod)}patchHttpOptions(e,o){const s=JSON.parse(JSON.stringify(e));for(const[u,h]of Object.entries(o))typeof h=="object"?s[u]=Object.assign(Object.assign({},s[u]),h):h!==void 0&&(s[u]=h);return s}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,o,s);(!u.searchParams.has("alt")||u.searchParams.get("alt")!=="sse")&&u.searchParams.set("alt","sse");let h={};return h.body=e.body,h=await this.includeExtraHttpOptionsToRequestInit(h,o,u.toString(),e.abortSignal),this.streamApiCall(u,h,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,s,u){if(o&&o.timeout||u){const h=new AbortController,m=h.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const g=setTimeout(()=>h.abort(),o.timeout);g&&typeof g.unref=="function"&&g.unref()}u&&u.addEventListener("abort",()=>{h.abort()}),e.signal=m}return o&&o.extraBody!==null&&kw(e,o.extraBody),e.headers=await this.getHeadersInternal(o,s),e}async unaryApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async u=>(await Yh(u),new gc(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}async streamApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async u=>(await Yh(u),this.processStreamResponse(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}processStreamResponse(e){var o;return kr(this,arguments,function*(){const u=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),h=new TextDecoder("utf-8");if(!u)throw new Error("Response body is empty");try{let m="";for(;;){const{done:g,value:y}=yield Xe(u.read());if(g){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const w=h.decode(y,{stream:!0});try{const P=JSON.parse(w);if("error"in P){const E=JSON.parse(JSON.stringify(P.error)),A=E.status,b=E.code,B=`got status: ${A}. ${JSON.stringify(P)}`;if(b>=400&&b<600)throw new Pa({message:B,status:b})}}catch(P){if(P.name==="ApiError")throw P}m+=w;let T=m.match($h);for(;T;){const P=T[1];try{const E=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Xe(new gc(E)),m=m.slice(T[0].length),T=m.match($h)}catch(E){throw new Error(`exception parsing stream chunk ${P}. ${E}`)}}}}finally{u.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},o=Ew+" "+this.clientOptions.userAgentExtra;return e[Cw]=o,e[xc]=o,e[xw]="application/json",e}async getHeadersInternal(e,o){const s=new Headers;if(e&&e.headers){for(const[u,h]of Object.entries(e.headers))s.append(u,h);e.timeout&&e.timeout>0&&s.append(Tw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(e){var o;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(e,o){var s;const u={};o!=null&&(u.mimeType=o.mimeType,u.name=o.name,u.displayName=o.displayName),u.name&&!u.name.startsWith("files/")&&(u.name=`files/${u.name}`);const h=this.clientOptions.uploader,m=await h.stat(e);u.sizeBytes=String(m.size);const g=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:m.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");u.mimeType=g;const y={file:u},w=this.getFileName(e),T=ue("upload/v1beta/files",y._url),P=await this.fetchUploadUrl(T,u.sizeBytes,u.mimeType,w,y,o==null?void 0:o.httpOptions);return h.upload(e,P,this)}async uploadFileToFileSearchStore(e,o,s){var u;const h=this.clientOptions.uploader,m=await h.stat(o),g=String(m.size),y=(u=s==null?void 0:s.mimeType)!==null&&u!==void 0?u:m.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const w=`upload/v1beta/${e}:uploadToFileSearchStore`,T=this.getFileName(o),P={};s!=null&&s.customMetadata&&(P.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(P.chunkingConfig=s.chunkingConfig);const E=await this.fetchUploadUrl(w,g,y,T,P,s==null?void 0:s.httpOptions);return h.uploadToFileSearchStore(o,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,s,u,h,m){var g;let y={};m?y=m:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},u?{"X-Goog-Upload-File-Name":u}:{})};const w=await this.request({path:e,body:JSON.stringify(h),httpMethod:"POST",httpOptions:y});if(!w||!(w!=null&&w.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const T=(g=w==null?void 0:w.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(T===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return T}}async function Yh(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const u=JSON.stringify(s);throw o>=400&&o<600?new Pa({message:u,status:o}):new Error(u)}}function kw(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const h=JSON.parse(t.body);if(typeof h=="object"&&h!==null&&!Array.isArray(h))o=h;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(h,m){const g=Object.assign({},h);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const w=m[y],T=g[y];w&&typeof w=="object"&&!Array.isArray(w)&&T&&typeof T=="object"&&!Array.isArray(T)?g[y]=s(T,w):(T&&w&&typeof T!=typeof w&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof w}. Overwriting.`),g[y]=w)}return g}const u=s(o,e);t.body=JSON.stringify(u)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Aw="mcp_used/unknown";let Mw=!1;function Yp(t){for(const e of t)if(Rw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Mw}function Qp(t){var e;const o=(e=t[xc])!==null&&e!==void 0?e:"";t[xc]=(o+` ${Aw}`).trimStart()}function Rw(t){return t!==null&&typeof t=="object"&&t instanceof bc}function Lw(t,e=100){return kr(this,arguments,function*(){let s,u=0;for(;u<e;){const h=yield Xe(t.listTools({cursor:s}));for(const m of h.tools)yield yield Xe(m),u++;if(!h.nextCursor)break;s=h.nextCursor}})}class bc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new bc(e,o)}async initialize(){var e,o,s,u;if(this.mcpTools.length>0)return;const h={},m=[];for(const T of this.mcpClients)try{for(var g=!0,y=(o=void 0,Vs(Lw(T))),w;w=await y.next(),e=w.done,!e;g=!0){u=w.value,g=!1;const P=u;m.push(P);const E=P.name;if(h[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);h[E]=T}}catch(P){o={error:P}}finally{try{!g&&!e&&(s=y.return)&&await s.call(y)}finally{if(o)throw o.error}}this.mcpTools=m,this.functionNameToMcpClient=h}async tool(){return await this.initialize(),E_(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const u=this.functionNameToMcpClient[s.name];let h;this.config.timeout&&(h={timeout:this.config.timeout});const m=await u.callTool({name:s.name,arguments:s.args},void 0,h);o.push({functionResponse:{name:s.name,response:m.isError?{error:m}:m}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dw(t,e,o){const s=new __;let u;o.data instanceof Blob?u=JSON.parse(await o.data.text()):u=JSON.parse(o.data),Object.assign(s,u),e(s)}class Fw{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s}async connect(e){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const u=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion(),m=Bw(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),y=`${u}/ws/google.ai.generativelanguage.${h}.GenerativeService.BidiGenerateMusic?key=${g}`;let w=()=>{};const T=new Promise(Y=>{w=Y}),P=e.callbacks,E=function(){w({})},A=this.apiClient,b={onopen:E,onmessage:Y=>{Dw(A,P.onmessage,Y)},onerror:(o=P==null?void 0:P.onerror)!==null&&o!==void 0?o:function(Y){},onclose:(s=P==null?void 0:P.onclose)!==null&&s!==void 0?s:function(Y){}},B=this.webSocketFactory.create(y,zw(m),b);B.connect(),await T;const te={setup:{model:qe(this.apiClient,e.model)}};return B.send(JSON.stringify(te)),new Uw(B,this.apiClient)}}class Uw{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=Ty(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=xy(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Ir.PLAY)}pause(){this.sendPlaybackControl(Ir.PAUSE)}stop(){this.sendPlaybackControl(Ir.STOP)}resetContext(){this.sendPlaybackControl(Ir.RESET_CONTEXT)}close(){this.conn.close()}}function zw(t){const e={};return t.forEach((o,s)=>{e[s]=o}),e}function Bw(t){const e=new Headers;for(const[o,s]of Object.entries(t))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bw(t,e,o){const s=new g_;let u;o.data instanceof Blob?u=await o.data.text():o.data instanceof ArrayBuffer?u=new TextDecoder().decode(o.data):u=o.data;const h=JSON.parse(u);if(t.isVertexAI()){const m=Ey(h);Object.assign(s,m)}else Object.assign(s,h);e(s)}class Hw{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s,this.music=new Fw(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,s,u,h,m,g;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),w=this.apiClient.getApiVersion();let T;const P=this.apiClient.getHeaders();e.config&&e.config.tools&&Yp(e.config.tools)&&Qp(P);const E=Ww(P);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${w}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,T);else{const le=this.apiClient.getApiKey();let Ie="BidiGenerateContent",Se="key";le!=null&&le.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),w!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ie="BidiGenerateContentConstrained",Se="access_token"),T=`${y}/ws/google.ai.generativelanguage.${w}.GenerativeService.${Ie}?${Se}=${le}`}let A=()=>{};const b=new Promise(le=>{A=le}),B=e.callbacks,O=function(){var le;(le=B==null?void 0:B.onopen)===null||le===void 0||le.call(B),A({})},Q=this.apiClient,te={onopen:O,onmessage:le=>{bw(Q,B.onmessage,le)},onerror:(o=B==null?void 0:B.onerror)!==null&&o!==void 0?o:function(le){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(le){}},Y=this.webSocketFactory.create(T,Ow(E),te);Y.connect(),await b;let se=qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const le=this.apiClient.getProject(),Ie=this.apiClient.getLocation();se=`projects/${le}/locations/${Ie}/`+se}let he={};this.apiClient.isVertexAI()&&((u=e.config)===null||u===void 0?void 0:u.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[va.AUDIO]}:e.config.responseModalities=[va.AUDIO]),!((h=e.config)===null||h===void 0)&&h.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const me=(g=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[],pe=[];for(const le of me)if(this.isCallableTool(le)){const Ie=le;pe.push(await Ie.tool())}else pe.push(le);pe.length>0&&(e.config.tools=pe);const Te={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=wy(this.apiClient,Te):he=yy(this.apiClient,Te),delete he.config,Y.send(JSON.stringify(he)),new qw(Y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Gw={turnComplete:!0};class qw{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=mn(o.turns),e.isVertexAI()||(s=s.map(u=>Ia(u)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const h of s){if(typeof h!="object"||h===null||!("name"in h)||!("response"in h))throw new Error(`Could not parse function response, type '${typeof h}'.`);if(!e.isVertexAI()&&!("id"in h))throw new Error(Vw)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},Gw),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:Sy(e)}:o={realtimeInput:Cy(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function Ow(t){const e={};return t.forEach((o,s)=>{e[s]=o}),e}function Ww(t){const e=new Headers;for(const[o,s]of Object.entries(t))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qh=10;function Xh(t){var e,o,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let u=!1;for(const m of(o=t==null?void 0:t.tools)!==null&&o!==void 0?o:[])if(Ar(m)){u=!0;break}if(!u)return!0;const h=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return h&&(h<0||!Number.isInteger(h))||h==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",h),!0):!1}function Ar(t){return"callTool"in t&&typeof t.callTool=="function"}function Zw(t){var e,o,s;return(s=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(u=>Ar(u)))!==null&&s!==void 0?s:!1}function jh(t){var e;const o=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,u)=>{if(Ar(s))return;const h=s;h.functionDeclarations&&h.functionDeclarations.length>0&&o.push(u)}),o}function ep(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jw extends hi{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var s,u,h,m,g;const y=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!Zw(o)||Xh(o.config))return await this.generateContentInternal(y);const w=jh(o);if(w.length>0){const B=w.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let T,P;const E=mn(y.contents),A=(h=(u=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.maximumRemoteCalls)!==null&&h!==void 0?h:Qh;let b=0;for(;b<A&&(T=await this.generateContentInternal(y),!(!T.functionCalls||T.functionCalls.length===0));){const B=T.candidates[0].content,O=[];for(const Q of(g=(m=o.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[])if(Ar(Q)){const Y=await Q.callTool(T.functionCalls);O.push(...Y)}b++,P={role:"user",parts:O},y.contents=mn(y.contents),y.contents.push(B),y.contents.push(P),ep(y.config)&&(E.push(B),E.push(P))}return ep(y.config)&&(T.automaticFunctionCallingHistory=E),T},this.generateContentStream=async o=>{var s,u,h,m,g;if(this.maybeMoveToResponseJsonSchem(o),Xh(o.config)){const P=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(P)}const y=jh(o);if(y.length>0){const P=y.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${P}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const w=(h=(u=(s=o==null?void 0:o.config)===null||s===void 0?void 0:s.toolConfig)===null||u===void 0?void 0:u.functionCallingConfig)===null||h===void 0?void 0:h.streamFunctionCallArguments,T=(g=(m=o==null?void 0:o.config)===null||m===void 0?void 0:m.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(w&&!T)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var u;let h;const m=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((u=y==null?void 0:y.safetyAttributes)===null||u===void 0?void 0:u.contentType)==="Positive Prompt"?h=y==null?void 0:y.safetyAttributes:m.push(y);let g;return h?g={generatedImages:m,positivePromptSafetyAttributes:h,sdkHttpResponse:s.sdkHttpResponse}:g={generatedImages:m,sdkHttpResponse:s.sdkHttpResponse},g}),this.list=async o=>{var s;const m={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((s=m.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Do(fi.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(m),m)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(u=>u.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const u={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(u)},this.generateVideos=async o=>{var s,u,h,m,g,y;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((u=o.video)===null||u===void 0)&&u.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((m=(h=o.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.uri&&(!((y=(g=o.source)===null||g===void 0?void 0:g.video)===null||y===void 0)&&y.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,s,u;const h=(o=e.config)===null||o===void 0?void 0:o.tools;if(!h)return e;const m=await Promise.all(h.map(async y=>Ar(y)?await y.tool():y)),g={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(g.config.tools=m,e.config&&e.config.tools&&Yp(e.config.tools)){const y=(u=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&u!==void 0?u:{};let w=Object.assign({},y);Object.keys(w).length===0&&(w=this.apiClient.getDefaultHeaders()),Qp(w),g.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:w})}return g}async initAfcToolsMap(e){var o,s,u;const h=new Map;for(const m of(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Ar(m)){const g=m,y=await g.tool();for(const w of(u=y.functionDeclarations)!==null&&u!==void 0?u:[]){if(!w.name)throw new Error("Function declaration name is required.");if(h.has(w.name))throw new Error(`Duplicate tool declaration name: ${w.name}`);h.set(w.name,g)}}return h}async processAfcStream(e){var o,s,u;const h=(u=(s=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&u!==void 0?u:Qh;let m=!1,g=0;const y=await this.initAfcToolsMap(e);return(function(w,T,P){var E,A;return kr(this,arguments,function*(){for(var b,B,O,Q;g<h;){m&&(g++,m=!1);const he=yield Xe(w.processParamsMaybeAddMcpUsage(P)),me=yield Xe(w.generateContentStreamInternal(he)),pe=[],Te=[];try{for(var te=!0,Y=(B=void 0,Vs(me)),se;se=yield Xe(Y.next()),b=se.done,!b;te=!0){Q=se.value,te=!1;const le=Q;if(yield yield Xe(le),le.candidates&&(!((E=le.candidates[0])===null||E===void 0)&&E.content)){Te.push(le.candidates[0].content);for(const Ie of(A=le.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(g<h&&Ie.functionCall){if(!Ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(Ie.functionCall.name)){const Se=yield Xe(T.get(Ie.functionCall.name).callTool([Ie.functionCall]));pe.push(...Se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${Ie.functionCall.name}`)}}}}catch(le){B={error:le}}finally{try{!te&&!b&&(O=Y.return)&&(yield Xe(O.call(Y)))}finally{if(B)throw B.error}}if(pe.length>0){m=!0;const le=new Us;le.candidates=[{content:{role:"user",parts:pe}}],yield yield Xe(le);const Ie=[];Ie.push(...Te),Ie.push({role:"user",parts:pe});const Se=mn(P.contents).concat(Ie);P.contents=Se}else break}})})(this,y,e)}async generateContentInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Zh(this.apiClient,e);return g=ue("{model}:generateContent",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Kh(T),E=new Us;return Object.assign(E,P),E})}else{const w=Wh(this.apiClient,e);return g=ue("{model}:generateContent",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Jh(T),E=new Us;return Object.assign(E,P),E})}}async generateContentStreamInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Zh(this.apiClient,e);return g=ue("{model}:streamGenerateContent?alt=sse",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),m.then(function(P){return kr(this,arguments,function*(){var E,A,b,B;try{for(var O=!0,Q=Vs(P),te;te=yield Xe(Q.next()),E=te.done,!E;O=!0){B=te.value,O=!1;const Y=B,se=Kh(yield Xe(Y.json()));se.sdkHttpResponse={headers:Y.headers};const he=new Us;Object.assign(he,se),yield yield Xe(he)}}catch(Y){A={error:Y}}finally{try{!O&&!E&&(b=Q.return)&&(yield Xe(b.call(Q)))}finally{if(A)throw A.error}}})})}else{const w=Wh(this.apiClient,e);return g=ue("{model}:streamGenerateContent?alt=sse",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}),m.then(function(P){return kr(this,arguments,function*(){var E,A,b,B;try{for(var O=!0,Q=Vs(P),te;te=yield Xe(Q.next()),E=te.done,!E;O=!0){B=te.value,O=!1;const Y=B,se=Jh(yield Xe(Y.json()));se.sdkHttpResponse={headers:Y.headers};const he=new Us;Object.assign(he,se),yield yield Xe(he)}}catch(Y){A={error:Y}}finally{try{!O&&!E&&(b=Q.return)&&(yield Xe(b.call(Q)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=t0(this.apiClient,e);return g=ue("{model}:predict",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=i0(T),E=new kh;return Object.assign(E,P),E})}else{const w=e0(this.apiClient,e);return g=ue("{model}:batchEmbedContents",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=n0(T),E=new kh;return Object.assign(E,P),E})}}async generateImagesInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=p0(this.apiClient,e);return g=ue("{model}:predict",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=g0(T),E=new Ah;return Object.assign(E,P),E})}else{const w=h0(this.apiClient,e);return g=ue("{model}:predict",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=m0(T),E=new Ah;return Object.assign(E,P),E})}}async editImageInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=Yy(this.apiClient,e);return h=ue("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const w=Qy(y),T=new r_;return Object.assign(T,w),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=pw(this.apiClient,e);return h=ue("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const w=mw(y),T=new s_;return Object.assign(T,w),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=$0(this.apiClient,e);return h=ue("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=Y0(y),T=new l_;return Object.assign(T,w),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=nw(this.apiClient,e);return h=ue("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=iw(y),T=new a_;return Object.assign(T,w),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=L0(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>wc(T))}else{const w=R0(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>yc(T))}}async listInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=G0(this.apiClient,e);return g=ue("{models_url}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=O0(T),E=new Mh;return Object.assign(E,P),E})}else{const w=H0(this.apiClient,e);return g=ue("{models_url}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=q0(T),E=new Mh;return Object.assign(E,P),E})}}async update(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=fw(this.apiClient,e);return g=ue("{model}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>wc(T))}else{const w=dw(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>yc(T))}}async delete(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Zy(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Ky(T),E=new Rh;return Object.assign(E,P),E})}else{const w=Wy(this.apiClient,e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Jy(T),E=new Rh;return Object.assign(E,P),E})}}async countTokens(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Gy(this.apiClient,e);return g=ue("{model}:countTokens",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Oy(T),E=new Lh;return Object.assign(E,P),E})}else{const w=Hy(this.apiClient,e);return g=ue("{model}:countTokens",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=qy(T),E=new Lh;return Object.assign(E,P),E})}}async computeTokens(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=Dy(this.apiClient,e);return h=ue("{model}:computeTokens",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const w=Fy(y),T=new u_;return Object.assign(T,w),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=T0(this.apiClient,e);return g=ue("{model}:predictLongRunning",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m.then(T=>{const P=w0(T),E=new ya;return Object.assign(E,P),E})}else{const w=x0(this.apiClient,e);return g=ue("{model}:predictLongRunning",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m.then(T=>{const P=y0(T),E=new ya;return Object.assign(E,P),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kw extends hi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=o.name.split("/operations/")[0];let h;s&&"httpOptions"in s&&(h=s.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:u,config:{httpOptions:h}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:u,_isVertexAI:!1})}}async get(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=o.name.split("/operations/")[0];let h;s&&"httpOptions"in s&&(h=s.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:u,config:{httpOptions:h}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:u,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=jg(e);return g=ue("{operationName}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),m}else{const w=Xg(e);return g=ue("{operationName}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json()),m}}async fetchPredictVideosOperationInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=Wg(e);return h=ue("{resourceName}:fetchPredictOperation",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $w(t){const e={},o=c(t,["data"]);if(o!=null&&d(e,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Yw(t){const e={},o=c(t,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>rx(h))),d(e,["parts"],u)}const s=c(t,["role"]);return s!=null&&d(e,["role"],s),e}function Qw(t,e,o){const s={},u=c(e,["expireTime"]);o!==void 0&&u!=null&&d(o,["expireTime"],u);const h=c(e,["newSessionExpireTime"]);o!==void 0&&h!=null&&d(o,["newSessionExpireTime"],h);const m=c(e,["uses"]);o!==void 0&&m!=null&&d(o,["uses"],m);const g=c(e,["liveConnectConstraints"]);o!==void 0&&g!=null&&d(o,["bidiGenerateContentSetup"],ox(t,g));const y=c(e,["lockAdditionalFields"]);return o!==void 0&&y!=null&&d(o,["fieldMask"],y),s}function Xw(t,e){const o={},s=c(e,["config"]);return s!=null&&d(o,["config"],Qw(t,s,o)),o}function jw(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=c(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function ex(t){const e={},o=c(t,["id"]);o!=null&&d(e,["id"],o);const s=c(t,["args"]);s!=null&&d(e,["args"],s);const u=c(t,["name"]);if(u!=null&&d(e,["name"],u),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tx(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function nx(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function ix(t,e){const o={},s=c(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const u=c(t,["responseModalities"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","responseModalities"],u);const h=c(t,["temperature"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","temperature"],h);const m=c(t,["topP"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topP"],m);const g=c(t,["topK"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","topK"],g);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const w=c(t,["mediaResolution"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","mediaResolution"],w);const T=c(t,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const P=c(t,["speechConfig"]);e!==void 0&&P!=null&&d(e,["setup","generationConfig","speechConfig"],Vc(P));const E=c(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],Yw(Nt(b)));const B=c(t,["tools"]);if(e!==void 0&&B!=null){let me=Lr(B);Array.isArray(me)&&(me=me.map(pe=>lx(Rr(pe)))),d(e,["setup","tools"],me)}const O=c(t,["sessionResumption"]);e!==void 0&&O!=null&&d(e,["setup","sessionResumption"],sx(O));const Q=c(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","inputAudioTranscription"],Q);const te=c(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&d(e,["setup","outputAudioTranscription"],te);const Y=c(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);const se=c(t,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const he=c(t,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),o}function ox(t,e){const o={},s=c(e,["model"]);s!=null&&d(o,["setup","model"],qe(t,s));const u=c(e,["config"]);return u!=null&&d(o,["config"],ix(u,o)),o}function rx(t){const e={},o=c(t,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=c(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const u=c(t,["executableCode"]);u!=null&&d(e,["executableCode"],u);const h=c(t,["fileData"]);h!=null&&d(e,["fileData"],jw(h));const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],ex(m));const g=c(t,["functionResponse"]);g!=null&&d(e,["functionResponse"],g);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],$w(y));const w=c(t,["text"]);w!=null&&d(e,["text"],w);const T=c(t,["thought"]);T!=null&&d(e,["thought"],T);const P=c(t,["thoughtSignature"]);P!=null&&d(e,["thoughtSignature"],P);const E=c(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function sx(t){const e={},o=c(t,["handle"]);if(o!=null&&d(e,["handle"],o),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lx(t){const e={},o=c(t,["functionDeclarations"]);if(o!=null){let T=o;Array.isArray(T)&&(T=T.map(P=>P)),d(e,["functionDeclarations"],T)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],u);const h=c(t,["fileSearch"]);h!=null&&d(e,["fileSearch"],h);const m=c(t,["codeExecution"]);if(m!=null&&d(e,["codeExecution"],m),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(t,["googleMaps"]);g!=null&&d(e,["googleMaps"],tx(g));const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],nx(y));const w=c(t,["urlContext"]);return w!=null&&d(e,["urlContext"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ax(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const u=Object.keys(s).map(h=>`${o}.${h}`);e.push(...u)}else e.push(o)}return e.join(",")}function ux(t,e){let o=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const h=s.setup;typeof h=="object"&&h!==null?(t.bidiGenerateContentSetup=h,o=h):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const u=t.fieldMask;if(o){const h=ax(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)h?t.fieldMask=h:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&u!==null&&Array.isArray(u)&&u.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];u.length>0&&(g=u.map(w=>m.includes(w)?`generationConfig.${w}`:w));const y=[];h&&y.push(h),g.length>0&&y.push(...g),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else u!==null&&Array.isArray(u)&&u.length>0?t.fieldMask=u.join(","):delete t.fieldMask;return t}class cx extends hi{constructor(e){super(),this.apiClient=e}async create(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=Xw(this.apiClient,e);h=ue("auth_tokens",g._url),m=g._query,delete g.config,delete g._url,delete g._query;const y=ux(g,e.config);return u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(w=>w.json()),u.then(w=>w)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dx(t,e){const o={},s=c(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),o}function fx(t){const e={},o=c(t,["config"]);return o!=null&&dx(o,e),e}function hx(t,e){const o={},s=c(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),o}function px(t){const e={},o=c(t,["name"]);o!=null&&d(e,["_url","name"],o);const s=c(t,["config"]);return s!=null&&hx(s,e),e}function mx(t){const e={},o=c(t,["name"]);return o!=null&&d(e,["_url","name"],o),e}function gx(t,e){const o={},s=c(t,["customMetadata"]);if(e!==void 0&&s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["customMetadata"],h)}const u=c(t,["chunkingConfig"]);return e!==void 0&&u!=null&&d(e,["chunkingConfig"],u),o}function _x(t){const e={},o=c(t,["name"]);o!=null&&d(e,["name"],o);const s=c(t,["metadata"]);s!=null&&d(e,["metadata"],s);const u=c(t,["done"]);u!=null&&d(e,["done"],u);const h=c(t,["error"]);h!=null&&d(e,["error"],h);const m=c(t,["response"]);return m!=null&&d(e,["response"],yx(m)),e}function vx(t){const e={},o=c(t,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const s=c(t,["fileName"]);s!=null&&d(e,["fileName"],s);const u=c(t,["config"]);return u!=null&&gx(u,e),e}function yx(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["parent"]);s!=null&&d(e,["parent"],s);const u=c(t,["documentName"]);return u!=null&&d(e,["documentName"],u),e}function wx(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);return e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),o}function xx(t){const e={},o=c(t,["config"]);return o!=null&&wx(o,e),e}function Tx(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["fileSearchStores"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["fileSearchStores"],h)}return e}function Cx(t,e){const o={},s=c(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const u=c(t,["displayName"]);e!==void 0&&u!=null&&d(e,["displayName"],u);const h=c(t,["customMetadata"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),d(e,["customMetadata"],g)}const m=c(t,["chunkingConfig"]);return e!==void 0&&m!=null&&d(e,["chunkingConfig"],m),o}function Sx(t){const e={},o=c(t,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const s=c(t,["config"]);return s!=null&&Cx(s,e),e}function Ex(t){const e={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Px(t,e){const o={},s=c(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),o}function Ix(t){const e={},o=c(t,["name"]);o!=null&&d(e,["_url","name"],o);const s=c(t,["config"]);return s!=null&&Px(s,e),e}function Nx(t){const e={},o=c(t,["name"]);return o!=null&&d(e,["_url","name"],o),e}function kx(t,e){const o={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const u=c(t,["pageToken"]);return e!==void 0&&u!=null&&d(e,["_query","pageToken"],u),o}function Ax(t){const e={},o=c(t,["parent"]);o!=null&&d(e,["_url","parent"],o);const s=c(t,["config"]);return s!=null&&kx(s,e),e}function Mx(t){const e={},o=c(t,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=c(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const u=c(t,["documents"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["documents"],h)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rx extends hi{constructor(e){super(),this.apiClient=e,this.list=async o=>new Do(fi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Nx(e);return h=ue("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var o,s;let u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Ix(e);u=ue("{name}",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Ax(e);return h=ue("{parent}/documents",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=Mx(y),T=new c_;return Object.assign(T,w),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx extends hi{constructor(e,o=new Rx(e)){super(),this.apiClient=e,this.documents=o,this.list=async(s={})=>new Do(fi.PAGED_ITEM_FILE_SEARCH_STORES,u=>this.listInternal(u),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=fx(e);return h=ue("fileSearchStores",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=mx(e);return h=ue("{name}",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var o,s;let u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=px(e);u=ue("{name}",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=xx(e);return h=ue("fileSearchStores",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=Tx(y),T=new d_;return Object.assign(T,w),T})}}async uploadToFileSearchStoreInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Sx(e);return h=ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=Ex(y),T=new f_;return Object.assign(T,w),T})}}async importFile(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=vx(e);return h=ue("{file_search_store_name}:importFile",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const w=_x(y),T=new Dc;return Object.assign(T,w),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dx(t,e){const o={},s=c(t,["name"]);return s!=null&&d(o,["_url","name"],s),o}function Fx(t,e){const o={},s=c(t,["name"]);return s!=null&&d(o,["_url","name"],s),o}function Ux(t,e,o){const s={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const u=c(t,["tunedModelDisplayName"]);if(e!==void 0&&u!=null&&d(e,["displayName"],u),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const h=c(t,["epochCount"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","epochCount"],h);const m=c(t,["learningRateMultiplier"]);if(m!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],m),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=c(t,["batchSize"]);e!==void 0&&g!=null&&d(e,["tuningTask","hyperparameters","batchSize"],g);const y=c(t,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function zx(t,e,o){const s={};let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const A=c(t,["validationDataset"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec"],tp(A))}else if(u==="PREFERENCE_TUNING"){const A=c(t,["validationDataset"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec"],tp(A))}const h=c(t,["tunedModelDisplayName"]);e!==void 0&&h!=null&&d(e,["tunedModelDisplayName"],h);const m=c(t,["description"]);e!==void 0&&m!=null&&d(e,["description"],m);let g=c(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=c(t,["epochCount"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(g==="PREFERENCE_TUNING"){const A=c(t,["epochCount"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let w=c(o,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const A=c(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(w==="PREFERENCE_TUNING"){const A=c(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let T=c(o,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const A=c(t,["adapterSize"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(T==="PREFERENCE_TUNING"){const A=c(t,["adapterSize"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const P=c(t,["labels"]);e!==void 0&&P!=null&&d(e,["labels"],P);const E=c(t,["beta"]);return e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function Bx(t,e){const o={},s=c(t,["baseModel"]);s!=null&&d(o,["baseModel"],s);const u=c(t,["preTunedModel"]);u!=null&&d(o,["preTunedModel"],u);const h=c(t,["trainingDataset"]);h!=null&&$x(h);const m=c(t,["config"]);return m!=null&&Ux(m,o),o}function Vx(t,e){const o={},s=c(t,["baseModel"]);s!=null&&d(o,["baseModel"],s);const u=c(t,["preTunedModel"]);u!=null&&d(o,["preTunedModel"],u);const h=c(t,["trainingDataset"]);h!=null&&Yx(h,o,e);const m=c(t,["config"]);return m!=null&&zx(m,o,e),o}function bx(t,e){const o={},s=c(t,["name"]);return s!=null&&d(o,["_url","name"],s),o}function Hx(t,e){const o={},s=c(t,["name"]);return s!=null&&d(o,["_url","name"],s),o}function Gx(t,e,o){const s={},u=c(t,["pageSize"]);e!==void 0&&u!=null&&d(e,["_query","pageSize"],u);const h=c(t,["pageToken"]);e!==void 0&&h!=null&&d(e,["_query","pageToken"],h);const m=c(t,["filter"]);return e!==void 0&&m!=null&&d(e,["_query","filter"],m),s}function qx(t,e,o){const s={},u=c(t,["pageSize"]);e!==void 0&&u!=null&&d(e,["_query","pageSize"],u);const h=c(t,["pageToken"]);e!==void 0&&h!=null&&d(e,["_query","pageToken"],h);const m=c(t,["filter"]);return e!==void 0&&m!=null&&d(e,["_query","filter"],m),s}function Ox(t,e){const o={},s=c(t,["config"]);return s!=null&&Gx(s,o),o}function Wx(t,e){const o={},s=c(t,["config"]);return s!=null&&qx(s,o),o}function Zx(t,e){const o={},s=c(t,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const u=c(t,["nextPageToken"]);u!=null&&d(o,["nextPageToken"],u);const h=c(t,["tunedModels"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Xp(g))),d(o,["tuningJobs"],m)}return o}function Jx(t,e){const o={},s=c(t,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const u=c(t,["nextPageToken"]);u!=null&&d(o,["nextPageToken"],u);const h=c(t,["tuningJobs"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Tc(g))),d(o,["tuningJobs"],m)}return o}function Kx(t,e){const o={},s=c(t,["name"]);s!=null&&d(o,["model"],s);const u=c(t,["name"]);return u!=null&&d(o,["endpoint"],u),o}function $x(t,e){const o={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(t,["examples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),d(o,["examples","examples"],u)}return o}function Yx(t,e,o){const s={};let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=c(t,["gcsUri"]);e!==void 0&&m!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(u==="PREFERENCE_TUNING"){const m=c(t,["gcsUri"]);e!==void 0&&m!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],m)}let h=c(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const m=c(t,["vertexDatasetResource"]);e!==void 0&&m!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(h==="PREFERENCE_TUNING"){const m=c(t,["vertexDatasetResource"]);e!==void 0&&m!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],m)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Xp(t,e){const o={},s=c(t,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const u=c(t,["name"]);u!=null&&d(o,["name"],u);const h=c(t,["state"]);h!=null&&d(o,["state"],Lp(h));const m=c(t,["createTime"]);m!=null&&d(o,["createTime"],m);const g=c(t,["tuningTask","startTime"]);g!=null&&d(o,["startTime"],g);const y=c(t,["tuningTask","completeTime"]);y!=null&&d(o,["endTime"],y);const w=c(t,["updateTime"]);w!=null&&d(o,["updateTime"],w);const T=c(t,["description"]);T!=null&&d(o,["description"],T);const P=c(t,["baseModel"]);P!=null&&d(o,["baseModel"],P);const E=c(t,["_self"]);return E!=null&&d(o,["tunedModel"],Kx(E)),o}function Tc(t,e){const o={},s=c(t,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const u=c(t,["name"]);u!=null&&d(o,["name"],u);const h=c(t,["state"]);h!=null&&d(o,["state"],Lp(h));const m=c(t,["createTime"]);m!=null&&d(o,["createTime"],m);const g=c(t,["startTime"]);g!=null&&d(o,["startTime"],g);const y=c(t,["endTime"]);y!=null&&d(o,["endTime"],y);const w=c(t,["updateTime"]);w!=null&&d(o,["updateTime"],w);const T=c(t,["error"]);T!=null&&d(o,["error"],T);const P=c(t,["description"]);P!=null&&d(o,["description"],P);const E=c(t,["baseModel"]);E!=null&&d(o,["baseModel"],E);const A=c(t,["tunedModel"]);A!=null&&d(o,["tunedModel"],A);const b=c(t,["preTunedModel"]);b!=null&&d(o,["preTunedModel"],b);const B=c(t,["supervisedTuningSpec"]);B!=null&&d(o,["supervisedTuningSpec"],B);const O=c(t,["preferenceOptimizationSpec"]);O!=null&&d(o,["preferenceOptimizationSpec"],O);const Q=c(t,["tuningDataStats"]);Q!=null&&d(o,["tuningDataStats"],Q);const te=c(t,["encryptionSpec"]);te!=null&&d(o,["encryptionSpec"],te);const Y=c(t,["partnerModelTuningSpec"]);Y!=null&&d(o,["partnerModelTuningSpec"],Y);const se=c(t,["customBaseModel"]);se!=null&&d(o,["customBaseModel"],se);const he=c(t,["experiment"]);he!=null&&d(o,["experiment"],he);const me=c(t,["labels"]);me!=null&&d(o,["labels"],me);const pe=c(t,["outputUri"]);pe!=null&&d(o,["outputUri"],pe);const Te=c(t,["pipelineJob"]);Te!=null&&d(o,["pipelineJob"],Te);const le=c(t,["serviceAccount"]);le!=null&&d(o,["serviceAccount"],le);const Ie=c(t,["tunedModelDisplayName"]);Ie!=null&&d(o,["tunedModelDisplayName"],Ie);const Se=c(t,["veoTuningSpec"]);return Se!=null&&d(o,["veoTuningSpec"],Se),o}function Qx(t,e){const o={},s=c(t,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const u=c(t,["name"]);u!=null&&d(o,["name"],u);const h=c(t,["metadata"]);h!=null&&d(o,["metadata"],h);const m=c(t,["done"]);m!=null&&d(o,["done"],m);const g=c(t,["error"]);return g!=null&&d(o,["error"],g),o}function tp(t,e){const o={},s=c(t,["gcsUri"]);s!=null&&d(o,["validationDatasetUri"],s);const u=c(t,["vertexDatasetResource"]);return u!=null&&d(o,["validationDatasetUri"],u),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xx extends hi{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new Do(fi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const u={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(u.checkpointId=o.config.preTunedModelCheckpointId);const h=Object.assign(Object.assign({},o),{preTunedModel:u});return h.baseModel=void 0,await this.tuneInternal(h)}else{const u=Object.assign({},o);return await this.tuneInternal(u)}else{const u=Object.assign({},o),h=await this.tuneMldevInternal(u);let m="";return h.metadata!==void 0&&h.metadata.tunedModel!==void 0?m=h.metadata.tunedModel:h.name!==void 0&&h.name.includes("/operations/")&&(m=h.name.split("/operations/")[0]),{name:m,state:mc.JOB_STATE_QUEUED}}}}async getInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Hx(e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>Tc(T))}else{const w=bx(e);return g=ue("{name}",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>Xp(T))}}async listInternal(e){var o,s,u,h;let m,g="",y={};if(this.apiClient.isVertexAI()){const w=Wx(e);return g=ue("tuningJobs",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Jx(T),E=new Dh;return Object.assign(E,P),E})}else{const w=Ox(e);return g=ue("tunedModels",w._url),y=w._query,delete w._url,delete w._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(w),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal}).then(T=>T.json().then(P=>{const E=P;return E.sdkHttpResponse={headers:T.headers},E})),m.then(T=>{const P=Zx(T),E=new Dh;return Object.assign(E,P),E})}}async cancel(e){var o,s,u,h;let m="",g={};if(this.apiClient.isVertexAI()){const y=Fx(e);m=ue("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=Dx(e);m=ue("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(h=e.config)===null||h===void 0?void 0:h.abortSignal})}}async tuneInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI()){const g=Vx(e,e);return h=ue("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Tc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,s;let u,h="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Bx(e);return h=ue("tunedModels",g._url),m=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(w=>{const T=w;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Qx(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jx{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const eT=1024*1024*8,tT=3,nT=1e3,iT=2,xa="x-goog-upload-status";async function oT(t,e,o){var s;const u=await jp(t,e,o),h=await(u==null?void 0:u.json());if(((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function rT(t,e,o){var s;const u=await jp(t,e,o),h=await(u==null?void 0:u.json());if(((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const m=Ip(h),g=new Fc;return Object.assign(g,m),g}async function jp(t,e,o){var s,u;let h=0,m=0,g=new gc(new Response),y="upload";for(h=t.size;m<h;){const w=Math.min(eT,h-m),T=t.slice(m,m+w);m+w>=h&&(y+=", finalize");let P=0,E=nT;for(;P<tT&&(g=await o.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(m),"Content-Length":String(w)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[xa]));)P++,await lT(E),E=E*iT;if(m+=w,((u=g==null?void 0:g.headers)===null||u===void 0?void 0:u[xa])!=="active")break;if(h<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function sT(t){return{size:t.size,type:t.type}}function lT(t){return new Promise(e=>setTimeout(e,t))}class aT{async upload(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oT(e,o,s)}async uploadToFileSearchStore(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rT(e,o,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sT(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uT{create(e,o,s){return new cT(e,o,s)}}class cT{constructor(e,o,s){this.url=e,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const np="x-goog-api-key";class dT{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(np)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(np,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fT="gl-node/";class hT{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const s=qg(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const u=new dT(this.apiKey);this.apiClient=new Nw({auth:u,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fT+"web",uploader:new aT,downloader:new jx}),this.models=new Jw(this.apiClient),this.live=new Hw(this.apiClient,u,new uT),this.batches=new vv(this.apiClient),this.chats=new jv(this.models,this.apiClient),this.caches=new Yv(this.apiClient),this.files=new uy(this.apiClient),this.operations=new Kw(this.apiClient),this.authTokens=new cx(this.apiClient),this.tunings=new Xx(this.apiClient),this.fileSearchStores=new Lx(this.apiClient)}}var ip={};let pa=null;const op=new Map,pT=new Map;let Bs=!1;const _a=[],mT=1500,lc=5,gT=1e4,_T=()=>pa||(ip.API_KEY?(pa=new hT({apiKey:ip.API_KEY}),pa):(console.warn("Gemini API key not found. AI features will be disabled."),null)),Cc=async()=>{if(Bs||_a.length===0)return;Bs=!0;const t=_a.shift(),e=_T();if(!e){console.error("Gemini client not available for queued request, returning fallback."),t.resolve(t.fallback),Bs=!1,_a.length>0&&Cc();return}let o=0,s=null;for(;o<lc;)try{const u=await e.models.generateContent({model:"gemini-2.5-flash",...t.params}),h=t.processResponse(u.text);t.resolve(h),s=null;break}catch(u){s=u;const h=JSON.stringify(u)||"";if(h.includes("429")||h.includes("RESOURCE_EXHAUSTED")){if(o++,o>=lc){console.error(`Max retries reached for rate-limited request ${t.id}.`);break}const m=gT*Math.pow(2,o-1)+Math.random()*1e3;console.warn(`Rate limit hit for ${t.id}. Retrying in ${Math.round(m/1e3)}s... (Attempt ${o}/${lc})`),await new Promise(g=>setTimeout(g,m))}else{console.error(`Non-retryable error processing request ${t.id}:`,u);break}}s&&(console.error(`Request ${t.id} failed in queue, returning fallback.`,s),t.resolve(t.fallback)),setTimeout(()=>{Bs=!1,Cc()},mT)},Sc=(t,e,o,s,u)=>{if(e.has(t))return e.get(t);const h=new Promise((m,g)=>{_a.push({id:t,params:o,resolve:m,reject:g,processResponse:s,fallback:u}),Bs||Cc()}).catch(m=>(console.error(`Request ${t} failed in queue, returning fallback.`,m),e.delete(t),u));return e.set(t,h),h},vT={type:Dt.OBJECT,properties:{summary:{type:Dt.STRING,description:"A concise and engaging summary of the historical site, under 70 words, in Vietnamese. Use markdown for bolding the site name, e.g. **Cu Rng**."},funFacts:{type:Dt.ARRAY,description:"A list of 3 interesting, lesser-known fun facts about the site, in Vietnamese.",items:{type:Dt.STRING}}},required:["summary","funFacts"]},yT={type:Dt.OBJECT,properties:{funFacts:{type:Dt.ARRAY,description:"A list of 3 interesting, lesser-known fun facts about the site, in Vietnamese.",items:{type:Dt.STRING}}},required:["funFacts"]},wT=t=>{var o;const e=(o=t.events)==null?void 0:o.map(s=>`- ${s.event_name}: ${s.description}`).join(`
`);return`Provide a structured JSON response about the historical site "${t.site_name}" in Da Nang, Vietnam.
The site is a ${t.site_type}.
Key information includes:
${e}

The JSON object must conform to the provided schema.
- The 'summary' should be a concise, engaging overview for tourists, under 70 words, in Vietnamese. Use markdown for bolding the site name.
- The 'funFacts' should be an array of 3 interesting, lesser-known facts about the site, in Vietnamese.`},xT=t=>{var o;const e=(o=t.events)==null?void 0:o.map(s=>`- ${s.event_name}: ${s.description}`).join(`
`);return`Provide a structured JSON response about the historical site "${t.site_name}" in Da Nang, Vietnam.
The site is a ${t.site_type}.
Key information includes:
${e}

The JSON object must conform to the provided schema.
- The 'funFacts' should be an array of 3 interesting, lesser-known facts about the site. Do not include the site name in the facts. Write in Vietnamese.`},TT=t=>`Hy vit mt on tm tt tiu s ngn gn, hp dn v nhn vt lch s "${t.name}" (${t.birth_year} - ${t.death_year}). Da trn thng tin sau: "${t.biography}". Hy vit bng ting Vit, di 80 t, vi vn phong trang trng, ph hp cho mt ng dng gio dc lch s.`,CT=t=>{var o,s;const e=`sitedata-${t.site_id}`;if(t.description){const h={contents:xT(t),config:{responseMimeType:"application/json",responseSchema:yT}},m=y=>{try{const w=y.replace(/^```json\s*|```\s*$/g,"").trim(),T=JSON.parse(w);return{summary:t.description,funFacts:T.funFacts||[]}}catch(w){return console.error("Failed to parse AI JSON response for fun facts:",y,w),{summary:t.description,funFacts:[]}}},g={summary:t.description,funFacts:[]};return Sc(e,op,h,m,g)}else{const h={contents:wT(t),config:{responseMimeType:"application/json",responseSchema:vT}},m=y=>{try{const w=y.replace(/^```json\s*|```\s*$/g,"").trim();return JSON.parse(w)}catch(w){return console.error("Failed to parse AI JSON response for site:",y,w),g}},g={summary:((s=(o=t.events)==null?void 0:o[0])==null?void 0:s.description)||"Khng c m t chi tit.",funFacts:[]};return Sc(e,op,h,m,g)}},ST=(t,e)=>{const o=`person-${t}`,s=TT(e),u=e.biography||"Khng c tiu s chi tit.";return Sc(o,pT,{contents:s},h=>h,u)},ac=new Map,em=t=>{if(!t)return null;let e=null;const o=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=t.match(o);if(s&&s[1]&&(e=s[1]),e){const u=new URLSearchParams({autoplay:"0",rel:"0",modestbranding:"1",iv_load_policy:"3"});return`https://www.youtube.com/embed/${e}?${u.toString()}`}return null},ET=({isModal:t})=>t?S.jsxs("div",{className:"animate-pulse space-y-8",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"h-4 bg-slate-700 rounded w-full"}),S.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"}),S.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4"})]}),S.jsx("div",{className:"h-10 bg-slate-700 rounded w-1/2"}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsxs("div",{className:"space-y-6",children:[S.jsx("div",{className:"h-28 bg-slate-700 rounded"}),S.jsx("div",{className:"h-28 bg-slate-700 rounded"})]})]}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsx("div",{className:"h-40 bg-slate-700 rounded-lg"}),S.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[S.jsx("div",{className:"h-16 bg-slate-700 rounded"}),S.jsx("div",{className:"h-16 bg-slate-700 rounded"})]})]}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsx("div",{className:"h-40 bg-slate-700 rounded-lg"}),S.jsxs("div",{className:"flex space-x-3 mt-2",children:[S.jsx("div",{className:"h-20 w-32 bg-slate-700 rounded"}),S.jsx("div",{className:"h-20 w-32 bg-slate-700 rounded"})]})]})]}):S.jsxs("div",{className:"animate-pulse space-y-3 p-3",children:[S.jsx("div",{className:"h-24 bg-slate-700 rounded-lg"}),S.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4"}),S.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/2"})]}),PT=({summary:t,isLoading:e})=>{if(e)return S.jsxs("div",{className:"animate-pulse space-y-2",children:[S.jsx("div",{className:"h-3 bg-slate-600 rounded"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded w-4/5"})]});if(!t)return null;const o=()=>t.split(/\*\*(.*?)\*\*/g).map((u,h)=>h%2===1?S.jsx("strong",{children:u},h):u);return S.jsx("p",{className:"text-slate-300 leading-relaxed text-base",children:o()})},IT=({facts:t,isLoading:e})=>e?S.jsxs("div",{className:"space-y-4",children:[S.jsx("div",{className:"h-6 bg-slate-700 rounded w-1/3"}),S.jsxs("div",{className:"animate-pulse space-y-2 pl-2",children:[S.jsx("div",{className:"h-3 bg-slate-600 rounded"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded w-5/6"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded"})]})]}):!t||t.length===0?null:S.jsxs("section",{children:[S.jsxs("h3",{className:"text-lg font-bold text-sky-400 mb-3 flex items-center",children:[S.jsx(ng,{className:"h-6 w-6 mr-3"}),"Bn c bit?"]}),S.jsx("ul",{className:"list-disc list-inside space-y-2 text-slate-300 pl-2",children:t.map((o,s)=>S.jsx("li",{children:o},s))})]}),NT=({media:t})=>{const[e,o]=Z.useState(0);return Z.useEffect(()=>{if(t.length<=1)return;const s=setInterval(()=>{o(u=>(u+1)%t.length)},3e3);return()=>clearInterval(s)},[t.length]),t.length===0?S.jsx("div",{className:"w-full h-32 bg-slate-700 flex items-center justify-center",children:S.jsx(Ic,{className:"h-8 w-8 text-slate-500"})}):S.jsxs("div",{className:"relative w-full h-32 bg-slate-900",children:[t.map((s,u)=>S.jsx("img",{src:s.media_url,alt:s.caption,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${u===e?"opacity-100":"opacity-0"}`},s.media_id)),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),t.length>1&&S.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex items-center space-x-2",children:t.map((s,u)=>S.jsx("div",{className:`rounded-full transition-all duration-300 ${u===e?"w-2 h-2 bg-white":"w-1.5 h-1.5 bg-white/60"}`},`dot-${u}`))})]})},kT=({event:t,isLast:e})=>{var A;const[o,s]=Z.useState(0),[u,h]=Z.useState(!0),m=t.media&&t.media.length>0,g=((A=t.media)==null?void 0:A.length)||0,y=m?t.media[o]:null,w=Z.useCallback(()=>{s(b=>(b+1)%g)},[g]),T=Z.useCallback(()=>{s(b=>(b-1+g)%g)},[g]);Z.useEffect(()=>{if(!u||g<=1||(y==null?void 0:y.media_type)==="video")return;const b=setInterval(()=>{w()},5e3);return()=>clearInterval(b)},[u,g,w,y]),Z.useEffect(()=>{(y==null?void 0:y.media_type)==="video"&&h(!1)},[o,y]);const P=()=>{w(),h(!1)},E=()=>{T(),h(!1)};return S.jsxs("li",{className:"relative pl-8",children:[S.jsx("div",{className:"absolute -left-[7px] top-1 h-3 w-3 bg-sky-500 rounded-full border-2 border-slate-800"}),!e&&S.jsx("div",{className:"absolute left-0 top-1 h-full w-0.5 bg-slate-600"}),S.jsx("p",{className:"font-semibold text-lg text-slate-100",children:t.event_name}),t.start_date&&S.jsx("p",{className:"text-xs text-slate-400 mb-1 font-mono",children:new Date(t.start_date).toLocaleString("vi-VN")}),m&&y&&S.jsxs("div",{className:"relative my-4 group",onMouseEnter:()=>y.media_type==="image"&&h(!1),onMouseLeave:()=>y.media_type==="image"&&h(!0),children:[S.jsx("div",{className:"aspect-video w-full bg-slate-700 rounded-lg overflow-hidden shadow-lg",children:y.media_type==="video"?(()=>{const b=em(y.media_url);return b?S.jsx("iframe",{src:b,title:y.caption,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"},y.media_id):S.jsx("video",{src:y.media_url,controls:!0,className:"w-full h-full object-contain bg-black",children:"Trnh duyt ca bn khng h tr th video."},y.media_id)})():S.jsx("img",{src:y.media_url,alt:y.caption,className:"w-full h-full object-cover animate-fade-in-image"},y.media_id)}),g>1&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:E,"aria-label":"Previous media",className:"absolute top-1/2 left-2 -translate-y-1/2 p-1.5 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-300 hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400",children:S.jsx(Gs,{className:"h-5 w-5"})}),S.jsx("button",{onClick:P,"aria-label":"Next media",className:"absolute top-1/2 right-2 -translate-y-1/2 p-1.5 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-300 hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400",children:S.jsx(qs,{className:"h-5 w-5"})}),y.media_type==="image"&&S.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-2",children:S.jsx("button",{onClick:()=>h(!u),"aria-label":u?"Pause slideshow":"Play slideshow",className:"p-1.5 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-300 hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400",children:u?S.jsx(Qm,{className:"h-5 w-5"}):S.jsx(Nc,{className:"h-5 w-5"})})}),S.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/50 text-white text-xs font-mono rounded-md",children:[o+1," / ",g]})]}),S.jsx("p",{className:"text-center text-sm italic text-slate-400 mt-2",children:y.caption})]}),S.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:t.description})]})},tm=({siteId:t,isModal:e,onShowDetailModal:o,onPersonSelect:s,onShowDirections:u})=>{var je,Ae,ze,J;const[h,m]=Z.useState(null),[g,y]=Z.useState(!0),[w,T]=Z.useState(null),[P,E]=Z.useState(null),[A,b]=Z.useState(!0),[B,O]=Z.useState(0),[Q,te]=Z.useState(0),Y=Z.useRef(null),se=Z.useRef([]),[he,me]=Z.useState(!1);Z.useEffect(()=>{(async()=>{var D,W;y(!0),T(null),m(null),E(null),b(!0),O(0),te(0);let H=null;if(ac.has(t))H=ac.get(t);else try{H=await Lg(t),H&&ac.set(t,H)}catch(_e){T(" xy ra li khi ti d liu."),console.error(_e),y(!1);return}if(H){m(H);try{const _e=await CT(H);E(_e)}catch(_e){console.error("Failed to fetch AI data:",_e),E({summary:H.description||((W=(D=H.events)==null?void 0:D[0])==null?void 0:W.description)||"",funFacts:[]})}finally{b(!1)}}else T("Khng tm thy thng tin chi tit cho a im ny.");y(!1)})()},[t]);const pe=Z.useMemo(()=>h!=null&&h.events?h.events.flatMap(K=>K.media||[]):[],[h==null?void 0:h.events]),Te=Z.useMemo(()=>pe.filter(K=>K.media_type==="image"),[pe]),le=Z.useMemo(()=>pe.filter(K=>K.media_type==="video"),[pe]),Ie=Z.useMemo(()=>{if(!h)return[];const K=new Map;return h.events.forEach(H=>{var D;(D=H.persons)==null||D.forEach(W=>{K.has(W.person_id)||K.set(W.person_id,W)})}),Array.from(K.values())},[h]);Z.useEffect(()=>{var K;e&&se.current[B]&&B>0&&((K=se.current[B])==null||K.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[B,e]),Z.useEffect(()=>{const K=()=>{if(Y.current){const{scrollWidth:D,clientWidth:W}=Y.current;me(D>W)}},H=setTimeout(K,100);return window.addEventListener("resize",K),()=>{clearTimeout(H),window.removeEventListener("resize",K)}},[Te]);const Se=Z.useMemo(()=>h!=null&&h.events?[...h.events].sort((K,H)=>{const D=K.start_date?new Date(K.start_date).getTime():-1/0,W=H.start_date?new Date(H.start_date).getTime():-1/0;return D-W}):[],[h==null?void 0:h.events]),X=()=>{Te.length>0&&O(K=>(K+1)%Te.length)},ce=()=>{Te.length>0&&O(K=>(K-1+Te.length)%Te.length)},Ue=K=>{if(Y.current){const H=Y.current.clientWidth*.8;Y.current.scrollBy({left:K==="left"?-H:H,behavior:"smooth"})}};if(g)return S.jsx(ET,{isModal:e});if(w)return S.jsx("p",{className:"text-red-400 italic p-3",children:w});if(!h)return S.jsx("p",{className:"text-slate-400 p-3",children:"Khng c d liu."});if(!e){const K=h.description||((je=Se[0])==null?void 0:je.description)||"Thng tin chi tit ang c cp nht.";return S.jsxs("div",{className:"bg-slate-800 rounded-xl overflow-hidden",children:[S.jsx(NT,{media:Te.slice(0,5)}),S.jsxs("div",{className:"p-4 flex flex-col",children:[S.jsx("h3",{className:"font-bold text-sky-300 truncate text-xl mb-2",children:h.site_name}),S.jsx("div",{className:"min-h-[60px] mb-4",children:S.jsx("p",{className:"text-sm text-slate-400 leading-relaxed line-clamp-3",children:K})}),S.jsxs("div",{className:"flex items-stretch gap-2",children:[S.jsxs("button",{onClick:o,className:"flex-grow flex items-center justify-center text-sm font-bold text-white bg-gradient-to-r from-sky-500 to-cyan-400 hover:from-sky-400 hover:to-cyan-300 transition-all duration-300 group py-2.5 rounded-lg shadow-lg hover:shadow-cyan-500/30 transform hover:-translate-y-0.5",children:["Xem chi tit",S.jsx($m,{className:"h-4 w-4 ml-2 transform group-hover:translate-x-1 transition-transform duration-300"})]}),S.jsx("button",{onClick:()=>u==null?void 0:u(h),"aria-label":"Nhn ch ng",title:"Nhn ch ng",className:"flex-shrink-0 p-2.5 bg-slate-700/80 hover:bg-slate-700 text-sky-400 rounded-lg shadow-lg transform hover:-translate-y-0.5 transition-all duration-300",children:S.jsx(dp,{className:"h-5 w-5"})})]})]})]})}return S.jsxs("div",{className:"flex flex-col space-y-8",children:[S.jsx(PT,{summary:(P==null?void 0:P.summary)??null,isLoading:A}),S.jsxs("section",{children:[S.jsx("h3",{className:"text-lg font-bold text-sky-400 mb-3",children:"Thng tin chi tit"}),S.jsx("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:S.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 text-sm",children:[h.address&&S.jsxs("li",{className:"flex items-start gap-x-3",children:[S.jsx(tn,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block",children:"a ch"}),S.jsx("span",{className:"text-slate-300 block",children:h.address})]})]}),S.jsxs("li",{className:"flex items-start gap-x-3",children:[S.jsx(jm,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block",children:"Loi hnh"}),S.jsx("span",{className:"text-slate-300 capitalize",children:h.site_type})]})]}),h.established_year&&S.jsxs("li",{className:"flex items-start gap-x-3",children:[S.jsx(cp,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block",children:"Nm thnh lp"}),S.jsx("span",{className:"text-slate-300",children:h.established_year})]})]}),h.status&&S.jsxs("li",{className:"flex items-start gap-x-3",children:[S.jsx(eg,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block",children:"Tnh trng"}),S.jsx("span",{className:"text-slate-300",children:h.status})]})]}),h.additional_info&&S.jsxs("li",{className:"sm:col-span-2 flex items-start gap-x-3",children:[S.jsx(cc,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block mb-2",children:"Thng s khc"}),S.jsx("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 text-slate-300",children:Object.entries(h.additional_info).map(([K,H])=>S.jsxs(bs.Fragment,{children:[S.jsxs("dt",{className:"font-medium text-slate-400",children:[K,":"]}),S.jsx("dd",{children:H})]},K))})]})]}),Ie.length>0&&S.jsxs("li",{className:"sm:col-span-2 flex items-start gap-x-3",children:[S.jsx(Km,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsxs("strong",{className:"font-semibold text-slate-200 block mb-2",children:["Nhn vt lin quan (",Ie.length,")"]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:Ie.map(K=>S.jsx("button",{onClick:()=>s==null?void 0:s(K),className:"text-xs font-semibold text-sky-300 hover:text-sky-200 bg-sky-500/10 hover:bg-sky-500/20 px-3 py-1.5 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-sky-400",children:K.full_name},K.person_id))})]})]})]})})]}),S.jsx(IT,{facts:(P==null?void 0:P.funFacts)??null,isLoading:A}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-4 flex items-center",children:[S.jsx(ap,{className:"h-6 w-6 mr-3"}),"Dng thi gian"]}),S.jsx("ul",{className:"space-y-8 border-l-2 border-slate-600",children:Se.length>0?Se.map((K,H)=>S.jsx(kT,{event:K,isLast:H===Se.length-1},K.event_id)):S.jsx("p",{className:"pl-8 text-sm text-slate-400 italic",children:"Cha c thng tin s kin."})})]}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-3 flex items-center",children:[S.jsx(Ic,{className:"h-6 w-6 mr-3"}),"Th vin nh"]}),Te.length>0?S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"relative w-full aspect-video bg-slate-900/50 rounded-lg overflow-hidden group shadow-lg",children:[S.jsx("img",{src:((Ae=Te[B])==null?void 0:Ae.media_url)||"",alt:((ze=Te[B])==null?void 0:ze.caption)||"Selected view",className:"w-full h-full object-cover transition-opacity duration-300 ease-in-out animate-fade-in-image"},(J=Te[B])==null?void 0:J.media_id),Te.length>1&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:ce,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 bg-black/40 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400 z-10",children:S.jsx(Gs,{className:"h-6 w-6"})}),S.jsx("button",{onClick:X,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-black/40 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400 z-10",children:S.jsx(qs,{className:"h-6 w-6"})})]})]}),Te.length>1&&S.jsxs("div",{className:"relative",children:[S.jsx("div",{ref:Y,className:"video-thumbnail-container flex overflow-x-auto space-x-3 py-2 px-1",children:Te.map((K,H)=>S.jsx("button",{ref:D=>{se.current[H]=D},onClick:()=>O(H),className:`relative w-28 h-20 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 transform focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${B===H?"ring-sky-400 scale-105 shadow-lg":"ring-transparent hover:scale-105"}`,children:S.jsx("img",{src:K.media_url,alt:K.caption,className:`w-full h-full object-cover transition-opacity ${B===H?"opacity-100":"opacity-70 hover:opacity-100"}`})},K.media_id))}),he&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>Ue("left"),className:"absolute top-1/2 -translate-y-1/2 left-1 z-10 p-1.5 bg-slate-800/60 hover:bg-slate-800/90 backdrop-blur-sm text-white rounded-full shadow-lg transition-all","aria-label":"Scroll thumbnails left",children:S.jsx(Gs,{className:"h-5 w-5"})}),S.jsx("button",{onClick:()=>Ue("right"),className:"absolute top-1/2 -translate-y-1/2 right-1 z-10 p-1.5 bg-slate-800/60 hover:bg-slate-800/90 backdrop-blur-sm text-white rounded-full shadow-lg transition-all","aria-label":"Scroll thumbnails right",children:S.jsx(qs,{className:"h-5 w-5"})})]})]})]}):S.jsx("p",{className:"text-sm text-slate-400 italic",children:"Cha c hnh nh."})]}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-3 flex items-center",children:[S.jsx(up,{className:"h-6 w-6 mr-3"}),"Th vin Video"]}),le.length>0?S.jsxs("div",{className:"space-y-3",children:[S.jsx("div",{className:"w-full aspect-video bg-black rounded-lg overflow-hidden shadow-lg",children:(()=>{const K=le[Q];if(!K)return null;const H=em(K.media_url);return H?S.jsx("iframe",{src:H,title:K.caption,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"},K.media_id):S.jsx("video",{src:K.media_url,controls:!0,className:"w-full h-full",children:"Trnh duyt ca bn khng h tr video."},K.media_id)})()}),le.length>1&&S.jsx("div",{className:"video-thumbnail-container flex overflow-x-auto space-x-3 py-2 -mx-6 px-6",children:le.map((K,H)=>S.jsxs("button",{onClick:()=>te(H),className:`relative w-40 flex-shrink-0 aspect-video rounded-lg overflow-hidden transition-all duration-300 transform focus:outline-none ${Q===H?"ring-2 ring-sky-400 scale-105 shadow-lg":"ring-1 ring-transparent hover:scale-105"}`,children:[S.jsx("img",{src:K.thumbnail_url||"https://picsum.photos/200/120",alt:K.caption,className:`w-full h-full object-cover transition-opacity ${Q===H?"opacity-100":"opacity-75 hover:opacity-100"}`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1.5 left-2 right-2 text-xs font-semibold text-white truncate",children:K.caption}),Q===H&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:S.jsx(Nc,{className:"h-8 w-8 text-white/80"})})]},K.media_id))})]}):S.jsx("p",{className:"text-sm text-slate-400 italic",children:"Cha c video."})]})]})};delete Lo.Icon.Default.prototype._getIconUrl;Lo.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const rp=t=>{const e=`
    <div style="position: relative; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
      ${t?'<div class="marker-pulsate" style="position: absolute; width: 32px; height: 32px; background-color: #38bdf8; border-radius: 50%;"></div>':""}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#0ea5e9" style="position: relative; z-index: 1; width: 32px; height: 32px; filter: drop-shadow(0 2px 3px rgba(0,0,0,0.5));">
        <path fill-rule="evenodd" d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
      </svg>
    </div>
  `;return Lo.divIcon({html:e,className:"",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]})},AT=Lo.divIcon({html:'<div class="user-location-marker"><div class="user-location-pulse"></div></div>',className:"",iconSize:[24,24]}),MT=({selectedSite:t,isModalOpen:e})=>{const o=Mc();return Z.useEffect(()=>{const s=setTimeout(()=>o.invalidateSize(),350);return()=>clearTimeout(s)},[e,o]),Z.useEffect(()=>{if(t){const s=[t.latitude,t.longitude];o.flyTo(s,15,{animate:!0,duration:1})}},[t,o]),null},RT=({site:t,isSelected:e,onSiteSelect:o,onShowDetailModal:s,onShowDirections:u,defaultIcon:h,selectedIcon:m,autoPanPadding:g})=>{const y=Z.useRef(null);Z.useEffect(()=>{e&&y.current&&y.current.openPopup()},[e]);const w=Z.useMemo(()=>({click:()=>{o(t)}}),[o,t]),T=Z.useMemo(()=>({remove:()=>{o(null)}}),[o]);return S.jsx(wp,{ref:y,position:[t.latitude,t.longitude],icon:e?m:h,eventHandlers:w,children:S.jsx(xp,{className:"custom-popup",minWidth:256,eventHandlers:T,autoPanPadding:g,children:S.jsx("div",{className:"w-64",children:S.jsx(tm,{siteId:t.site_id,isModal:!1,onShowDetailModal:s,onShowDirections:()=>u(t)})})})})},LT=({routeGeometry:t,userLocation:e})=>{const o=Mc();return Z.useEffect(()=>{if(t&&e){const s=Lo.latLngBounds(t).extend(e);o.flyToBounds(s,{padding:[50,50],animate:!0,duration:1})}},[t,e,o]),S.jsxs(S.Fragment,{children:[S.jsx(Cg,{positions:t,color:"#0ea5e9",weight:5,opacity:.8}),S.jsx(wp,{position:e,icon:AT,children:S.jsx(xp,{children:"V tr ca bn"})})]})},DT=({onLocationPicked:t})=>(yp({click(e){t([e.latlng.lat,e.latlng.lng])}}),null),FT=({onMapClick:t,isPicking:e})=>(yp({click(o){!e&&t&&t()}}),null),UT=t=>{const{sites:e,selectedSite:o,onSiteSelect:s,onShowDetailModal:u,isModalOpen:h,route:m,userLocation:g,onShowDirections:y,onClearDirections:w,isGettingDirections:T,isPickingStartPoint:P,onLocationPicked:E,onCancelPicking:A,onMapClick:b}=t,B=[16.0544,108.2022],[O,Q]=Z.useState(Lo.point(0,0));Z.useEffect(()=>{const se=()=>{const me=window.innerWidth<768;let pe=20,Te=20;if(me){const le=document.querySelector("header.md\\:hidden");pe=((le==null?void 0:le.offsetHeight)||0)+20}else{const le=document.querySelector("aside.md\\:relative");Te=((le==null?void 0:le.offsetWidth)||0)+20}Q(Lo.point(Te,pe))},he=setTimeout(se,100);return window.addEventListener("resize",se),()=>{clearTimeout(he),window.removeEventListener("resize",se)}},[]);const te=Z.useMemo(()=>rp(!1),[]),Y=Z.useMemo(()=>rp(!0),[]);return S.jsxs("div",{className:"relative h-full w-full",children:[S.jsxs(Tg,{center:B,zoom:12,scrollWheelZoom:!0,className:`h-full w-full z-10 ${P?"picking-location":""}`,children:[S.jsx(MT,{selectedSite:o,isModalOpen:h}),S.jsx(Sg,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),P?S.jsx(DT,{onLocationPicked:E}):S.jsx(FT,{onMapClick:b,isPicking:!1}),!m&&e.map(se=>S.jsx(RT,{site:se,isSelected:(o==null?void 0:o.site_id)===se.site_id,onSiteSelect:s,onShowDetailModal:u,onShowDirections:y,defaultIcon:te,selectedIcon:Y,autoPanPadding:O},se.site_id)),m&&g&&S.jsx(LT,{routeGeometry:m.routeGeometry,userLocation:g})]}),P&&S.jsx("div",{className:"absolute top-28 md:top-4 left-1/2 -translate-x-1/2 z-20 w-[calc(100%-2rem)] max-w-md",children:S.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-md text-white px-4 py-3 rounded-lg shadow-lg border border-slate-700 flex items-center justify-between gap-x-3",children:[S.jsxs("div",{className:"flex items-center gap-x-3",children:[S.jsx(tn,{className:"h-6 w-6 text-sky-400 animate-pulse"}),S.jsx("span",{className:"font-semibold",children:"Chn mt im trn bn "})]}),S.jsx("button",{onClick:A,className:"p-1 rounded-full text-slate-400 hover:text-white hover:bg-slate-700 transition-colors","aria-label":"Hy chn im",children:S.jsx(kc,{className:"h-5 w-5"})})]})}),T&&S.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-30 flex items-center justify-center",children:S.jsxs("div",{className:"flex flex-col items-center text-white",children:[S.jsxs("svg",{className:"animate-spin h-8 w-8 text-sky-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-3 font-semibold",children:"ang ly ch ng..."})]})})]})},zT=({site:t,onClose:e,onPersonSelect:o,onShowDirections:s})=>S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-0 md:p-4 animate-fade-in",onClick:e,children:[S.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `}),S.jsxs("div",{className:"bg-slate-800 md:rounded-lg shadow-xl w-full h-full md:h-auto md:max-w-3xl md:max-h-[90vh] flex flex-col text-slate-200 border border-slate-700",onClick:u=>u.stopPropagation(),children:[S.jsxs("header",{className:"p-4 border-b border-slate-700 flex justify-between items-center flex-shrink-0 gap-4",children:[S.jsx("h2",{className:"text-2xl font-bold text-cyan-400 truncate",title:t.site_name,children:t.site_name}),S.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s&&S.jsxs("button",{onClick:()=>s(t),className:"flex items-center gap-x-2 bg-sky-500 hover:bg-sky-600 text-white px-3 py-2 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-px",children:[S.jsx(dp,{className:"h-5 w-5"}),S.jsx("span",{className:"font-semibold text-sm hidden sm:inline",children:"Ch ng"})]}),S.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors p-2 rounded-full hover:bg-slate-700","aria-label":"ng",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),S.jsx("div",{className:"p-6 overflow-y-auto",children:S.jsx(tm,{siteId:t.site_id,isModal:!0,onPersonSelect:o,onShowDirections:s})})]})]}),uc=new Map,BT=t=>{if(!t)return null;let e=null;const o=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=t.match(o);if(s&&s[1]&&(e=s[1]),e){const u=new URLSearchParams({autoplay:"0",rel:"0",modestbranding:"1",iv_load_policy:"3"});return`https://www.youtube.com/embed/${e}?${u.toString()}`}return null},VT=()=>S.jsxs("div",{className:"animate-pulse grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsx("div",{className:"h-40 w-40 bg-slate-700 rounded-full mx-auto"}),S.jsx("div",{className:"h-6 bg-slate-700 rounded w-3/4 mx-auto"}),S.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2 mx-auto"})]}),S.jsxs("div",{className:"md:col-span-2 space-y-8",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"h-4 bg-slate-700 rounded w-full"}),S.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"})]}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsx("div",{className:"h-20 bg-slate-700 rounded"})]}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsx("div",{className:"h-40 bg-slate-700 rounded-lg"})]}),S.jsxs("div",{children:[S.jsx("div",{className:"h-8 bg-slate-700 rounded w-1/3 mb-4"}),S.jsx("div",{className:"h-40 bg-slate-700 rounded-lg"})]})]})]}),bT=({personDetail:t})=>{const[e,o]=Z.useState(""),[s,u]=Z.useState(!0);return Z.useEffect(()=>{(async()=>{u(!0);const m={name:t.full_name,birth_year:t.birth_year,death_year:t.death_year,biography:t.biography},g=await ST(String(t.person_id),m);o(g),u(!1)})()},[t]),s?S.jsxs("div",{className:"animate-pulse space-y-2 mb-6",children:[S.jsx("div",{className:"h-3 bg-slate-600 rounded"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded"}),S.jsx("div",{className:"h-3 bg-slate-600 rounded w-4/5"})]}):S.jsx("p",{className:"text-slate-300 mb-6 text-base leading-relaxed",children:e})},HT=({event:t,isLast:e,onSiteSelect:o})=>{const s=t.related_site_id&&t.related_site_name;return S.jsxs("li",{className:"relative pl-8",children:[S.jsx("div",{className:"absolute -left-[7px] top-1 h-3 w-3 bg-sky-500 rounded-full border-2 border-slate-800"}),!e&&S.jsx("div",{className:"absolute left-0 top-1 h-full w-0.5 bg-slate-600"}),S.jsx("p",{className:"font-semibold text-lg text-slate-100",children:t.event_name}),t.start_date&&S.jsx("p",{className:"text-xs text-slate-400 mb-2 font-mono",children:new Date(t.start_date).toLocaleDateString("vi-VN")}),S.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-3",children:t.description}),s&&S.jsxs("button",{onClick:()=>o(t.related_site_id),className:"flex items-center text-xs font-semibold text-sky-400 hover:text-sky-300 transition-colors group bg-sky-500/10 hover:bg-sky-500/20 px-3 py-1.5 rounded-full",children:[S.jsx(tn,{className:"h-4 w-4 mr-2"}),"Xem a im: ",t.related_site_name]})]})},GT=({personId:t,onSiteSelect:e})=>{var le,Ie,Se;const[o,s]=Z.useState(null),[u,h]=Z.useState(!0),[m,g]=Z.useState(null),[y,w]=Z.useState(0),[T,P]=Z.useState(0),E=Z.useRef(null),A=Z.useRef([]),[b,B]=Z.useState(!1);Z.useEffect(()=>{(async()=>{if(uc.has(t)){s(uc.get(t)),h(!1);return}try{h(!0),g(null),w(0),P(0);const ce=await Dg(t);ce?(uc.set(t,ce),s(ce)):g("Khng tm thy thng tin chi tit cho nhn vt ny.")}catch(ce){g(" xy ra li khi ti d liu."),console.error(ce)}finally{h(!1)}})()},[t]);const O=Z.useMemo(()=>{if(!o)return[];const X=o.events.flatMap(ce=>ce.media||[]);return[...o.media,...X]},[o]),Q=Z.useMemo(()=>O.filter(X=>X.media_type==="image"),[O]),te=Z.useMemo(()=>O.filter(X=>X.media_type==="video"),[O]),Y=Z.useMemo(()=>{var ce;if(!Q||Q.length===0)return null;const X=Q.find(Ue=>Ue.caption.includes("Chn dung")||Ue.caption.includes("Tng i"));return(X==null?void 0:X.media_url)||((ce=Q[0])==null?void 0:ce.media_url)},[Q]),se=Z.useMemo(()=>o!=null&&o.events?[...o.events].sort((X,ce)=>{const Ue=X.start_date?new Date(X.start_date).getTime():-1/0,je=ce.start_date?new Date(ce.start_date).getTime():-1/0;return Ue-je}):[],[o==null?void 0:o.events]);Z.useEffect(()=>{var X;y>0&&Q.length>0&&A.current[y]&&((X=A.current[y])==null||X.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[y,Q.length]),Z.useEffect(()=>{const X=()=>{if(E.current){const{scrollWidth:Ue,clientWidth:je}=E.current;B(Ue>je)}},ce=setTimeout(X,100);return window.addEventListener("resize",X),()=>{clearTimeout(ce),window.removeEventListener("resize",X)}},[Q]);const he=()=>{Q.length>0&&w(X=>(X+1)%Q.length)},me=()=>{Q.length>0&&w(X=>(X-1+Q.length)%Q.length)},pe=X=>{if(E.current){const ce=E.current.clientWidth*.8;E.current.scrollBy({left:X==="left"?-ce:ce,behavior:"smooth"})}},Te=X=>{switch(X){case"Qu qun":return tn;case"Trnh  hc vn":return cp;case"L lun chnh tr":return tg;case"Ngh nghip, chc v":return cc;default:return cc}};return u?S.jsx(VT,{}):m?S.jsx("p",{className:"text-red-400 italic p-3",children:m}):o?S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-8",children:[S.jsxs("div",{className:"flex flex-col items-center text-center mb-8 md:mb-0",children:[S.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden bg-slate-700 mb-4 ring-4 ring-slate-600 shadow-lg flex items-center justify-center",children:Y?S.jsx("img",{src:Y,alt:`Chn dung ${o.full_name}`,className:"w-full h-full object-cover"}):S.jsx(Hs,{className:"h-20 w-20 text-slate-500"})}),S.jsx("h3",{className:"text-xl font-bold text-slate-100",children:o.full_name}),S.jsxs("p",{className:"text-slate-400 font-mono",children:["(",o.birth_year," - ",o.death_year,")"]}),o.additional_info&&S.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700 text-left w-full space-y-4",children:Object.entries(o.additional_info).map(([X,ce])=>{const Ue=Te(X);return S.jsxs("div",{className:"flex items-start gap-x-3",children:[S.jsx(Ue,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-semibold text-slate-200 block text-sm",children:X}),S.jsx("span",{className:"text-slate-300 text-sm",children:ce})]})]},X)})})]}),S.jsxs("div",{className:"md:col-span-2 space-y-8",children:[S.jsx(bT,{personDetail:o}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-4 flex items-center",children:[S.jsx(ap,{className:"h-6 w-6 mr-3"}),"Dng thi gian S kin"]}),S.jsx("ul",{className:"space-y-8 border-l-2 border-slate-600",children:se.length>0?se.map((X,ce)=>S.jsx(HT,{event:X,isLast:ce===se.length-1,onSiteSelect:e},X.event_id)):S.jsx("p",{className:"pl-8 text-sm text-slate-400 italic",children:"Cha c thng tin s kin."})})]}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-3 flex items-center",children:[S.jsx(Ic,{className:"h-6 w-6 mr-3"}),"Th vin nh"]}),Q.length>0?S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"relative w-full aspect-video bg-slate-900/50 rounded-lg overflow-hidden group shadow-lg",children:[S.jsx("img",{src:((le=Q[y])==null?void 0:le.media_url)||"",alt:((Ie=Q[y])==null?void 0:Ie.caption)||"Selected view",className:"w-full h-full object-cover transition-opacity duration-300 ease-in-out animate-fade-in-image"},(Se=Q[y])==null?void 0:Se.media_id),Q.length>1&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:me,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 bg-black/40 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400 z-10",children:S.jsx(Gs,{className:"h-6 w-6"})}),S.jsx("button",{onClick:he,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-black/40 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/60 focus:outline-none focus:ring-2 focus:ring-sky-400 z-10",children:S.jsx(qs,{className:"h-6 w-6"})})]})]}),Q.length>1&&S.jsxs("div",{className:"relative",children:[S.jsx("div",{ref:E,className:"video-thumbnail-container flex overflow-x-auto space-x-3 py-2 px-1",children:Q.map((X,ce)=>S.jsx("button",{ref:Ue=>{A.current[ce]=Ue},onClick:()=>w(ce),className:`relative w-28 h-20 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 transform focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${y===ce?"ring-sky-400 scale-105 shadow-lg":"ring-transparent hover:scale-105"}`,children:S.jsx("img",{src:X.media_url,alt:X.caption,className:`w-full h-full object-cover transition-opacity ${y===ce?"opacity-100":"opacity-70 hover:opacity-100"}`})},X.media_id))}),b&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>pe("left"),className:"absolute top-1/2 -translate-y-1/2 left-1 z-10 p-1.5 bg-slate-800/60 hover:bg-slate-800/90 backdrop-blur-sm text-white rounded-full shadow-lg transition-all","aria-label":"Scroll thumbnails left",children:S.jsx(Gs,{className:"h-5 w-5"})}),S.jsx("button",{onClick:()=>pe("right"),className:"absolute top-1/2 -translate-y-1/2 right-1 z-10 p-1.5 bg-slate-800/60 hover:bg-slate-800/90 backdrop-blur-sm text-white rounded-full shadow-lg transition-all","aria-label":"Scroll thumbnails right",children:S.jsx(qs,{className:"h-5 w-5"})})]})]})]}):S.jsx("p",{className:"text-sm text-slate-400 italic",children:"Cha c hnh nh."})]}),S.jsxs("section",{children:[S.jsxs("h3",{className:"text-xl font-bold text-sky-400 mb-3 flex items-center",children:[S.jsx(up,{className:"h-6 w-6 mr-3"}),"Th vin Video"]}),te.length>0?S.jsxs("div",{className:"space-y-3",children:[S.jsx("div",{className:"w-full aspect-video bg-black rounded-lg overflow-hidden shadow-lg",children:(()=>{const X=te[T];if(!X)return null;const ce=BT(X.media_url);return ce?S.jsx("iframe",{src:ce,title:X.caption,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"},X.media_id):S.jsx("video",{src:X.media_url,controls:!0,className:"w-full h-full",children:"Trnh duyt ca bn khng h tr video."},X.media_id)})()}),te.length>1&&S.jsx("div",{className:"video-thumbnail-container flex overflow-x-auto space-x-3 py-2 -mx-6 px-6",children:te.map((X,ce)=>S.jsxs("button",{onClick:()=>P(ce),className:`relative w-40 flex-shrink-0 aspect-video rounded-lg overflow-hidden transition-all duration-300 transform focus:outline-none ${T===ce?"ring-2 ring-sky-400 scale-105 shadow-lg":"ring-1 ring-transparent hover:scale-105"}`,children:[S.jsx("img",{src:X.thumbnail_url||"https://picsum.photos/200/120",alt:X.caption,className:`w-full h-full object-cover transition-opacity ${T===ce?"opacity-100":"opacity-75 hover:opacity-100"}`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1.5 left-2 right-2 text-xs font-semibold text-white truncate",children:X.caption}),T===ce&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:S.jsx(Nc,{className:"h-8 w-8 text-white/80"})})]},X.media_id))})]}):S.jsx("p",{className:"text-sm text-slate-400 italic",children:"Cha c video."})]})]})]}):S.jsx("p",{className:"text-slate-400 p-3",children:"Khng c d liu."})},qT=({person:t,onClose:e,onSiteSelect:o,sites:s})=>{const u=h=>s.find(m=>String(m.site_id)===String(h));return S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-0 md:p-4 animate-fade-in",onClick:e,children:[S.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `}),S.jsxs("div",{className:"bg-slate-800 md:rounded-lg shadow-xl w-full h-full md:h-auto md:max-w-3xl md:max-h-[90vh] flex flex-col text-slate-200 border border-slate-700",onClick:h=>h.stopPropagation(),children:[S.jsxs("header",{className:"p-4 border-b border-slate-700 flex justify-between items-center flex-shrink-0",children:[S.jsx("h2",{className:"text-2xl font-bold text-cyan-400",children:t.full_name}),S.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors p-1 rounded-full hover:bg-slate-600","aria-label":"ng",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsx("div",{className:"p-6 overflow-y-auto",children:S.jsx(GT,{personId:t.person_id,onSiteSelect:h=>{const m=u(h);m&&o(m)}})})]})]})},OT=({allSites:t,allPersons:e,viewMode:o,onSelect:s,onMenuClick:u})=>{const[h,m]=Z.useState(""),[g,y]=Z.useState(!1),w=Z.useRef(null),T=Z.useMemo(()=>{if(!h)return[];const E=h.toLowerCase(),A=O=>O.toLowerCase().includes(E),b=t.filter(O=>A(O.site_name)).slice(0,5),B=e.filter(O=>A(O.full_name)).slice(0,3);return o==="sites"?[...b,...B]:[...B,...b]},[h,t,e,o]),P=E=>{s(E),m(""),y(!1)};return Z.useEffect(()=>{const E=A=>{w.current&&!w.current.contains(A.target)&&y(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]),S.jsxs("div",{className:"relative w-full",ref:w,children:[S.jsxs("div",{className:`
        relative flex items-center w-full bg-slate-800 text-white rounded-full transition-shadow duration-200
        ${g?"shadow-lg ring-2 ring-sky-500/50":"shadow-md"}
        border border-slate-700
      `,children:[S.jsxs("button",{className:"pl-3 pr-2 py-3 text-slate-400 hover:text-white md:cursor-default md:hover:text-slate-400",onClick:u,children:[S.jsx("div",{className:"md:hidden",children:S.jsx(Xm,{className:"h-6 w-6"})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(Jm,{className:"h-5 w-5"})})]}),S.jsx("input",{type:"text",placeholder:"Tm a im, nhn vt...",value:h,onChange:E=>m(E.target.value),onFocus:()=>y(!0),className:"flex-grow bg-transparent border-none py-3 text-base text-slate-100 placeholder-slate-400 focus:ring-0 focus:outline-none"}),h?S.jsx("button",{onClick:()=>m(""),className:"p-2 mr-1 text-slate-400 hover:text-white rounded-full hover:bg-slate-700/50",children:S.jsx(kc,{className:"h-5 w-5"})}):S.jsx("div",{className:"w-4 mr-2"})]}),g&&T.length>0&&S.jsx("div",{className:"absolute top-full mt-2 w-full bg-slate-800 border border-slate-700 rounded-xl shadow-2xl max-h-[60vh] overflow-y-auto z-50 animate-fade-in-overlay",children:S.jsx("ul",{className:"py-2",children:T.map((E,A)=>{const b="site_id"in E;return S.jsxs("li",{onClick:()=>P(E),className:"flex items-center px-4 py-3 hover:bg-slate-700/50 cursor-pointer border-b border-slate-700/30 last:border-0",children:[S.jsx("div",{className:"bg-slate-700 p-2 rounded-full mr-3 text-sky-400 flex-shrink-0",children:b?S.jsx(tn,{className:"h-5 w-5"}):S.jsx(Hs,{className:"h-5 w-5"})}),S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"text-sm font-semibold text-slate-100 truncate",children:b?E.site_name:E.full_name}),S.jsx("p",{className:"text-xs text-slate-400 capitalize truncate",children:b?E.site_type:`Nhn vt (${E.birth_year||"?"} - ${E.death_year||"?"})`})]})]},b?`s-${E.site_id}`:`p-${E.person_id}`)})})})]})},WT=({viewMode:t,onViewModeChange:e})=>S.jsxs("div",{className:"flex gap-2 w-full md:w-auto pointer-events-auto",children:[S.jsxs("button",{onClick:()=>e("sites"),className:`
          flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 md:py-2 rounded-full text-sm font-bold transition-all shadow-lg border
          ${t==="sites"?"bg-sky-600 border-sky-500 text-white ring-2 ring-sky-400/20":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700 hover:text-white"}
        `,children:[S.jsx(tn,{className:"h-4 w-4"}),S.jsx("span",{children:"a im"})]}),S.jsxs("button",{onClick:()=>e("persons"),className:`
          flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 md:py-2 rounded-full text-sm font-bold transition-all shadow-lg border
          ${t==="persons"?"bg-sky-600 border-sky-500 text-white ring-2 ring-sky-400/20":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700 hover:text-white"}
        `,children:[S.jsx(Hs,{className:"h-4 w-4"}),S.jsx("span",{children:"Nhn vt"})]})]});function ZT(t,e){const[o,s]=Z.useState(t);return Z.useEffect(()=>{const u=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(u)}},[t,e]),o}const sp=({value:t,onChange:e,onSelect:o,placeholder:s,isUserLocationAllowed:u,onSelectUserLocation:h,autoFocus:m,className:g,icon:y})=>{const[w,T]=Z.useState([]),[P,E]=Z.useState(!1),[A,b]=Z.useState(!1),B=ZT(t,300),O=Z.useRef(null);Z.useEffect(()=>{if(!A||B.length<3){T([]);return}(async()=>{E(!0);try{const Y=await Bg(B);T(Y)}catch{T([])}finally{E(!1)}})()},[B,A]),Z.useEffect(()=>{const te=Y=>{O.current&&!O.current.contains(Y.target)&&b(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[]);const Q=te=>{o(te),b(!1)};return S.jsxs("div",{className:"relative w-full group",ref:O,children:[S.jsxs("div",{className:`
                relative flex items-center bg-slate-800 rounded-xl border border-slate-700 focus-within:border-sky-500 focus-within:ring-1 focus-within:ring-sky-500 transition-all
                ${g}
            `,children:[S.jsx("div",{className:"pl-3 pr-2 flex-shrink-0 flex items-center justify-center",children:y}),S.jsx("input",{type:"text",value:t,onChange:te=>e(te.target.value),onFocus:()=>b(!0),placeholder:s,autoFocus:m,className:"w-full bg-transparent border-none py-3 px-0 text-slate-100 placeholder-slate-500 focus:ring-0 text-sm font-medium leading-relaxed"}),t&&S.jsx("button",{onClick:()=>e(""),className:"p-2 mr-1 text-slate-500 hover:text-white rounded-full transition-colors focus:outline-none",children:S.jsx(kc,{className:"h-4 w-4"})})]}),A&&S.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-800 border border-slate-600 rounded-xl shadow-2xl z-50 overflow-hidden max-h-64 overflow-y-auto ring-1 ring-black/50",children:[u&&h&&t.length<3&&S.jsxs("button",{onClick:()=>{h(),b(!1)},className:"w-full text-left flex items-center px-4 py-3 hover:bg-slate-700 text-sky-400 transition-colors border-b border-slate-700",children:[S.jsx(ig,{className:"h-5 w-5 mr-3"}),S.jsx("span",{className:"font-semibold text-sm",children:"V tr ca bn"})]}),P&&S.jsx("div",{className:"p-4 text-sm text-slate-400 text-center italic",children:"ang tm kim..."}),!P&&w.length===0&&B.length>=3&&S.jsx("div",{className:"p-4 text-sm text-slate-400 text-center italic",children:"Khng tm thy kt qu."}),w.map((te,Y)=>S.jsxs("button",{onClick:()=>Q(te),className:"w-full text-left flex items-center px-4 py-3 hover:bg-slate-700 transition-colors group border-b border-slate-700/50 last:border-0",children:[S.jsx(tn,{className:"h-5 w-5 text-slate-500 group-hover:text-slate-400 mr-3 flex-shrink-0"}),S.jsxs("div",{className:"min-w-0",children:[S.jsx("div",{className:"font-medium text-slate-200 text-sm truncate",children:te.name}),S.jsx("div",{className:"text-xs text-slate-500 truncate",children:te.address})]})]},`${te.name}-${Y}`))]})]})},JT=({routeData:t,onFindRoute:e,onCancel:o,initialDestination:s,userLocation:u,isPickingStartPoint:h,onStartPickingLocation:m})=>{const[g,y]=Z.useState(""),[w,T]=Z.useState(null),[P,E]=Z.useState(""),[A,b]=Z.useState(null);Z.useEffect(()=>{s&&(E(s.name),b(s.coords)),u&&!w&&!g&&(y("V tr ca bn"),T(u))},[s,u]),Z.useEffect(()=>{w&&A&&g&&P&&e(w,g,A,P)},[w,A]);const B=()=>{y(P),T(A),E(g),b(w)};return S.jsxs("div",{className:"absolute top-0 left-0 h-full w-full md:w-[450px] z-[1000] flex flex-col bg-slate-900 shadow-2xl border-r border-slate-800",children:[S.jsxs("div",{className:"bg-slate-900 z-20 px-4 py-4 flex items-center gap-3 shrink-0 border-b border-slate-800",children:[S.jsx("button",{onClick:o,className:"p-2 -ml-2 rounded-full text-slate-400 hover:text-white hover:bg-slate-800 transition-colors focus:outline-none",title:"ng",children:S.jsx(Ym,{className:"h-6 w-6"})}),S.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Ch ng"})]}),S.jsx("div",{className:"p-5 bg-slate-900 z-10 shrink-0 border-b border-slate-800 shadow-md relative",children:S.jsxs("div",{className:"flex gap-4 relative items-start",children:[S.jsxs("div",{className:"flex flex-col items-center pt-3.5 w-6 flex-shrink-0 pointer-events-none",children:[S.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-slate-400 bg-transparent"}),S.jsx("div",{className:"flex-grow w-0.5 border-l-2 border-dashed border-slate-600 my-1 min-h-[40px]"}),S.jsx("div",{className:"w-3 h-3 rounded-full bg-sky-500 shadow-[0_0_8px_rgba(14,165,233,0.6)]"})]}),S.jsxs("div",{className:"flex-grow flex flex-col gap-3",children:[S.jsx(sp,{value:g,onChange:O=>{y(O),O||T(null)},onSelect:O=>{y(O.name),T(O.coordinates)},placeholder:"Chn im i",isUserLocationAllowed:!!u,onSelectUserLocation:()=>{y("V tr ca bn"),T(u)},autoFocus:!w,icon:S.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"})}),S.jsx(sp,{value:P,onChange:O=>{E(O),O||b(null)},onSelect:O=>{E(O.name),b(O.coordinates)},placeholder:"Chn im n",icon:S.jsx(tn,{className:"h-4 w-4 text-sky-500"})})]}),S.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 translate-x-3",children:S.jsx("button",{onClick:B,className:"p-2.5 bg-slate-800 border border-slate-600 text-sky-400 hover:text-white hover:border-sky-500 rounded-full transition-all shadow-xl hover:shadow-sky-500/20 active:scale-95 focus:outline-none",title:"i chiu",children:S.jsx(og,{className:"h-5 w-5 rotate-90"})})})]})}),S.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar bg-slate-950 relative",children:t?S.jsxs("div",{className:"p-5 pb-20",children:[S.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 mb-8 border border-slate-700 shadow-lg relative overflow-hidden group",children:[S.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:S.jsx(kf,{className:"w-24 h-24 text-sky-500 transform rotate-12 translate-x-8 -translate-y-8"})}),S.jsxs("div",{className:"relative z-10",children:[S.jsx("div",{className:"flex items-center justify-between mb-3",children:S.jsx("span",{className:"text-xs font-bold text-sky-500 uppercase tracking-widest bg-sky-900/50 px-2 py-1 rounded border border-sky-900/50",children:"Tng quan"})}),S.jsx("div",{className:"flex items-baseline gap-3 mb-2",children:S.jsx("span",{className:"text-5xl font-black text-white tracking-tighter drop-shadow-sm",children:t.summary.totalDistance})}),S.jsxs("div",{className:"flex items-center text-slate-400 font-medium text-lg",children:[S.jsx(kf,{className:"h-5 w-5 mr-2 text-sky-500"}),t.summary.totalDuration]})]})]}),S.jsxs("div",{className:"space-y-0 relative ml-3",children:[S.jsx("div",{className:"absolute left-[15px] top-4 bottom-4 w-0.5 bg-slate-800 z-0"}),t.steps.map((O,Q)=>S.jsxs("div",{className:"relative pl-12 py-3 group first:pt-0",children:[S.jsx("div",{className:"absolute left-[9px] top-5 w-3.5 h-3.5 rounded-full bg-slate-900 border-[3px] border-slate-600 group-hover:border-sky-500 transition-colors z-10 shadow-sm"}),S.jsxs("div",{className:"bg-slate-900 hover:bg-slate-800 rounded-xl p-4 transition-all border border-slate-800 hover:border-slate-600 shadow-sm",children:[S.jsx("p",{className:"text-base font-medium text-slate-200 leading-snug mb-2",dangerouslySetInnerHTML:{__html:O.instruction}}),S.jsx("p",{className:"text-xs text-slate-500 font-mono font-bold",children:O.distance})]})]},Q)),S.jsxs("div",{className:"relative pl-12 pt-6",children:[S.jsx("div",{className:"absolute left-[5px] top-6 z-10",children:S.jsx(tn,{className:"h-6 w-6 text-red-500 drop-shadow-[0_0_8px_rgba(239,68,68,0.5)]"})}),S.jsxs("div",{className:"pt-0.5",children:[S.jsx("p",{className:"text-lg font-bold text-white leading-tight",children:"n ni"}),S.jsx("p",{className:"text-sm text-slate-400 mt-1 font-medium",children:P})]})]})]})]}):S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 space-y-6 p-6",children:[S.jsx("div",{className:"w-20 h-20 bg-slate-900 rounded-full flex items-center justify-center mb-2 border border-slate-800 shadow-inner",children:S.jsx(tn,{className:"h-10 w-10 text-slate-700"})}),S.jsx("p",{className:"text-center text-slate-400 max-w-xs font-medium",children:"Chn im i v im n  xem l trnh ti u nht."}),S.jsxs("button",{onClick:m,className:`
                                flex items-center gap-2 px-6 py-3 rounded-full text-sm font-bold border transition-all shadow-lg
                                ${h?"bg-sky-600 text-white border-sky-500 ring-4 ring-sky-500/20":"bg-slate-800 text-sky-400 border-slate-700 hover:bg-slate-700 hover:border-slate-500 hover:text-white"}
                            `,children:[S.jsx(tn,{className:"h-5 w-5"}),h?"ang chn trn bn ...":"Chn im trn bn "]})]})})]})},KT=()=>{const[t,e]=Z.useState([]),[o,s]=Z.useState([]),[u,h]=Z.useState(!0),[m,g]=Z.useState("sites"),[y,w]=Z.useState(""),[T,P]=Z.useState("all"),[E,A]=Z.useState(null),[b,B]=Z.useState(null),[O,Q]=Z.useState("collapsed"),[te,Y]=Z.useState(null),[se,he]=Z.useState(null),[me,pe]=Z.useState(!1),[Te,le]=Z.useState(!1),[Ie,Se]=Z.useState(null),[X,ce]=Z.useState(!1);Z.useEffect(()=>{(async()=>{h(!0);const[re,Le]=await Promise.all([Mg(),Rg()]);e(re),s(Le),h(!1)})(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(re=>{Y([re.coords.latitude,re.coords.longitude])},re=>console.log("Geolocation error:",re),{enableHighAccuracy:!0})},[]);const Ue=Z.useMemo(()=>{const oe=y.toLowerCase();return m==="sites"?t.filter(re=>{const Le=re.site_name.toLowerCase().includes(oe),Fe=T==="all"||re.site_type===T;return Le&&Fe}):o.filter(re=>re.full_name.toLowerCase().includes(oe))},[t,o,m,y,T]),je=Z.useMemo(()=>{const oe=new Set(t.map(re=>re.site_type));return["all",...Array.from(oe)]},[t]),Ae=oe=>{A(oe),B(null)},ze=oe=>{B(oe)},J=()=>{A(null),B(null)},K=oe=>{"site_id"in oe?(Ae(oe),g("sites")):(ze(oe),g("persons"))},H=async oe=>{A(null),le(!0),Se({name:oe.site_name,coords:[oe.latitude,oe.longitude]})},D=()=>{he(null),le(!1),Se(null),ce(!1)},W=async(oe,re,Le,Fe)=>{ce(!1),pe(!0);const We=await Ug(oe,Le);he(We),pe(!1)},_e=oe=>{Vg(oe).then(re=>{alert(`V tr  chn: ${re}. Vui lng nhp vo  tm kim.`),ce(!1)})},we=()=>{Q(oe=>oe==="collapsed"?"half":"collapsed")};return S.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-slate-900 text-slate-100 font-sans",children:[S.jsx("div",{className:`${Te?"hidden md:block":"block"}`,children:S.jsx(rg,{items:Ue,viewMode:m,onSetViewMode:g,listTitle:m==="sites"?"Danh sch a im":"Danh sch nhn vt",onSearch:w,onFilter:P,siteTypes:je,selectedType:T,isLoading:u,onSiteSelect:Ae,onPersonSelect:ze,selectedItem:E||b,mobileSheetState:O,setMobileSheetState:Q})}),S.jsxs("main",{className:"flex-grow relative h-full",children:[!Te&&S.jsxs("div",{className:"absolute top-4 left-4 right-4 md:left-6 md:right-auto z-30 flex flex-col md:flex-row gap-2 md:items-center pointer-events-none",children:[S.jsx("div",{className:"w-full md:w-96 pointer-events-auto",children:S.jsx(OT,{allSites:t,allPersons:o,viewMode:m,onSelect:K,onMenuClick:we})}),S.jsx("div",{className:"pointer-events-auto",children:S.jsx(WT,{viewMode:m,onViewModeChange:g})})]}),S.jsx(UT,{sites:t,selectedSite:E,onSiteSelect:Ae,onShowDetailModal:()=>{},isModalOpen:!!E||!!b,route:se,userLocation:te,onShowDirections:H,onClearDirections:D,isGettingDirections:me,isPickingStartPoint:X,onLocationPicked:_e,onCancelPicking:()=>ce(!1),onMapClick:()=>{window.innerWidth<768&&O!=="collapsed"&&Q("collapsed")}}),E&&!Te&&S.jsx(zT,{site:E,onClose:J,onPersonSelect:ze,onShowDirections:H}),b&&S.jsx(qT,{person:b,onClose:J,onSiteSelect:oe=>{Ae(oe),g("sites")},sites:t}),Te&&S.jsx(JT,{routeData:se,onFindRoute:W,onCancel:D,initialDestination:Ie,userLocation:te,isPickingStartPoint:X,onStartPickingLocation:()=>ce(!0)})]})]})},nm=document.getElementById("root");if(!nm)throw new Error("Could not find root element to mount to");const $T=Zm.createRoot(nm);$T.render(S.jsx(bs.StrictMode,{children:S.jsx(KT,{})}));
